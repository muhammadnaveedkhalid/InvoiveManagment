/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "./action-async-storage.external":
/*!****************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external" ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CInvoiveManagment%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CInvoiveManagment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CInvoiveManagment%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CInvoiveManagment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?9d97\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(rsc)/./src/app/page.tsx\")), \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/layout.tsx */ \"(rsc)/./src/app/layout.tsx\")), \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPUMlM0ElNUNJbnZvaXZlTWFuYWdtZW50JTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDSW52b2l2ZU1hbmFnbWVudCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGFBQWEsc0JBQXNCO0FBQ2lFO0FBQ3JDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQyx1QkFBdUIsZ0pBQTZFO0FBQ3BHO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLHlCQUF5QixvSkFBK0U7QUFDeEcsb0JBQW9CLDBOQUFnRjtBQUNwRztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDdUI7QUFDNkQ7QUFDcEYsNkJBQTZCLG1CQUFtQjtBQUNoRDtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDdUQ7QUFDdkQ7QUFDTyx3QkFBd0IsOEdBQWtCO0FBQ2pEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2UtYXBwLz81OGIxIl0sInNvdXJjZXNDb250ZW50IjpbIlwiVFVSQk9QQUNLIHsgdHJhbnNpdGlvbjogbmV4dC1zc3IgfVwiO1xuaW1wb3J0IHsgQXBwUGFnZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXBhZ2UvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuLy8gV2UgaW5qZWN0IHRoZSB0cmVlIGFuZCBwYWdlcyBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgdHJlZSA9IHtcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgJycsXG4gICAgICAgIHtcbiAgICAgICAgY2hpbGRyZW46IFsnX19QQUdFX18nLCB7fSwge1xuICAgICAgICAgIHBhZ2U6IFsoKSA9PiBpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXEludm9pdmVNYW5hZ21lbnRcXFxcc3JjXFxcXGFwcFxcXFxwYWdlLnRzeFwiKSwgXCJDOlxcXFxJbnZvaXZlTWFuYWdtZW50XFxcXHNyY1xcXFxhcHBcXFxccGFnZS50c3hcIl0sXG4gICAgICAgICAgXG4gICAgICAgIH1dXG4gICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICdsYXlvdXQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxJbnZvaXZlTWFuYWdtZW50XFxcXHNyY1xcXFxhcHBcXFxcbGF5b3V0LnRzeFwiKSwgXCJDOlxcXFxJbnZvaXZlTWFuYWdtZW50XFxcXHNyY1xcXFxhcHBcXFxcbGF5b3V0LnRzeFwiXSxcbidub3QtZm91bmQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiQzpcXFxcSW52b2l2ZU1hbmFnbWVudFxcXFxzcmNcXFxcYXBwXFxcXHBhZ2UudHN4XCJdO1xuZXhwb3J0IHsgdHJlZSwgcGFnZXMgfTtcbmV4cG9ydCB7IGRlZmF1bHQgYXMgR2xvYmFsRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5XCI7XG5jb25zdCBfX25leHRfYXBwX3JlcXVpcmVfXyA9IF9fd2VicGFja19yZXF1aXJlX19cbmNvbnN0IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKClcbmV4cG9ydCBjb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvcGFnZVwiO1xuZXhwb3J0IGNvbnN0IF9fbmV4dF9hcHBfXyA9IHtcbiAgICByZXF1aXJlOiBfX25leHRfYXBwX3JlcXVpcmVfXyxcbiAgICBsb2FkQ2h1bms6IF9fbmV4dF9hcHBfbG9hZF9jaHVua19fXG59O1xuZXhwb3J0ICogZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYXBwLXJlbmRlci9lbnRyeS1iYXNlXCI7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBQYWdlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9QQUdFLFxuICAgICAgICBwYWdlOiBcIi9wYWdlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIixcbiAgICAgICAgYXBwUGF0aHM6IFtdXG4gICAgfSxcbiAgICB1c2VybGFuZDoge1xuICAgICAgICBsb2FkZXJUcmVlOiB0cmVlXG4gICAgfVxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1wYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CInvoiveManagment%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CInvoiveManagment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Capp-router.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cerror-boundary.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Clayout-router.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cnot-found-boundary.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Crender-from-template-context.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cstatic-generation-searchparams-bailout-provider.js&server=true!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Capp-router.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cerror-boundary.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Clayout-router.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cnot-found-boundary.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Crender-from-template-context.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cstatic-generation-searchparams-bailout-provider.js&server=true! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/app-router.js */ \"(ssr)/./node_modules/next/dist/client/components/app-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/not-found-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js */ \"(ssr)/./node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js\", 23))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9QyUzQSU1Q0ludm9pdmVNYW5hZ21lbnQlNUNub2RlX21vZHVsZXMlNUNuZXh0JTVDZGlzdCU1Q2NsaWVudCU1Q2NvbXBvbmVudHMlNUNhcHAtcm91dGVyLmpzJm1vZHVsZXM9QyUzQSU1Q0ludm9pdmVNYW5hZ21lbnQlNUNub2RlX21vZHVsZXMlNUNuZXh0JTVDZGlzdCU1Q2NsaWVudCU1Q2NvbXBvbmVudHMlNUNlcnJvci1ib3VuZGFyeS5qcyZtb2R1bGVzPUMlM0ElNUNJbnZvaXZlTWFuYWdtZW50JTVDbm9kZV9tb2R1bGVzJTVDbmV4dCU1Q2Rpc3QlNUNjbGllbnQlNUNjb21wb25lbnRzJTVDbGF5b3V0LXJvdXRlci5qcyZtb2R1bGVzPUMlM0ElNUNJbnZvaXZlTWFuYWdtZW50JTVDbm9kZV9tb2R1bGVzJTVDbmV4dCU1Q2Rpc3QlNUNjbGllbnQlNUNjb21wb25lbnRzJTVDbm90LWZvdW5kLWJvdW5kYXJ5LmpzJm1vZHVsZXM9QyUzQSU1Q0ludm9pdmVNYW5hZ21lbnQlNUNub2RlX21vZHVsZXMlNUNuZXh0JTVDZGlzdCU1Q2NsaWVudCU1Q2NvbXBvbmVudHMlNUNyZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzJm1vZHVsZXM9QyUzQSU1Q0ludm9pdmVNYW5hZ21lbnQlNUNub2RlX21vZHVsZXMlNUNuZXh0JTVDZGlzdCU1Q2NsaWVudCU1Q2NvbXBvbmVudHMlNUNzdGF0aWMtZ2VuZXJhdGlvbi1zZWFyY2hwYXJhbXMtYmFpbG91dC1wcm92aWRlci5qcyZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsa09BQXNIO0FBQ3RILDBPQUEwSDtBQUMxSCx3T0FBeUg7QUFDekgsa1BBQThIO0FBQzlILHNRQUF3STtBQUN4SSIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2UtYXBwLz81NGU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcSW52b2l2ZU1hbmFnbWVudFxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGFwcC1yb3V0ZXIuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXEludm9pdmVNYW5hZ21lbnRcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxlcnJvci1ib3VuZGFyeS5qc1wiKTtcbmltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiQzpcXFxcSW52b2l2ZU1hbmFnbWVudFxcXFxub2RlX21vZHVsZXNcXFxcbmV4dFxcXFxkaXN0XFxcXGNsaWVudFxcXFxjb21wb25lbnRzXFxcXGxheW91dC1yb3V0ZXIuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXEludm9pdmVNYW5hZ21lbnRcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxub3QtZm91bmQtYm91bmRhcnkuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXEludm9pdmVNYW5hZ21lbnRcXFxcbm9kZV9tb2R1bGVzXFxcXG5leHRcXFxcZGlzdFxcXFxjbGllbnRcXFxcY29tcG9uZW50c1xcXFxyZW5kZXItZnJvbS10ZW1wbGF0ZS1jb250ZXh0LmpzXCIpO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJDOlxcXFxJbnZvaXZlTWFuYWdtZW50XFxcXG5vZGVfbW9kdWxlc1xcXFxuZXh0XFxcXGRpc3RcXFxcY2xpZW50XFxcXGNvbXBvbmVudHNcXFxcc3RhdGljLWdlbmVyYXRpb24tc2VhcmNocGFyYW1zLWJhaWxvdXQtcHJvdmlkZXIuanNcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Capp-router.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cerror-boundary.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Clayout-router.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cnot-found-boundary.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Crender-from-template-context.js&modules=C%3A%5CInvoiveManagment%5Cnode_modules%5Cnext%5Cdist%5Cclient%5Ccomponents%5Cstatic-generation-searchparams-bailout-provider.js&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cglobals.css&modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cproviders.tsx&server=true!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cglobals.css&modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cproviders.tsx&server=true! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/providers.tsx */ \"(ssr)/./src/app/providers.tsx\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9QyUzQSU1Q0ludm9pdmVNYW5hZ21lbnQlNUNzcmMlNUNhcHAlNUNnbG9iYWxzLmNzcyZtb2R1bGVzPUMlM0ElNUNJbnZvaXZlTWFuYWdtZW50JTVDc3JjJTVDYXBwJTVDcHJvdmlkZXJzLnRzeCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8/ODMxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXEludm9pdmVNYW5hZ21lbnRcXFxcc3JjXFxcXGFwcFxcXFxwcm92aWRlcnMudHN4XCIpIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cglobals.css&modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cproviders.tsx&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cpage.tsx&server=true!":
/*!*************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cpage.tsx&server=true! ***!
  \*************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./src/app/page.tsx */ \"(ssr)/./src/app/page.tsx\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9QyUzQSU1Q0ludm9pdmVNYW5hZ21lbnQlNUNzcmMlNUNhcHAlNUNwYWdlLnRzeCZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8/ZDUxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIkM6XFxcXEludm9pdmVNYW5hZ21lbnRcXFxcc3JjXFxcXGFwcFxcXFxwYWdlLnRzeFwiKSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=C%3A%5CInvoiveManagment%5Csrc%5Capp%5Cpage.tsx&server=true!\n");

/***/ }),

/***/ "(ssr)/./src/app/components/AIChat/index.tsx":
/*!*********************************************!*\
  !*** ./src/app/components/AIChat/index.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AIChat)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var ai_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ai/react */ \"(ssr)/./node_modules/ai/react/dist/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\n\nfunction AIChat({ onSelectInvoice, onToggleInvoicePanel, isInvoicePanelOpen }) {\n    const [toolState, setToolState] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        isExecuting: false,\n        currentTool: null,\n        lastResult: null\n    });\n    const [showError, setShowError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [apiError, setApiError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isRetrying, setIsRetrying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [useGroq, setUseGroq] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true); // Default to using Groq\n    const [apiEndpoint, setApiEndpoint] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"/api/chat/groq\"); // Default to Groq endpoint\n    const [attemptedProviders, setAttemptedProviders] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [autoLoadInvoice, setAutoLoadInvoice] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Update the endpoint when switching between Groq and OpenAI\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        setApiEndpoint(useGroq ? \"/api/chat/groq\" : \"/api/chat\");\n    }, [\n        useGroq\n    ]);\n    const resetChat = ()=>{\n        window.location.reload(); // Force a full reset of the chat\n    };\n    const { messages, input, handleInputChange, handleSubmit, isLoading, error, reload } = (0,ai_react__WEBPACK_IMPORTED_MODULE_2__.useChat)({\n        api: apiEndpoint,\n        onResponse: (response)=>{\n            // Check if the response is OK\n            if (!response.ok) {\n                // Track which provider we attempted\n                setAttemptedProviders((prev)=>{\n                    const newSet = new Set(prev);\n                    newSet.add(apiEndpoint);\n                    return newSet;\n                });\n                // Parse the detailed error from the response if possible\n                response.json().then((errorData)=>{\n                    console.error(\"API error details:\", errorData);\n                    // If the error suggests using Groq instead\n                    if (errorData.useGroq && !useGroq) {\n                        console.log(\"API recommends switching to Groq, switching...\");\n                        setUseGroq(true);\n                        setApiError(\"Switching to Groq API. Please retry your message.\");\n                        return;\n                    }\n                    setApiError(`Error ${response.status}: ${errorData.error || \"Connection to AI failed\"}`);\n                }, // If can't parse JSON, use the status text\n                ()=>setApiError(`Error ${response.status}: ${response.statusText || \"Connection to AI failed\"}`));\n                return;\n            }\n            // Reset error state and tool state when a new successful response starts\n            setApiError(null);\n            setToolState({\n                isExecuting: false,\n                currentTool: null,\n                lastResult: null\n            });\n            // Clear the attempted providers list on successful response\n            setAttemptedProviders(new Set());\n        },\n        onFinish: (message)=>{\n            // Handle when the message is complete\n            setApiError(null);\n        },\n        onError: (error)=>{\n            console.error(\"Chat error:\", error);\n            // Track which provider we attempted\n            setAttemptedProviders((prev)=>{\n                const newSet = new Set(prev);\n                newSet.add(apiEndpoint);\n                return newSet;\n            });\n            const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n            setApiError(`Failed to communicate with AI: ${errorMessage}. Try switching providers or refreshing.`);\n        }\n    });\n    // Function to toggle between Groq and OpenAI\n    const toggleProvider = ()=>{\n        setUseGroq((prev)=>!prev);\n        // Clear any existing errors when switching providers\n        setApiError(null);\n    };\n    // Automatically try another provider if one fails and we haven't tried it yet\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (apiError && !isRetrying) {\n            // Only try OpenAI as fallback if Groq fails\n            if (useGroq && !attemptedProviders.has(\"/api/chat\")) {\n                console.log(\"Groq failed, trying OpenAI as fallback\");\n                setUseGroq(false);\n            }\n        }\n    }, [\n        apiError,\n        isRetrying,\n        useGroq,\n        attemptedProviders\n    ]);\n    // Auto-select invoice when mentioned in chat\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (messages.length > 0) {\n            const lastMessage = messages[messages.length - 1];\n            if (lastMessage.role === \"user\") {\n                // Look for invoice number mentions in various formats with more thorough patterns\n                const invoicePatterns = [\n                    // Common invoice number patterns\n                    /invoice\\s+#?(\\d+)/gi,\n                    /inv[.\\-_]?(\\d+)/gi,\n                    /invoice\\s+number\\s+#?(\\d+)/gi,\n                    // More specific with word boundaries\n                    /\\b(invoice|inv)[.\\-_ #]*(\\d+)\\b/gi,\n                    // Invoice with ID prefix\n                    /invoice\\s+id[\\s:#]*(\\d+)/gi,\n                    // Asking about an invoice\n                    /(?:show|get|find|details\\s+(?:for|about)|tell\\s+me\\s+about)\\s+(?:invoice|inv)[.\\-_ #]*(\\d+)/gi\n                ];\n                // Check each pattern and collect matches\n                let invoiceId = null;\n                for (const pattern of invoicePatterns){\n                    const matches = Array.from(lastMessage.content.matchAll(pattern) || []);\n                    if (matches.length > 0) {\n                        // Get the numeric portion, checking the right capture group\n                        const match = matches[0];\n                        // If the pattern has multiple capture groups, use the last non-empty one\n                        for(let i = 1; i < match.length; i++){\n                            if (match[i] && /^\\d+$/.test(match[i])) {\n                                invoiceId = match[i];\n                                break;\n                            }\n                        }\n                        if (invoiceId) break;\n                    }\n                }\n                // If we found an invoice ID and have an onSelectInvoice handler, call it\n                if (invoiceId && onSelectInvoice) {\n                    console.log(`Detected invoice reference: ${invoiceId}`);\n                    // Fetch invoice details for display in chat\n                    fetchInvoiceDetails(invoiceId);\n                    // Also select the invoice in the panel\n                    onSelectInvoice(invoiceId);\n                    // Also set autoLoadInvoice flag to true to indicate we've handled this message\n                    setAutoLoadInvoice(true);\n                }\n            }\n        }\n    }, [\n        messages,\n        onSelectInvoice\n    ]);\n    // Function to fetch and display invoice details directly in chat\n    const fetchInvoiceDetails = async (invoiceId)=>{\n        try {\n            // Relax the condition to allow displaying invoice info in more situations\n            if (!messages.length) {\n                return;\n            }\n            // Get the last user message\n            const lastUserMessage = messages.filter((m)=>m.role === \"user\").pop();\n            // Check if the user was explicitly asking for invoice details\n            const isExplicitInvoiceRequest = lastUserMessage && (lastUserMessage.content.toLowerCase().includes(`invoice ${invoiceId}`) || lastUserMessage.content.toLowerCase().includes(`invoice #${invoiceId}`) || lastUserMessage.content.toLowerCase().includes(`invoice number ${invoiceId}`) || lastUserMessage.content.toLowerCase().includes(`show me invoice ${invoiceId}`) || lastUserMessage.content.toLowerCase().includes(`invoice details for ${invoiceId}`));\n            // Only display our panel for explicit requests\n            if (!isExplicitInvoiceRequest) {\n                console.log(`Not showing panel for invoice #${invoiceId} - not an explicit request`);\n                return;\n            }\n            // Check for existing invoice data in AI responses\n            const existingInvoiceInfoInChat = messages.some((m)=>m.role === \"assistant\" && m.content.includes(`Invoice #${invoiceId}`) && (m.content.includes(\"Customer:\") || m.content.includes(\"Customer\")));\n            // If we already have invoice info from the AI, don't add our own panel\n            if (existingInvoiceInfoInChat) {\n                console.log(`Invoice #${invoiceId} information already exists in chat, not adding panel`);\n                return;\n            }\n            console.log(`Fetching details for invoice ${invoiceId} to display in chat`);\n            // IMPORTANT: Use the chat API instead of the invoice API to get consistent data\n            const response = await fetch(`/api/chat/tool`, {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    tool: \"summarizeInvoice\",\n                    params: {\n                        id: invoiceId\n                    }\n                })\n            });\n            if (!response.ok) {\n                console.error(`Error fetching invoice ${invoiceId}:`, response.statusText);\n                return;\n            }\n            const result = await response.json();\n            console.log(\"Invoice data from chat API:\", result); // Log the invoice data to debug\n            // Check for errors or authentication issues\n            if (result.error) {\n                console.error(`Error with invoice ${invoiceId}:`, result.error);\n                // Check if this is an authentication error\n                if (result.error.includes(\"authentication\") || result.error.includes(\"connect your account\") || result.error.includes(\"Authentication required\")) {\n                    // Display authentication message in chat instead of invoice details\n                    const authMessageHtml = `\n            <div class=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200 my-3 shadow-sm\">\n              <div class=\"flex items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6 text-yellow-600 mr-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                </svg>\n                <h3 class=\"text-lg font-medium text-yellow-800\">QuickBooks Connection Required</h3>\n              </div>\n              <p class=\"mt-2 text-yellow-700\">\n                Please connect your QuickBooks account to view invoice details.\n              </p>\n              <div class=\"mt-3\">\n                <a href=\"/settings\" class=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\">\n                  Connect QuickBooks\n                </a>\n              </div>\n            </div>\n          `;\n                    const authDiv = document.createElement(\"div\");\n                    authDiv.className = \"mb-4\";\n                    authDiv.innerHTML = authMessageHtml;\n                    const chatContainer = document.getElementById(\"chat-messages-container\");\n                    if (chatContainer) {\n                        chatContainer.appendChild(authDiv);\n                        setTimeout(()=>{\n                            authDiv.scrollIntoView({\n                                behavior: \"smooth\",\n                                block: \"nearest\"\n                            });\n                        }, 300);\n                    }\n                    return;\n                }\n                return;\n            }\n            // Use the result directly if it has the invoice data\n            const invoice = result.invoice || result.data || result;\n            // If we have invoice data, create a standardized display\n            if (invoice && (invoice.Id || invoice.DocNumber || invoice.id || invoice.invoiceNumber)) {\n                // Map invoice properties - QuickBooks can return different formats\n                const standardInvoice = {\n                    id: invoice.Id || invoice.id || \"\",\n                    number: invoice.DocNumber || invoice.invoiceNumber || invoiceId,\n                    customerName: invoice.CustomerRef?.name || invoice.customerName || (typeof invoice.CustomerRef === \"string\" ? invoice.CustomerRef : \"Unknown Customer\"),\n                    amount: invoice.TotalAmt || invoice.amount || 0,\n                    balance: invoice.Balance !== undefined ? invoice.Balance : invoice.balance !== undefined ? invoice.balance : 0,\n                    date: invoice.TxnDate || invoice.date || \"\",\n                    dueDate: invoice.DueDate || invoice.dueDate || \"\",\n                    memo: invoice.PrivateNote || invoice.CustomerMemo?.value || invoice.memo || \"\"\n                };\n                // Format currency - ensure consistency with InvoicePanel and ToolsPanel formatting\n                const formatCurrency = (amount)=>{\n                    if (amount === undefined || amount === null) return \"$0.00\";\n                    const numericAmount = typeof amount === \"string\" ? parseFloat(amount) : amount;\n                    return numericAmount ? `$${numericAmount.toFixed(2)}` : \"$0.00\";\n                };\n                // Format date in a more readable format (MM/DD/YYYY) - consistent with other components\n                const formatDate = (dateStr)=>{\n                    if (!dateStr) return \"Unknown\";\n                    try {\n                        const date = new Date(dateStr);\n                        return date.toLocaleDateString(\"en-US\", {\n                            year: \"numeric\",\n                            month: \"numeric\",\n                            day: \"numeric\"\n                        });\n                    } catch (e) {\n                        return dateStr; // If invalid date, return the original string\n                    }\n                };\n                // Get billing address if available\n                const billingAddress = invoice.BillAddr || invoice.billAddr || {};\n                const addressLine1 = billingAddress.Line1 || billingAddress.line1 || \"\";\n                const addressLine2 = billingAddress.Line2 || billingAddress.line2 || \"\";\n                const city = billingAddress.City || billingAddress.city || \"\";\n                const state = billingAddress.CountrySubDivisionCode || billingAddress.state || \"\";\n                const zip = billingAddress.PostalCode || billingAddress.zip || \"\";\n                // Construct formatted address\n                const formattedAddress = [\n                    addressLine1,\n                    addressLine2,\n                    `${city}${city && state ? \", \" : \"\"}${state} ${zip}`\n                ].filter((line)=>line.trim()).join(\"<br>\");\n                // Determine if invoice is paid or not\n                const isPaid = standardInvoice.balance === 0 || standardInvoice.balance === \"0\";\n                // Create a nicely formatted invoice details panel with more details\n                const invoiceDetailsHtml = `\n          <div class=\"bg-blue-50 p-4 rounded-lg border border-blue-200 my-3 shadow-sm\">\n            <div class=\"flex items-center justify-between\">\n              <h3 class=\"text-lg font-medium text-blue-800\">Invoice #${standardInvoice.number}</h3>\n              <span class=\"px-2 py-1 bg-${isPaid ? \"green\" : \"orange\"}-100 text-${isPaid ? \"green\" : \"orange\"}-800 text-sm rounded-full\">\n                ${isPaid ? \"Paid\" : \"Unpaid\"}\n              </span>\n            </div>\n            \n            <div class=\"grid md:grid-cols-2 gap-4 mt-3\">\n              <div>\n                <h4 class=\"font-medium text-gray-700\">Customer</h4>\n                <p class=\"text-gray-800\">${standardInvoice.customerName}</p>\n                ${formattedAddress ? `<p class=\"text-sm text-gray-600 mt-1\">${formattedAddress}</p>` : \"\"}\n              </div>\n              \n              <div>\n                <div class=\"grid grid-cols-2 gap-2\">\n                  <div>\n                    <h4 class=\"font-medium text-gray-700\">Amount</h4>\n                    <p class=\"text-gray-800\">${formatCurrency(standardInvoice.amount)}</p>\n                  </div>\n                  \n                  ${!isPaid ? `\n                  <div>\n                    <h4 class=\"font-medium text-gray-700\">Balance Due</h4>\n                    <p class=\"text-gray-800 font-medium text-orange-600\">${formatCurrency(standardInvoice.balance)}</p>\n                  </div>\n                  ` : \"\"}\n                  \n                  <div>\n                    <h4 class=\"font-medium text-gray-700\">Date</h4>\n                    <p class=\"text-gray-800\">${formatDate(standardInvoice.date)}</p>\n                  </div>\n                  \n                  <div>\n                    <h4 class=\"font-medium text-gray-700\">Due Date</h4>\n                    <p class=\"text-gray-800\">${formatDate(standardInvoice.dueDate)}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            ${standardInvoice.memo ? `\n            <div class=\"mt-3 pt-3 border-t border-blue-200\">\n              <h4 class=\"font-medium text-gray-700\">Memo</h4>\n              <p class=\"text-gray-800 text-sm mt-1 bg-white p-2 rounded\">${standardInvoice.memo}</p>\n            </div>\n            ` : \"\"}\n          </div>\n        `;\n                // Add the HTML to a display div\n                const detailsDiv = document.createElement(\"div\");\n                detailsDiv.className = \"mb-4\";\n                detailsDiv.innerHTML = invoiceDetailsHtml;\n                // Insert the details div at the appropriate position in the chat - after the user's message\n                const chatContainer = document.getElementById(\"chat-messages-container\");\n                if (chatContainer) {\n                    // Clear any previous invoice displays to avoid duplicates\n                    const existingDisplays = document.querySelectorAll(\".invoice-details-display\");\n                    existingDisplays.forEach((el)=>el.remove());\n                    // Mark this div for potential future removal\n                    detailsDiv.classList.add(\"invoice-details-display\");\n                    // Add to the chat container\n                    chatContainer.appendChild(detailsDiv);\n                    // Scroll to make the details visible\n                    setTimeout(()=>{\n                        detailsDiv.scrollIntoView({\n                            behavior: \"smooth\",\n                            block: \"nearest\"\n                        });\n                    }, 300);\n                }\n            } else {\n                console.error(\"Invoice data is incomplete or invalid:\", invoice);\n            }\n        } catch (error) {\n            console.error(\"Error fetching invoice details:\", error);\n        }\n    };\n    // Auto-load the invoice panel if an invoice is mentioned\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (autoLoadInvoice && !isInvoicePanelOpen && onToggleInvoicePanel) {\n            console.log(\"Auto-opening invoice panel due to invoice mention\");\n            onToggleInvoicePanel(true);\n            setAutoLoadInvoice(false);\n        }\n    }, [\n        autoLoadInvoice,\n        isInvoicePanelOpen,\n        onToggleInvoicePanel\n    ]);\n    const handleFormSubmit = (e)=>{\n        e.preventDefault();\n        if (!input.trim()) {\n            setShowError(true);\n            return;\n        }\n        // Reset error states\n        setShowError(false);\n        setApiError(null);\n        // Look for invoice references before submission\n        const invoicePatterns = [\n            /\\b(invoice|inv)[.\\-_ #]*(\\d+)\\b/gi,\n            /invoice\\s+id[\\s:#]*(\\d+)/gi\n        ];\n        let hasInvoiceReference = false;\n        for (const pattern of invoicePatterns){\n            if (pattern.test(input)) {\n                hasInvoiceReference = true;\n                break;\n            }\n        }\n        // If there's an invoice reference, add a hint to the AI about using tools\n        if (hasInvoiceReference && onSelectInvoice) {\n            console.log(\"Detected invoice reference in query, adding tool hint\");\n        // This is just a client-side log, won't modify the actual prompt\n        }\n        // Submit the form\n        handleSubmit(e);\n    };\n    const handleRetry = ()=>{\n        setIsRetrying(true);\n        setApiError(null);\n        // Attempt to reload the conversation\n        reload();\n        // Reset retry state after a delay\n        setTimeout(()=>{\n            setIsRetrying(false);\n        }, 1000);\n    };\n    // Function to render tool invocations if present\n    const renderToolInvocations = (message)=>{\n        if (!message.toolInvocations || message.toolInvocations.length === 0) {\n            return null;\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mt-2 border-t pt-2 text-xs text-gray-500\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"font-medium mb-1\",\n                    children: \"Tool Calls:\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                    lineNumber: 502,\n                    columnNumber: 9\n                }, this),\n                message.toolInvocations.map((tool, idx)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mb-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-medium text-blue-600\",\n                                children: [\n                                    tool.name,\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-gray-500 font-normal\",\n                                        children: \" with args:\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 507,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 505,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                                className: \"bg-gray-100 p-1 rounded text-xs overflow-auto\",\n                                children: JSON.stringify(tool.arguments, null, 2)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 509,\n                                columnNumber: 13\n                            }, this),\n                            tool.result && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"font-medium text-green-600 mt-1\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"text-gray-500 font-normal\",\n                                            children: \"Result:\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                            lineNumber: 516,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 515,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                                        className: \"bg-gray-100 p-1 rounded text-xs overflow-auto\",\n                                        children: typeof tool.result === \"string\" ? tool.result : JSON.stringify(tool.result, null, 2)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 518,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true)\n                        ]\n                    }, idx, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 504,\n                        columnNumber: 11\n                    }, this))\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n            lineNumber: 501,\n            columnNumber: 7\n        }, this);\n    };\n    // Add a function to format invoice messages in chat that handles both formats\n    const formatInvoiceMessage = (content)=>{\n        // Skip if already formatted with HTML\n        if (content.includes('<div class=\"bg-blue-50') || content.includes('<h3 class=\"text-lg font-medium text-blue-800\">')) {\n            return content;\n        }\n        // Check if this is an invoice details message - more comprehensive check\n        const isInvoiceDetails = content.includes(\"Invoice #\") && // Check for either format of customer info\n        (content.includes(\"Customer:\") || content.includes(\"\\nCustomer\\n\")) && // Check for either format of amount\n        (content.includes(\"Amount:\") || content.includes(\"\\nAmount\\n\"));\n        if (!isInvoiceDetails) {\n            return content; // Return unchanged if not an invoice details message\n        }\n        // Split into lines and format each line\n        const lines = content.split(\"\\n\");\n        // Extract invoice details - handle both formats\n        let invoiceNumber = \"\";\n        let customer = \"\";\n        let amount = \"\";\n        let date = \"\";\n        let dueDate = \"\";\n        let status = \"\";\n        let balance = \"\";\n        // First pass - look for standard format (Field: value)\n        for(let i = 0; i < lines.length; i++){\n            const line = lines[i].trim();\n            // Extract invoice number from the first line that mentions \"Invoice #\"\n            if (line.includes(\"Invoice #\")) {\n                invoiceNumber = line.replace(\"Invoice #\", \"\").trim();\n            }\n            // Match lines with field labels followed by colon\n            if (line.startsWith(\"Customer:\")) {\n                customer = line.replace(\"Customer:\", \"\").trim();\n            } else if (line.startsWith(\"Amount:\")) {\n                amount = line.replace(\"Amount:\", \"\").trim();\n            } else if (line.startsWith(\"Date:\")) {\n                date = line.replace(\"Date:\", \"\").trim();\n            } else if (line.startsWith(\"Due Date:\")) {\n                dueDate = line.replace(\"Due Date:\", \"\").trim();\n            } else if (line.startsWith(\"Status:\")) {\n                status = line.replace(\"Status:\", \"\").trim();\n            } else if (line.startsWith(\"Balance Due:\")) {\n                balance = line.replace(\"Balance Due:\", \"\").trim();\n            }\n        }\n        // Second pass - look for alternate format (Field\\nvalue)\n        if (!customer || !amount) {\n            for(let i = 0; i < lines.length; i++){\n                const line = lines[i].trim();\n                // Look for field names on their own line and grab the next line\n                if (line === \"Customer\" && i + 1 < lines.length) {\n                    customer = lines[i + 1].trim();\n                } else if (line === \"Amount\" && i + 1 < lines.length) {\n                    amount = lines[i + 1].trim();\n                } else if (line === \"Date\" && i + 1 < lines.length) {\n                    date = lines[i + 1].trim();\n                } else if (line === \"Due Date\" && i + 1 < lines.length) {\n                    dueDate = lines[i + 1].trim();\n                } else if (line === \"Balance Due\" && i + 1 < lines.length) {\n                    balance = lines[i + 1].trim();\n                }\n            }\n        }\n        // If not explicitly set, determine if paid based on content\n        if (!status) {\n            if (content.includes(\"Paid\") && !content.includes(\"Unpaid\")) {\n                status = \"Paid\";\n            } else if (content.includes(\"Unpaid\")) {\n                status = \"Unpaid\";\n            }\n        }\n        // If we have enough info, format nicely\n        if (invoiceNumber && (customer || amount)) {\n            // Determine paid status - fallback to balance check if status not explicit\n            const isPaid = status === \"Paid\" || balance && balance.includes(\"$0.00\") || balance === \"\" && content.includes(\"Paid\") && !content.includes(\"Unpaid\");\n            // Format the invoice details nicely\n            const formattedContent = `\n        <div class=\"bg-blue-50 p-4 rounded-lg border border-blue-200 my-3 shadow-sm\">\n          <div class=\"flex items-center justify-between\">\n            <h3 class=\"text-lg font-medium text-blue-800\">Invoice #${invoiceNumber}</h3>\n            <span class=\"px-2 py-1 bg-${isPaid ? \"green\" : \"orange\"}-100 text-${isPaid ? \"green\" : \"orange\"}-800 text-sm rounded-full\">\n              ${status || (isPaid ? \"Paid\" : \"Unpaid\")}\n            </span>\n          </div>\n          \n          <div class=\"grid md:grid-cols-2 gap-4 mt-3\">\n            <div>\n              <h4 class=\"font-medium text-gray-700\">Customer</h4>\n              <p class=\"text-gray-800\">${customer || \"Unknown\"}</p>\n            </div>\n            \n            <div>\n              <div class=\"grid grid-cols-2 gap-2\">\n                <div>\n                  <h4 class=\"font-medium text-gray-700\">Amount</h4>\n                  <p class=\"text-gray-800\">${amount || \"Not specified\"}</p>\n                </div>\n                \n                ${!isPaid && balance ? `\n                <div>\n                  <h4 class=\"font-medium text-gray-700\">Balance Due</h4>\n                  <p class=\"text-gray-800 font-medium text-orange-600\">${balance}</p>\n                </div>\n                ` : \"\"}\n                \n                <div>\n                  <h4 class=\"font-medium text-gray-700\">Date</h4>\n                  <p class=\"text-gray-800\">${date || \"Not specified\"}</p>\n                </div>\n                \n                <div>\n                  <h4 class=\"font-medium text-gray-700\">Due Date</h4>\n                  <p class=\"text-gray-800\">${dueDate || \"Not specified\"}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      `;\n            return formattedContent;\n        }\n        return content; // If we can't extract enough data, return the original content\n    };\n    // Function to render message content with invoice formatting\n    const renderMessageContent = (message)=>{\n        if (message.role === \"assistant\") {\n            const formattedContent = formatInvoiceMessage(message.content);\n            // If we detected an invoice in the message, check if we should prevent auto-loading\n            const hasInvoiceFormatted = formattedContent !== message.content && formattedContent.includes(\"Invoice #\") && onSelectInvoice;\n            // Just return the formatted content - don't call hooks conditionally      \n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                dangerouslySetInnerHTML: {\n                    __html: formattedContent\n                },\n                className: hasInvoiceFormatted ? \"formatted-invoice\" : \"\",\n                \"data-has-invoice\": hasInvoiceFormatted ? \"true\" : \"false\"\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                lineNumber: 685,\n                columnNumber: 14\n            }, this);\n        }\n        return message.content;\n    };\n    // Check for formatted invoices in assistant messages and prevent auto-loading\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Get last assistant message\n        const lastAssistantMessage = messages.filter((m)=>m.role === \"assistant\").pop();\n        if (lastAssistantMessage) {\n            // Check if this message contains a formatted invoice\n            const content = lastAssistantMessage.content;\n            const isFormatted = content.includes('<div class=\"bg-blue-50') || content.includes('<h3 class=\"text-lg font-medium text-blue-800\">');\n            const hasInvoice = content.includes(\"Invoice #\") && (content.includes(\"Customer:\") || content.includes(\"Customer\\n\")) && (content.includes(\"Amount:\") || content.includes(\"Amount\\n\"));\n            if (isFormatted && hasInvoice && onSelectInvoice) {\n                // If we already have a formatted invoice, don't auto-fetch\n                setAutoLoadInvoice(false);\n            }\n        }\n    }, [\n        messages,\n        onSelectInvoice\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full flex flex-col bg-white rounded-lg border border-gray-200 shadow-md overflow-hidden\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4 border-b border-gray-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-xl font-bold text-white\",\n                        children: \"AI Invoice Assistant\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 721,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-blue-100 text-sm\",\n                        children: \"Ask questions about your invoices and financial data\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 722,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                lineNumber: 720,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto p-6 space-y-6 border-l border-r border-gray-200 bg-gray-50\",\n                id: \"chat-messages-container\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-between mb-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full\",\n                                children: [\n                                    \"Using \",\n                                    useGroq ? \"Groq AI\" : \"OpenAI\",\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        className: \"ml-2 text-blue-600 hover:text-blue-800 focus:outline-none\",\n                                        onClick: toggleProvider,\n                                        title: \"Switch AI provider\",\n                                        children: \"\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 730,\n                                        columnNumber: 13\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 728,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: resetChat,\n                                className: \"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded-full hover:bg-gray-200\",\n                                title: \"Reset chat\",\n                                children: \"Reset Chat\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 738,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 727,\n                        columnNumber: 9\n                    }, this),\n                    apiError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4\",\n                        role: \"alert\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"py-1\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        className: \"fill-current h-6 w-6 text-red-500 mr-4\",\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        viewBox: \"0 0 20 20\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            d: \"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                            lineNumber: 753,\n                                            columnNumber: 19\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 752,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                    lineNumber: 751,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"font-bold\",\n                                            children: \"Connection Error\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                            lineNumber: 757,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                            className: \"text-sm\",\n                                            children: apiError\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                            lineNumber: 758,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: handleRetry,\n                                            className: \"mt-2 bg-red-100 hover:bg-red-200 text-red-800 font-bold py-1 px-2 rounded text-xs inline-flex items-center\",\n                                            children: \"Try again\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                            lineNumber: 759,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                    lineNumber: 756,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                            lineNumber: 750,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 749,\n                        columnNumber: 11\n                    }, this),\n                    messages.map((message, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `flex ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`,\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: `rounded-lg px-6 py-4 max-w-[80%] shadow-sm ${message.role === \"user\" ? \"bg-blue-500 text-white\" : \"bg-white border border-gray-200\"}`,\n                                children: [\n                                    renderMessageContent(message),\n                                    message.role === \"assistant\" && toolState.isExecuting && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-2 text-sm text-gray-500\",\n                                        children: [\n                                            \"Executing \",\n                                            toolState.currentTool,\n                                            \"...\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 786,\n                                        columnNumber: 17\n                                    }, this),\n                                    message.role === \"assistant\" && renderToolInvocations(message)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 777,\n                                columnNumber: 13\n                            }, this)\n                        }, index, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                            lineNumber: 771,\n                            columnNumber: 11\n                        }, this)),\n                    isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-start\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"rounded-lg px-6 py-4 bg-white border border-gray-200 shadow-sm\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex space-x-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-2 h-2 rounded-full bg-blue-400 animate-bounce\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 799,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-2 h-2 rounded-full bg-blue-400 animate-bounce delay-150\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 800,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"w-2 h-2 rounded-full bg-blue-400 animate-bounce delay-300\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 801,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 798,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                            lineNumber: 797,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 796,\n                        columnNumber: 11\n                    }, this),\n                    messages.length === 0 && !isLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"text-center text-gray-500 p-6 bg-blue-50 rounded-lg border border-blue-100 shadow-sm\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                xmlns: \"http://www.w3.org/2000/svg\",\n                                className: \"h-12 w-12 mx-auto text-blue-400 mb-4\",\n                                fill: \"none\",\n                                viewBox: \"0 0 24 24\",\n                                stroke: \"currentColor\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                    strokeLinecap: \"round\",\n                                    strokeLinejoin: \"round\",\n                                    strokeWidth: 1.5,\n                                    d: \"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                    lineNumber: 817,\n                                    columnNumber: 15\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 810,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"text-lg font-medium text-blue-800 mb-2\",\n                                children: \"How can I help you today?\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 824,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mb-4\",\n                                children: \"Ask me anything about your invoices or financial data.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 825,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"grid grid-cols-1 sm:grid-cols-2 gap-2 max-w-lg mx-auto text-left\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-3 rounded-md border border-blue-100 text-blue-800 text-sm\",\n                                        children: '\"Show me invoice #1001\"'\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 827,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-3 rounded-md border border-blue-100 text-blue-800 text-sm\",\n                                        children: '\"Summarize unpaid invoices\"'\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 830,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-3 rounded-md border border-blue-100 text-blue-800 text-sm\",\n                                        children: '\"Which customer owes the most?\"'\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 833,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"bg-white p-3 rounded-md border border-blue-100 text-blue-800 text-sm\",\n                                        children: '\"What was my revenue last month?\"'\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                        lineNumber: 836,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                lineNumber: 826,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                        lineNumber: 809,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                lineNumber: 725,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n                onSubmit: handleFormSubmit,\n                className: \"p-6 border-t border-gray-200 bg-white\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col space-y-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex space-x-4\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    id: \"chat-input\",\n                                    value: input,\n                                    onChange: handleInputChange,\n                                    placeholder: \"Ask about your invoices...\",\n                                    className: `flex-1 px-6 py-4 border rounded-lg focus:outline-none focus:ring-2 text-lg ${showError && !input.trim() ? \"border-red-500 focus:ring-red-500\" : \"border-gray-300 focus:ring-blue-500\"}`,\n                                    disabled: isLoading || toolState.isExecuting\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                    lineNumber: 847,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    type: \"submit\",\n                                    disabled: isLoading || toolState.isExecuting || !input.trim(),\n                                    className: \"px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-lg transition-colors duration-150 shadow-sm\",\n                                    children: \"Send\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                                    lineNumber: 857,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                            lineNumber: 846,\n                            columnNumber: 11\n                        }, this),\n                        showError && !input.trim() && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-red-500\",\n                            children: \"Please enter a message\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                            lineNumber: 866,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                    lineNumber: 845,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n                lineNumber: 844,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\AIChat\\\\index.tsx\",\n        lineNumber: 719,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvQUlDaGF0L2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWlEO0FBQ0w7QUFDbEI7QUEwQlgsU0FBU0ksT0FBTyxFQUFFQyxlQUFlLEVBQUVDLG9CQUFvQixFQUFFQyxrQkFBa0IsRUFBZTtJQUN2RyxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR1IsK0NBQVFBLENBQVk7UUFDcERTLGFBQWE7UUFDYkMsYUFBYTtRQUNiQyxZQUFZO0lBQ2Q7SUFDQSxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBR2IsK0NBQVFBLENBQUM7SUFDM0MsTUFBTSxDQUFDYyxVQUFVQyxZQUFZLEdBQUdmLCtDQUFRQSxDQUFnQjtJQUN4RCxNQUFNLENBQUNnQixZQUFZQyxjQUFjLEdBQUdqQiwrQ0FBUUEsQ0FBQztJQUM3QyxNQUFNLENBQUNrQixTQUFTQyxXQUFXLEdBQUduQiwrQ0FBUUEsQ0FBQyxPQUFPLHdCQUF3QjtJQUN0RSxNQUFNLENBQUNvQixhQUFhQyxlQUFlLEdBQUdyQiwrQ0FBUUEsQ0FBQyxtQkFBbUIsMkJBQTJCO0lBQzdGLE1BQU0sQ0FBQ3NCLG9CQUFvQkMsc0JBQXNCLEdBQUd2QiwrQ0FBUUEsQ0FBYyxJQUFJd0I7SUFDOUUsTUFBTSxDQUFDQyxpQkFBaUJDLG1CQUFtQixHQUFHMUIsK0NBQVFBLENBQUM7SUFFdkQsNkRBQTZEO0lBQzdEQyxnREFBU0EsQ0FBQztRQUNSb0IsZUFBZUgsVUFBVSxtQkFBbUI7SUFDOUMsR0FBRztRQUFDQTtLQUFRO0lBRVosTUFBTVMsWUFBWTtRQUNoQkMsT0FBT0MsUUFBUSxDQUFDQyxNQUFNLElBQUksaUNBQWlDO0lBQzdEO0lBRUEsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRUMsaUJBQWlCLEVBQUVDLFlBQVksRUFBRUMsU0FBUyxFQUFFQyxLQUFLLEVBQUVOLE1BQU0sRUFBRSxHQUFHL0IsaURBQU9BLENBQUM7UUFDN0ZzQyxLQUFLakI7UUFDTGtCLFlB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STlFLFdBQVU7OzhDQUNiLDhEQUFDaEU7b0NBQ0MwRCxJQUFHO29DQUNIcUMsT0FBTy9GO29DQUNQdUwsVUFBVXRMO29DQUNWdUwsYUFBWTtvQ0FDWnhILFdBQVcsQ0FBQywyRUFBMkUsRUFDckZwRixhQUFhLENBQUNvQixNQUFNNkgsSUFBSSxLQUFLLHNDQUFzQyxzQ0FDcEUsQ0FBQztvQ0FDRjRELFVBQVV0TCxhQUFhNUIsVUFBVUUsV0FBVzs7Ozs7OzhDQUU5Qyw4REFBQzZMO29DQUNDb0IsTUFBSztvQ0FDTEQsVUFBVXRMLGFBQWE1QixVQUFVRSxXQUFXLElBQUksQ0FBQ3VCLE1BQU02SCxJQUFJO29DQUMzRDdELFdBQVU7OENBQ1g7Ozs7Ozs7Ozs7Ozt3QkFJRnBGLGFBQWEsQ0FBQ29CLE1BQU02SCxJQUFJLG9CQUN2Qiw4REFBQ3dDOzRCQUFFckcsV0FBVTtzQ0FBdUI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTWhEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9zcmMvYXBwL2NvbXBvbmVudHMvQUlDaGF0L2luZGV4LnRzeD8yNTA1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUNoYXQsIHR5cGUgTWVzc2FnZSB9IGZyb20gJ2FpL3JlYWN0JztcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbnRlcmZhY2UgVG9vbFN0YXRlIHtcbiAgaXNFeGVjdXRpbmc6IGJvb2xlYW47XG4gIGN1cnJlbnRUb29sOiBzdHJpbmcgfCBudWxsO1xuICBsYXN0UmVzdWx0OiBhbnk7XG59XG5cbmludGVyZmFjZSBUb29sSW52b2NhdGlvbiB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYXJndW1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICByZXN1bHQ/OiBhbnk7XG59XG5cbi8vIEV4dGVuZCB0aGUgTWVzc2FnZSB0eXBlIHRvIGluY2x1ZGUgdG9vbEludm9jYXRpb25zXG5pbnRlcmZhY2UgRXh0ZW5kZWRNZXNzYWdlIGV4dGVuZHMgTWVzc2FnZSB7XG4gIHRvb2xJbnZvY2F0aW9ucz86IFRvb2xJbnZvY2F0aW9uW107XG59XG5cbmludGVyZmFjZSBBSUNoYXRQcm9wcyB7XG4gIG9uU2VsZWN0SW52b2ljZT86IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBvblRvZ2dsZUludm9pY2VQYW5lbD86IChvcGVuOiBib29sZWFuKSA9PiB2b2lkO1xuICBpc0ludm9pY2VQYW5lbE9wZW4/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBSUNoYXQoeyBvblNlbGVjdEludm9pY2UsIG9uVG9nZ2xlSW52b2ljZVBhbmVsLCBpc0ludm9pY2VQYW5lbE9wZW4gfTogQUlDaGF0UHJvcHMpIHtcbiAgY29uc3QgW3Rvb2xTdGF0ZSwgc2V0VG9vbFN0YXRlXSA9IHVzZVN0YXRlPFRvb2xTdGF0ZT4oe1xuICAgIGlzRXhlY3V0aW5nOiBmYWxzZSxcbiAgICBjdXJyZW50VG9vbDogbnVsbCxcbiAgICBsYXN0UmVzdWx0OiBudWxsLFxuICB9KTtcbiAgY29uc3QgW3Nob3dFcnJvciwgc2V0U2hvd0Vycm9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2FwaUVycm9yLCBzZXRBcGlFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzUmV0cnlpbmcsIHNldElzUmV0cnlpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdXNlR3JvcSwgc2V0VXNlR3JvcV0gPSB1c2VTdGF0ZSh0cnVlKTsgLy8gRGVmYXVsdCB0byB1c2luZyBHcm9xXG4gIGNvbnN0IFthcGlFbmRwb2ludCwgc2V0QXBpRW5kcG9pbnRdID0gdXNlU3RhdGUoJy9hcGkvY2hhdC9ncm9xJyk7IC8vIERlZmF1bHQgdG8gR3JvcSBlbmRwb2ludFxuICBjb25zdCBbYXR0ZW1wdGVkUHJvdmlkZXJzLCBzZXRBdHRlbXB0ZWRQcm92aWRlcnNdID0gdXNlU3RhdGU8U2V0PHN0cmluZz4+KG5ldyBTZXQoKSk7XG4gIGNvbnN0IFthdXRvTG9hZEludm9pY2UsIHNldEF1dG9Mb2FkSW52b2ljZV0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gVXBkYXRlIHRoZSBlbmRwb2ludCB3aGVuIHN3aXRjaGluZyBiZXR3ZWVuIEdyb3EgYW5kIE9wZW5BSVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHNldEFwaUVuZHBvaW50KHVzZUdyb3EgPyAnL2FwaS9jaGF0L2dyb3EnIDogJy9hcGkvY2hhdCcpO1xuICB9LCBbdXNlR3JvcV0pO1xuXG4gIGNvbnN0IHJlc2V0Q2hhdCA9ICgpID0+IHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7IC8vIEZvcmNlIGEgZnVsbCByZXNldCBvZiB0aGUgY2hhdFxuICB9O1xuXG4gIGNvbnN0IHsgbWVzc2FnZXMsIGlucHV0LCBoYW5kbGVJbnB1dENoYW5nZSwgaGFuZGxlU3VibWl0LCBpc0xvYWRpbmcsIGVycm9yLCByZWxvYWQgfSA9IHVzZUNoYXQoe1xuICAgIGFwaTogYXBpRW5kcG9pbnQsXG4gICAgb25SZXNwb25zZTogKHJlc3BvbnNlKSA9PiB7XG4gICAgICAvLyBDaGVjayBpZiB0aGUgcmVzcG9uc2UgaXMgT0tcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgLy8gVHJhY2sgd2hpY2ggcHJvdmlkZXIgd2UgYXR0ZW1wdGVkXG4gICAgICAgIHNldEF0dGVtcHRlZFByb3ZpZGVycyhwcmV2ID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICAgIG5ld1NldC5hZGQoYXBpRW5kcG9pbnQpO1xuICAgICAgICAgIHJldHVybiBuZXdTZXQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBhcnNlIHRoZSBkZXRhaWxlZCBlcnJvciBmcm9tIHRoZSByZXNwb25zZSBpZiBwb3NzaWJsZVxuICAgICAgICByZXNwb25zZS5qc29uKCkudGhlbihcbiAgICAgICAgICAoZXJyb3JEYXRhKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBUEkgZXJyb3IgZGV0YWlsczonLCBlcnJvckRhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBJZiB0aGUgZXJyb3Igc3VnZ2VzdHMgdXNpbmcgR3JvcSBpbnN0ZWFkXG4gICAgICAgICAgICBpZiAoZXJyb3JEYXRhLnVzZUdyb3EgJiYgIXVzZUdyb3EpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FQSSByZWNvbW1lbmRzIHN3aXRjaGluZyB0byBHcm9xLCBzd2l0Y2hpbmcuLi4nKTtcbiAgICAgICAgICAgICAgc2V0VXNlR3JvcSh0cnVlKTtcbiAgICAgICAgICAgICAgc2V0QXBpRXJyb3IoJ1N3aXRjaGluZyB0byBHcm9xIEFQSS4gUGxlYXNlIHJldHJ5IHlvdXIgbWVzc2FnZS4nKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBzZXRBcGlFcnJvcihgRXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9OiAke2Vycm9yRGF0YS5lcnJvciB8fCAnQ29ubmVjdGlvbiB0byBBSSBmYWlsZWQnfWApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gSWYgY2FuJ3QgcGFyc2UgSlNPTiwgdXNlIHRoZSBzdGF0dXMgdGV4dFxuICAgICAgICAgICgpID0+IHNldEFwaUVycm9yKGBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dCB8fCAnQ29ubmVjdGlvbiB0byBBSSBmYWlsZWQnfWApXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVzZXQgZXJyb3Igc3RhdGUgYW5kIHRvb2wgc3RhdGUgd2hlbiBhIG5ldyBzdWNjZXNzZnVsIHJlc3BvbnNlIHN0YXJ0c1xuICAgICAgc2V0QXBpRXJyb3IobnVsbCk7XG4gICAgICBzZXRUb29sU3RhdGUoe1xuICAgICAgICBpc0V4ZWN1dGluZzogZmFsc2UsXG4gICAgICAgIGN1cnJlbnRUb29sOiBudWxsLFxuICAgICAgICBsYXN0UmVzdWx0OiBudWxsLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENsZWFyIHRoZSBhdHRlbXB0ZWQgcHJvdmlkZXJzIGxpc3Qgb24gc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAgc2V0QXR0ZW1wdGVkUHJvdmlkZXJzKG5ldyBTZXQoKSk7XG4gICAgfSxcbiAgICBvbkZpbmlzaDogKG1lc3NhZ2UpID0+IHtcbiAgICAgIC8vIEhhbmRsZSB3aGVuIHRoZSBtZXNzYWdlIGlzIGNvbXBsZXRlXG4gICAgICBzZXRBcGlFcnJvcihudWxsKTtcbiAgICB9LFxuICAgIG9uRXJyb3I6IChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignQ2hhdCBlcnJvcjonLCBlcnJvcik7XG4gICAgICBcbiAgICAgIC8vIFRyYWNrIHdoaWNoIHByb3ZpZGVyIHdlIGF0dGVtcHRlZFxuICAgICAgc2V0QXR0ZW1wdGVkUHJvdmlkZXJzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICBuZXdTZXQuYWRkKGFwaUVuZHBvaW50KTtcbiAgICAgICAgcmV0dXJuIG5ld1NldDtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJztcbiAgICAgIHNldEFwaUVycm9yKGBGYWlsZWQgdG8gY29tbXVuaWNhdGUgd2l0aCBBSTogJHtlcnJvck1lc3NhZ2V9LiBUcnkgc3dpdGNoaW5nIHByb3ZpZGVycyBvciByZWZyZXNoaW5nLmApO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIGJldHdlZW4gR3JvcSBhbmQgT3BlbkFJXG4gIGNvbnN0IHRvZ2dsZVByb3ZpZGVyID0gKCkgPT4ge1xuICAgIHNldFVzZUdyb3EocHJldiA9PiAhcHJldik7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIGVycm9ycyB3aGVuIHN3aXRjaGluZyBwcm92aWRlcnNcbiAgICBzZXRBcGlFcnJvcihudWxsKTtcbiAgfTtcblxuICAvLyBBdXRvbWF0aWNhbGx5IHRyeSBhbm90aGVyIHByb3ZpZGVyIGlmIG9uZSBmYWlscyBhbmQgd2UgaGF2ZW4ndCB0cmllZCBpdCB5ZXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoYXBpRXJyb3IgJiYgIWlzUmV0cnlpbmcpIHtcbiAgICAgIC8vIE9ubHkgdHJ5IE9wZW5BSSBhcyBmYWxsYmFjayBpZiBHcm9xIGZhaWxzXG4gICAgICBpZiAodXNlR3JvcSAmJiAhYXR0ZW1wdGVkUHJvdmlkZXJzLmhhcygnL2FwaS9jaGF0JykpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0dyb3EgZmFpbGVkLCB0cnlpbmcgT3BlbkFJIGFzIGZhbGxiYWNrJyk7XG4gICAgICAgIHNldFVzZUdyb3EoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW2FwaUVycm9yLCBpc1JldHJ5aW5nLCB1c2VHcm9xLCBhdHRlbXB0ZWRQcm92aWRlcnNdKTtcblxuICAvLyBBdXRvLXNlbGVjdCBpbnZvaWNlIHdoZW4gbWVudGlvbmVkIGluIGNoYXRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXTtcbiAgICAgIGlmIChsYXN0TWVzc2FnZS5yb2xlID09PSAndXNlcicpIHtcbiAgICAgICAgLy8gTG9vayBmb3IgaW52b2ljZSBudW1iZXIgbWVudGlvbnMgaW4gdmFyaW91cyBmb3JtYXRzIHdpdGggbW9yZSB0aG9yb3VnaCBwYXR0ZXJuc1xuICAgICAgICBjb25zdCBpbnZvaWNlUGF0dGVybnMgPSBbXG4gICAgICAgICAgLy8gQ29tbW9uIGludm9pY2UgbnVtYmVyIHBhdHRlcm5zXG4gICAgICAgICAgL2ludm9pY2VcXHMrIz8oXFxkKykvZ2ksXG4gICAgICAgICAgL2ludlsuXFwtX10/KFxcZCspL2dpLFxuICAgICAgICAgIC9pbnZvaWNlXFxzK251bWJlclxccysjPyhcXGQrKS9naSxcbiAgICAgICAgICAvLyBNb3JlIHNwZWNpZmljIHdpdGggd29yZCBib3VuZGFyaWVzXG4gICAgICAgICAgL1xcYihpbnZvaWNlfGludilbLlxcLV8gI10qKFxcZCspXFxiL2dpLFxuICAgICAgICAgIC8vIEludm9pY2Ugd2l0aCBJRCBwcmVmaXhcbiAgICAgICAgICAvaW52b2ljZVxccytpZFtcXHM6I10qKFxcZCspL2dpLFxuICAgICAgICAgIC8vIEFza2luZyBhYm91dCBhbiBpbnZvaWNlXG4gICAgICAgICAgLyg/OnNob3d8Z2V0fGZpbmR8ZGV0YWlsc1xccysoPzpmb3J8YWJvdXQpfHRlbGxcXHMrbWVcXHMrYWJvdXQpXFxzKyg/Omludm9pY2V8aW52KVsuXFwtXyAjXSooXFxkKykvZ2ksXG4gICAgICAgIF07XG5cbiAgICAgICAgLy8gQ2hlY2sgZWFjaCBwYXR0ZXJuIGFuZCBjb2xsZWN0IG1hdGNoZXNcbiAgICAgICAgbGV0IGludm9pY2VJZCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBpbnZvaWNlUGF0dGVybnMpIHtcbiAgICAgICAgICBjb25zdCBtYXRjaGVzID0gQXJyYXkuZnJvbShsYXN0TWVzc2FnZS5jb250ZW50Lm1hdGNoQWxsKHBhdHRlcm4pIHx8IFtdKTtcbiAgICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBHZXQgdGhlIG51bWVyaWMgcG9ydGlvbiwgY2hlY2tpbmcgdGhlIHJpZ2h0IGNhcHR1cmUgZ3JvdXBcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbWF0Y2hlc1swXTtcbiAgICAgICAgICAgIC8vIElmIHRoZSBwYXR0ZXJuIGhhcyBtdWx0aXBsZSBjYXB0dXJlIGdyb3VwcywgdXNlIHRoZSBsYXN0IG5vbi1lbXB0eSBvbmVcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbWF0Y2gubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKG1hdGNoW2ldICYmIC9eXFxkKyQvLnRlc3QobWF0Y2hbaV0pKSB7XG4gICAgICAgICAgICAgICAgaW52b2ljZUlkID0gbWF0Y2hbaV07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbnZvaWNlSWQpIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgd2UgZm91bmQgYW4gaW52b2ljZSBJRCBhbmQgaGF2ZSBhbiBvblNlbGVjdEludm9pY2UgaGFuZGxlciwgY2FsbCBpdFxuICAgICAgICBpZiAoaW52b2ljZUlkICYmIG9uU2VsZWN0SW52b2ljZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBEZXRlY3RlZCBpbnZvaWNlIHJlZmVyZW5jZTogJHtpbnZvaWNlSWR9YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmV0Y2ggaW52b2ljZSBkZXRhaWxzIGZvciBkaXNwbGF5IGluIGNoYXRcbiAgICAgICAgICBmZXRjaEludm9pY2VEZXRhaWxzKGludm9pY2VJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWxzbyBzZWxlY3QgdGhlIGludm9pY2UgaW4gdGhlIHBhbmVsXG4gICAgICAgICAgb25TZWxlY3RJbnZvaWNlKGludm9pY2VJZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQWxzbyBzZXQgYXV0b0xvYWRJbnZvaWNlIGZsYWcgdG8gdHJ1ZSB0byBpbmRpY2F0ZSB3ZSd2ZSBoYW5kbGVkIHRoaXMgbWVzc2FnZVxuICAgICAgICAgIHNldEF1dG9Mb2FkSW52b2ljZSh0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwgW21lc3NhZ2VzLCBvblNlbGVjdEludm9pY2VdKTtcblxuICAvLyBGdW5jdGlvbiB0byBmZXRjaCBhbmQgZGlzcGxheSBpbnZvaWNlIGRldGFpbHMgZGlyZWN0bHkgaW4gY2hhdFxuICBjb25zdCBmZXRjaEludm9pY2VEZXRhaWxzID0gYXN5bmMgKGludm9pY2VJZDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlbGF4IHRoZSBjb25kaXRpb24gdG8gYWxsb3cgZGlzcGxheWluZyBpbnZvaWNlIGluZm8gaW4gbW9yZSBzaXR1YXRpb25zXG4gICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgbGFzdCB1c2VyIG1lc3NhZ2VcbiAgICAgIGNvbnN0IGxhc3RVc2VyTWVzc2FnZSA9IG1lc3NhZ2VzLmZpbHRlcihtID0+IG0ucm9sZSA9PT0gJ3VzZXInKS5wb3AoKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgd2FzIGV4cGxpY2l0bHkgYXNraW5nIGZvciBpbnZvaWNlIGRldGFpbHNcbiAgICAgIGNvbnN0IGlzRXhwbGljaXRJbnZvaWNlUmVxdWVzdCA9IGxhc3RVc2VyTWVzc2FnZSAmJiAoXG4gICAgICAgIGxhc3RVc2VyTWVzc2FnZS5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYGludm9pY2UgJHtpbnZvaWNlSWR9YCkgfHxcbiAgICAgICAgbGFzdFVzZXJNZXNzYWdlLmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhgaW52b2ljZSAjJHtpbnZvaWNlSWR9YCkgfHxcbiAgICAgICAgbGFzdFVzZXJNZXNzYWdlLmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhgaW52b2ljZSBudW1iZXIgJHtpbnZvaWNlSWR9YCkgfHxcbiAgICAgICAgbGFzdFVzZXJNZXNzYWdlLmNvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhgc2hvdyBtZSBpbnZvaWNlICR7aW52b2ljZUlkfWApIHx8XG4gICAgICAgIGxhc3RVc2VyTWVzc2FnZS5jb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYGludm9pY2UgZGV0YWlscyBmb3IgJHtpbnZvaWNlSWR9YClcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIE9ubHkgZGlzcGxheSBvdXIgcGFuZWwgZm9yIGV4cGxpY2l0IHJlcXVlc3RzXG4gICAgICBpZiAoIWlzRXhwbGljaXRJbnZvaWNlUmVxdWVzdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgTm90IHNob3dpbmcgcGFuZWwgZm9yIGludm9pY2UgIyR7aW52b2ljZUlkfSAtIG5vdCBhbiBleHBsaWNpdCByZXF1ZXN0YCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIGV4aXN0aW5nIGludm9pY2UgZGF0YSBpbiBBSSByZXNwb25zZXNcbiAgICAgIGNvbnN0IGV4aXN0aW5nSW52b2ljZUluZm9JbkNoYXQgPSBtZXNzYWdlcy5zb21lKG0gPT4gXG4gICAgICAgIG0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcgJiYgXG4gICAgICAgIG0uY29udGVudC5pbmNsdWRlcyhgSW52b2ljZSAjJHtpbnZvaWNlSWR9YCkgJiYgXG4gICAgICAgIChtLmNvbnRlbnQuaW5jbHVkZXMoJ0N1c3RvbWVyOicpIHx8IG0uY29udGVudC5pbmNsdWRlcygnQ3VzdG9tZXInKSlcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIElmIHdlIGFscmVhZHkgaGF2ZSBpbnZvaWNlIGluZm8gZnJvbSB0aGUgQUksIGRvbid0IGFkZCBvdXIgb3duIHBhbmVsXG4gICAgICBpZiAoZXhpc3RpbmdJbnZvaWNlSW5mb0luQ2hhdCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgSW52b2ljZSAjJHtpbnZvaWNlSWR9IGluZm9ybWF0aW9uIGFscmVhZHkgZXhpc3RzIGluIGNoYXQsIG5vdCBhZGRpbmcgcGFuZWxgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgZGV0YWlscyBmb3IgaW52b2ljZSAke2ludm9pY2VJZH0gdG8gZGlzcGxheSBpbiBjaGF0YCk7XG4gICAgICBcbiAgICAgIC8vIElNUE9SVEFOVDogVXNlIHRoZSBjaGF0IEFQSSBpbnN0ZWFkIG9mIHRoZSBpbnZvaWNlIEFQSSB0byBnZXQgY29uc2lzdGVudCBkYXRhXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2NoYXQvdG9vbGAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdG9vbDogJ3N1bW1hcml6ZUludm9pY2UnLFxuICAgICAgICAgIHBhcmFtczogeyBpZDogaW52b2ljZUlkIH1cbiAgICAgICAgfSksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBpbnZvaWNlICR7aW52b2ljZUlkfTpgLCByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhcIkludm9pY2UgZGF0YSBmcm9tIGNoYXQgQVBJOlwiLCByZXN1bHQpOyAvLyBMb2cgdGhlIGludm9pY2UgZGF0YSB0byBkZWJ1Z1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgZXJyb3JzIG9yIGF1dGhlbnRpY2F0aW9uIGlzc3Vlc1xuICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB3aXRoIGludm9pY2UgJHtpbnZvaWNlSWR9OmAsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGF1dGhlbnRpY2F0aW9uIGVycm9yXG4gICAgICAgIGlmIChcbiAgICAgICAgICByZXN1bHQuZXJyb3IuaW5jbHVkZXMoJ2F1dGhlbnRpY2F0aW9uJykgfHwgXG4gICAgICAgICAgcmVzdWx0LmVycm9yLmluY2x1ZGVzKCdjb25uZWN0IHlvdXIgYWNjb3VudCcpIHx8XG4gICAgICAgICAgcmVzdWx0LmVycm9yLmluY2x1ZGVzKCdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcpXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIERpc3BsYXkgYXV0aGVudGljYXRpb24gbWVzc2FnZSBpbiBjaGF0IGluc3RlYWQgb2YgaW52b2ljZSBkZXRhaWxzXG4gICAgICAgICAgY29uc3QgYXV0aE1lc3NhZ2VIdG1sID0gYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJnLXllbGxvdy01MCBwLTQgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLXllbGxvdy0yMDAgbXktMyBzaGFkb3ctc21cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgY2xhc3M9XCJoLTYgdy02IHRleHQteWVsbG93LTYwMCBtci0yXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk0xMiA5djJtMCA0aC4wMW0tNi45MzggNGgxMy44NTZjMS41NCAwIDIuNTAyLTEuNjY3IDEuNzMyLTNMMTMuNzMyIDRjLS43Ny0xLjMzMy0yLjY5NC0xLjMzMy0zLjQ2NCAwTDMuMzQgMTZjLS43NyAxLjMzMy4xOTIgMyAxLjczMiAzelwiIC8+XG4gICAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidGV4dC1sZyBmb250LW1lZGl1bSB0ZXh0LXllbGxvdy04MDBcIj5RdWlja0Jvb2tzIENvbm5lY3Rpb24gUmVxdWlyZWQ8L2gzPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJtdC0yIHRleHQteWVsbG93LTcwMFwiPlxuICAgICAgICAgICAgICAgIFBsZWFzZSBjb25uZWN0IHlvdXIgUXVpY2tCb29rcyBhY2NvdW50IHRvIHZpZXcgaW52b2ljZSBkZXRhaWxzLlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC0zXCI+XG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9zZXR0aW5nc1wiIGNsYXNzPVwiaW5saW5lLWZsZXggaXRlbXMtY2VudGVyIHB4LTQgcHktMiBib3JkZXIgYm9yZGVyLXRyYW5zcGFyZW50IHRleHQtc20gZm9udC1tZWRpdW0gcm91bmRlZC1tZCBzaGFkb3ctc20gdGV4dC13aGl0ZSBiZy15ZWxsb3ctNjAwIGhvdmVyOmJnLXllbGxvdy03MDAgZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctMiBmb2N1czpyaW5nLW9mZnNldC0yIGZvY3VzOnJpbmcteWVsbG93LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgQ29ubmVjdCBRdWlja0Jvb2tzXG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIGA7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgYXV0aERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGF1dGhEaXYuY2xhc3NOYW1lID0gJ21iLTQnO1xuICAgICAgICAgIGF1dGhEaXYuaW5uZXJIVE1MID0gYXV0aE1lc3NhZ2VIdG1sO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1tZXNzYWdlcy1jb250YWluZXInKTtcbiAgICAgICAgICBpZiAoY2hhdENvbnRhaW5lcikge1xuICAgICAgICAgICAgY2hhdENvbnRhaW5lci5hcHBlbmRDaGlsZChhdXRoRGl2KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBhdXRoRGl2LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ25lYXJlc3QnIH0pO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgcmVzdWx0IGRpcmVjdGx5IGlmIGl0IGhhcyB0aGUgaW52b2ljZSBkYXRhXG4gICAgICBjb25zdCBpbnZvaWNlID0gcmVzdWx0Lmludm9pY2UgfHwgcmVzdWx0LmRhdGEgfHwgcmVzdWx0O1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBoYXZlIGludm9pY2UgZGF0YSwgY3JlYXRlIGEgc3RhbmRhcmRpemVkIGRpc3BsYXlcbiAgICAgIGlmIChpbnZvaWNlICYmIChpbnZvaWNlLklkIHx8IGludm9pY2UuRG9jTnVtYmVyIHx8IGludm9pY2UuaWQgfHwgaW52b2ljZS5pbnZvaWNlTnVtYmVyKSkge1xuICAgICAgICAvLyBNYXAgaW52b2ljZSBwcm9wZXJ0aWVzIC0gUXVpY2tCb29rcyBjYW4gcmV0dXJuIGRpZmZlcmVudCBmb3JtYXRzXG4gICAgICAgIGNvbnN0IHN0YW5kYXJkSW52b2ljZSA9IHtcbiAgICAgICAgICBpZDogaW52b2ljZS5JZCB8fCBpbnZvaWNlLmlkIHx8ICcnLFxuICAgICAgICAgIG51bWJlcjogaW52b2ljZS5Eb2NOdW1iZXIgfHwgaW52b2ljZS5pbnZvaWNlTnVtYmVyIHx8IGludm9pY2VJZCxcbiAgICAgICAgICBjdXN0b21lck5hbWU6IGludm9pY2UuQ3VzdG9tZXJSZWY/Lm5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgaW52b2ljZS5jdXN0b21lck5hbWUgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiBpbnZvaWNlLkN1c3RvbWVyUmVmID09PSAnc3RyaW5nJyA/IGludm9pY2UuQ3VzdG9tZXJSZWYgOiAnVW5rbm93biBDdXN0b21lcicpLFxuICAgICAgICAgIGFtb3VudDogaW52b2ljZS5Ub3RhbEFtdCB8fCBpbnZvaWNlLmFtb3VudCB8fCAwLFxuICAgICAgICAgIGJhbGFuY2U6IGludm9pY2UuQmFsYW5jZSAhPT0gdW5kZWZpbmVkID8gaW52b2ljZS5CYWxhbmNlIDogKGludm9pY2UuYmFsYW5jZSAhPT0gdW5kZWZpbmVkID8gaW52b2ljZS5iYWxhbmNlIDogMCksXG4gICAgICAgICAgZGF0ZTogaW52b2ljZS5UeG5EYXRlIHx8IGludm9pY2UuZGF0ZSB8fCAnJyxcbiAgICAgICAgICBkdWVEYXRlOiBpbnZvaWNlLkR1ZURhdGUgfHwgaW52b2ljZS5kdWVEYXRlIHx8ICcnLFxuICAgICAgICAgIG1lbW86IGludm9pY2UuUHJpdmF0ZU5vdGUgfHwgaW52b2ljZS5DdXN0b21lck1lbW8/LnZhbHVlIHx8IGludm9pY2UubWVtbyB8fCAnJ1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gRm9ybWF0IGN1cnJlbmN5IC0gZW5zdXJlIGNvbnNpc3RlbmN5IHdpdGggSW52b2ljZVBhbmVsIGFuZCBUb29sc1BhbmVsIGZvcm1hdHRpbmdcbiAgICAgICAgY29uc3QgZm9ybWF0Q3VycmVuY3kgPSAoYW1vdW50OiBudW1iZXIgfCBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAoYW1vdW50ID09PSB1bmRlZmluZWQgfHwgYW1vdW50ID09PSBudWxsKSByZXR1cm4gJyQwLjAwJztcbiAgICAgICAgICBjb25zdCBudW1lcmljQW1vdW50ID0gdHlwZW9mIGFtb3VudCA9PT0gJ3N0cmluZycgPyBwYXJzZUZsb2F0KGFtb3VudCkgOiBhbW91bnQ7XG4gICAgICAgICAgcmV0dXJuIG51bWVyaWNBbW91bnQgPyBgJCR7bnVtZXJpY0Ftb3VudC50b0ZpeGVkKDIpfWAgOiAnJDAuMDAnO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEZvcm1hdCBkYXRlIGluIGEgbW9yZSByZWFkYWJsZSBmb3JtYXQgKE1NL0REL1lZWVkpIC0gY29uc2lzdGVudCB3aXRoIG90aGVyIGNvbXBvbmVudHNcbiAgICAgICAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlU3RyOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpZiAoIWRhdGVTdHIpIHJldHVybiAnVW5rbm93bic7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgICAgICAgICAgIHJldHVybiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZW4tVVMnLCB7IFxuICAgICAgICAgICAgICB5ZWFyOiAnbnVtZXJpYycsIFxuICAgICAgICAgICAgICBtb250aDogJ251bWVyaWMnLCBcbiAgICAgICAgICAgICAgZGF5OiAnbnVtZXJpYycgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZVN0cjsgLy8gSWYgaW52YWxpZCBkYXRlLCByZXR1cm4gdGhlIG9yaWdpbmFsIHN0cmluZ1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBiaWxsaW5nIGFkZHJlc3MgaWYgYXZhaWxhYmxlXG4gICAgICAgIGNvbnN0IGJpbGxpbmdBZGRyZXNzID0gaW52b2ljZS5CaWxsQWRkciB8fCBpbnZvaWNlLmJpbGxBZGRyIHx8IHt9O1xuICAgICAgICBjb25zdCBhZGRyZXNzTGluZTEgPSBiaWxsaW5nQWRkcmVzcy5MaW5lMSB8fCBiaWxsaW5nQWRkcmVzcy5saW5lMSB8fCAnJztcbiAgICAgICAgY29uc3QgYWRkcmVzc0xpbmUyID0gYmlsbGluZ0FkZHJlc3MuTGluZTIgfHwgYmlsbGluZ0FkZHJlc3MubGluZTIgfHwgJyc7XG4gICAgICAgIGNvbnN0IGNpdHkgPSBiaWxsaW5nQWRkcmVzcy5DaXR5IHx8IGJpbGxpbmdBZGRyZXNzLmNpdHkgfHwgJyc7XG4gICAgICAgIGNvbnN0IHN0YXRlID0gYmlsbGluZ0FkZHJlc3MuQ291bnRyeVN1YkRpdmlzaW9uQ29kZSB8fCBiaWxsaW5nQWRkcmVzcy5zdGF0ZSB8fCAnJztcbiAgICAgICAgY29uc3QgemlwID0gYmlsbGluZ0FkZHJlc3MuUG9zdGFsQ29kZSB8fCBiaWxsaW5nQWRkcmVzcy56aXAgfHwgJyc7XG4gICAgICAgIFxuICAgICAgICAvLyBDb25zdHJ1Y3QgZm9ybWF0dGVkIGFkZHJlc3NcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkQWRkcmVzcyA9IFthZGRyZXNzTGluZTEsIGFkZHJlc3NMaW5lMiwgYCR7Y2l0eX0ke2NpdHkgJiYgc3RhdGUgPyAnLCAnIDogJyd9JHtzdGF0ZX0gJHt6aXB9YF1cbiAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpXG4gICAgICAgICAgLmpvaW4oJzxicj4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIERldGVybWluZSBpZiBpbnZvaWNlIGlzIHBhaWQgb3Igbm90XG4gICAgICAgIGNvbnN0IGlzUGFpZCA9IHN0YW5kYXJkSW52b2ljZS5iYWxhbmNlID09PSAwIHx8IHN0YW5kYXJkSW52b2ljZS5iYWxhbmNlID09PSAnMCc7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSBuaWNlbHkgZm9ybWF0dGVkIGludm9pY2UgZGV0YWlscyBwYW5lbCB3aXRoIG1vcmUgZGV0YWlsc1xuICAgICAgICBjb25zdCBpbnZvaWNlRGV0YWlsc0h0bWwgPSBgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImJnLWJsdWUtNTAgcC00IHJvdW5kZWQtbGcgYm9yZGVyIGJvcmRlci1ibHVlLTIwMCBteS0zIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlblwiPlxuICAgICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDBcIj5JbnZvaWNlICMke3N0YW5kYXJkSW52b2ljZS5udW1iZXJ9PC9oMz5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJweC0yIHB5LTEgYmctJHtpc1BhaWQgPyAnZ3JlZW4nIDogJ29yYW5nZSd9LTEwMCB0ZXh0LSR7aXNQYWlkID8gJ2dyZWVuJyA6ICdvcmFuZ2UnfS04MDAgdGV4dC1zbSByb3VuZGVkLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAke2lzUGFpZCA/ICdQYWlkJyA6ICdVbnBhaWQnfVxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQgbXQtM1wiPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5DdXN0b21lcjwvaDQ+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwXCI+JHtzdGFuZGFyZEludm9pY2UuY3VzdG9tZXJOYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAke2Zvcm1hdHRlZEFkZHJlc3MgPyBgPHAgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDAgbXQtMVwiPiR7Zm9ybWF0dGVkQWRkcmVzc308L3A+YCA6ICcnfVxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQgZ3JpZC1jb2xzLTIgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5BbW91bnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtZ3JheS04MDBcIj4ke2Zvcm1hdEN1cnJlbmN5KHN0YW5kYXJkSW52b2ljZS5hbW91bnQpfTwvcD5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAkeyFpc1BhaWQgPyBgXG4gICAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+QmFsYW5jZSBEdWU8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtZ3JheS04MDAgZm9udC1tZWRpdW0gdGV4dC1vcmFuZ2UtNjAwXCI+JHtmb3JtYXRDdXJyZW5jeShzdGFuZGFyZEludm9pY2UuYmFsYW5jZSl9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5EYXRlPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwXCI+JHtmb3JtYXREYXRlKHN0YW5kYXJkSW52b2ljZS5kYXRlKX08L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPkR1ZSBEYXRlPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwXCI+JHtmb3JtYXREYXRlKHN0YW5kYXJkSW52b2ljZS5kdWVEYXRlKX08L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJHtzdGFuZGFyZEludm9pY2UubWVtbyA/IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtdC0zIHB0LTMgYm9yZGVyLXQgYm9yZGVyLWJsdWUtMjAwXCI+XG4gICAgICAgICAgICAgIDxoNCBjbGFzcz1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5NZW1vPC9oND5cbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwIHRleHQtc20gbXQtMSBiZy13aGl0ZSBwLTIgcm91bmRlZFwiPiR7c3RhbmRhcmRJbnZvaWNlLm1lbW99PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdGhlIEhUTUwgdG8gYSBkaXNwbGF5IGRpdlxuICAgICAgICBjb25zdCBkZXRhaWxzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRldGFpbHNEaXYuY2xhc3NOYW1lID0gJ21iLTQnO1xuICAgICAgICBkZXRhaWxzRGl2LmlubmVySFRNTCA9IGludm9pY2VEZXRhaWxzSHRtbDtcbiAgICAgICAgXG4gICAgICAgIC8vIEluc2VydCB0aGUgZGV0YWlscyBkaXYgYXQgdGhlIGFwcHJvcHJpYXRlIHBvc2l0aW9uIGluIHRoZSBjaGF0IC0gYWZ0ZXIgdGhlIHVzZXIncyBtZXNzYWdlXG4gICAgICAgIGNvbnN0IGNoYXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhdC1tZXNzYWdlcy1jb250YWluZXInKTtcbiAgICAgICAgaWYgKGNoYXRDb250YWluZXIpIHtcbiAgICAgICAgICAvLyBDbGVhciBhbnkgcHJldmlvdXMgaW52b2ljZSBkaXNwbGF5cyB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdEaXNwbGF5cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnZvaWNlLWRldGFpbHMtZGlzcGxheScpO1xuICAgICAgICAgIGV4aXN0aW5nRGlzcGxheXMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gTWFyayB0aGlzIGRpdiBmb3IgcG90ZW50aWFsIGZ1dHVyZSByZW1vdmFsXG4gICAgICAgICAgZGV0YWlsc0Rpdi5jbGFzc0xpc3QuYWRkKCdpbnZvaWNlLWRldGFpbHMtZGlzcGxheScpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEFkZCB0byB0aGUgY2hhdCBjb250YWluZXJcbiAgICAgICAgICBjaGF0Q29udGFpbmVyLmFwcGVuZENoaWxkKGRldGFpbHNEaXYpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFNjcm9sbCB0byBtYWtlIHRoZSBkZXRhaWxzIHZpc2libGVcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGRldGFpbHNEaXYuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnbmVhcmVzdCcgfSk7XG4gICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52b2ljZSBkYXRhIGlzIGluY29tcGxldGUgb3IgaW52YWxpZDonLCBpbnZvaWNlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW52b2ljZSBkZXRhaWxzOicsIGVycm9yKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQXV0by1sb2FkIHRoZSBpbnZvaWNlIHBhbmVsIGlmIGFuIGludm9pY2UgaXMgbWVudGlvbmVkXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGF1dG9Mb2FkSW52b2ljZSAmJiAhaXNJbnZvaWNlUGFuZWxPcGVuICYmIG9uVG9nZ2xlSW52b2ljZVBhbmVsKSB7XG4gICAgICBjb25zb2xlLmxvZygnQXV0by1vcGVuaW5nIGludm9pY2UgcGFuZWwgZHVlIHRvIGludm9pY2UgbWVudGlvbicpO1xuICAgICAgb25Ub2dnbGVJbnZvaWNlUGFuZWwodHJ1ZSk7XG4gICAgICBzZXRBdXRvTG9hZEludm9pY2UoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2F1dG9Mb2FkSW52b2ljZSwgaXNJbnZvaWNlUGFuZWxPcGVuLCBvblRvZ2dsZUludm9pY2VQYW5lbF0pO1xuXG4gIGNvbnN0IGhhbmRsZUZvcm1TdWJtaXQgPSAoZTogUmVhY3QuRm9ybUV2ZW50PEhUTUxGb3JtRWxlbWVudD4pID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCFpbnB1dC50cmltKCkpIHtcbiAgICAgIHNldFNob3dFcnJvcih0cnVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVzZXQgZXJyb3Igc3RhdGVzXG4gICAgc2V0U2hvd0Vycm9yKGZhbHNlKTtcbiAgICBzZXRBcGlFcnJvcihudWxsKTtcbiAgICBcbiAgICAvLyBMb29rIGZvciBpbnZvaWNlIHJlZmVyZW5jZXMgYmVmb3JlIHN1Ym1pc3Npb25cbiAgICBjb25zdCBpbnZvaWNlUGF0dGVybnMgPSBbXG4gICAgICAvXFxiKGludm9pY2V8aW52KVsuXFwtXyAjXSooXFxkKylcXGIvZ2ksXG4gICAgICAvaW52b2ljZVxccytpZFtcXHM6I10qKFxcZCspL2dpLFxuICAgIF07XG4gICAgXG4gICAgbGV0IGhhc0ludm9pY2VSZWZlcmVuY2UgPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgaW52b2ljZVBhdHRlcm5zKSB7XG4gICAgICBpZiAocGF0dGVybi50ZXN0KGlucHV0KSkge1xuICAgICAgICBoYXNJbnZvaWNlUmVmZXJlbmNlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIElmIHRoZXJlJ3MgYW4gaW52b2ljZSByZWZlcmVuY2UsIGFkZCBhIGhpbnQgdG8gdGhlIEFJIGFib3V0IHVzaW5nIHRvb2xzXG4gICAgaWYgKGhhc0ludm9pY2VSZWZlcmVuY2UgJiYgb25TZWxlY3RJbnZvaWNlKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkRldGVjdGVkIGludm9pY2UgcmVmZXJlbmNlIGluIHF1ZXJ5LCBhZGRpbmcgdG9vbCBoaW50XCIpO1xuICAgICAgLy8gVGhpcyBpcyBqdXN0IGEgY2xpZW50LXNpZGUgbG9nLCB3b24ndCBtb2RpZnkgdGhlIGFjdHVhbCBwcm9tcHRcbiAgICB9XG4gICAgXG4gICAgLy8gU3VibWl0IHRoZSBmb3JtXG4gICAgaGFuZGxlU3VibWl0KGUpO1xuICB9O1xuICBcbiAgY29uc3QgaGFuZGxlUmV0cnkgPSAoKSA9PiB7XG4gICAgc2V0SXNSZXRyeWluZyh0cnVlKTtcbiAgICBzZXRBcGlFcnJvcihudWxsKTtcbiAgICBcbiAgICAvLyBBdHRlbXB0IHRvIHJlbG9hZCB0aGUgY29udmVyc2F0aW9uXG4gICAgcmVsb2FkKCk7XG4gICAgXG4gICAgLy8gUmVzZXQgcmV0cnkgc3RhdGUgYWZ0ZXIgYSBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgc2V0SXNSZXRyeWluZyhmYWxzZSk7XG4gICAgfSwgMTAwMCk7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHRvb2wgaW52b2NhdGlvbnMgaWYgcHJlc2VudFxuICBjb25zdCByZW5kZXJUb29sSW52b2NhdGlvbnMgPSAobWVzc2FnZTogRXh0ZW5kZWRNZXNzYWdlKSA9PiB7XG4gICAgaWYgKCFtZXNzYWdlLnRvb2xJbnZvY2F0aW9ucyB8fCBtZXNzYWdlLnRvb2xJbnZvY2F0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgYm9yZGVyLXQgcHQtMiB0ZXh0LXhzIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSBtYi0xXCI+VG9vbCBDYWxsczo8L2Rpdj5cbiAgICAgICAge21lc3NhZ2UudG9vbEludm9jYXRpb25zLm1hcCgodG9vbDogVG9vbEludm9jYXRpb24sIGlkeDogbnVtYmVyKSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPVwibWItMlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1lZGl1bSB0ZXh0LWJsdWUtNjAwXCI+XG4gICAgICAgICAgICAgIHt0b29sLm5hbWV9IFxuICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwIGZvbnQtbm9ybWFsXCI+IHdpdGggYXJnczo8L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxwcmUgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQgdGV4dC14cyBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgICAgICAgIHtKU09OLnN0cmluZ2lmeSh0b29sLmFyZ3VtZW50cywgbnVsbCwgMil9XG4gICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAge3Rvb2wucmVzdWx0ICYmIChcbiAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtZ3JlZW4tNjAwIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDAgZm9udC1ub3JtYWxcIj5SZXN1bHQ6PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxwcmUgY2xhc3NOYW1lPVwiYmctZ3JheS0xMDAgcC0xIHJvdW5kZWQgdGV4dC14cyBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgICAgICAgICAgICB7dHlwZW9mIHRvb2wucmVzdWx0ID09PSAnc3RyaW5nJyBcbiAgICAgICAgICAgICAgICAgICAgPyB0b29sLnJlc3VsdCBcbiAgICAgICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeSh0b29sLnJlc3VsdCwgbnVsbCwgMil9XG4gICAgICAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSl9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIC8vIEFkZCBhIGZ1bmN0aW9uIHRvIGZvcm1hdCBpbnZvaWNlIG1lc3NhZ2VzIGluIGNoYXQgdGhhdCBoYW5kbGVzIGJvdGggZm9ybWF0c1xuICBjb25zdCBmb3JtYXRJbnZvaWNlTWVzc2FnZSA9IChjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAvLyBTa2lwIGlmIGFscmVhZHkgZm9ybWF0dGVkIHdpdGggSFRNTFxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCc8ZGl2IGNsYXNzPVwiYmctYmx1ZS01MCcpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJzxoMyBjbGFzcz1cInRleHQtbGcgZm9udC1tZWRpdW0gdGV4dC1ibHVlLTgwMFwiPicpKSB7XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBpbnZvaWNlIGRldGFpbHMgbWVzc2FnZSAtIG1vcmUgY29tcHJlaGVuc2l2ZSBjaGVja1xuICAgIGNvbnN0IGlzSW52b2ljZURldGFpbHMgPSBjb250ZW50LmluY2x1ZGVzKCdJbnZvaWNlICMnKSAmJiAoXG4gICAgICAvLyBDaGVjayBmb3IgZWl0aGVyIGZvcm1hdCBvZiBjdXN0b21lciBpbmZvXG4gICAgICAoY29udGVudC5pbmNsdWRlcygnQ3VzdG9tZXI6JykgfHwgY29udGVudC5pbmNsdWRlcygnXFxuQ3VzdG9tZXJcXG4nKSkgJiZcbiAgICAgIC8vIENoZWNrIGZvciBlaXRoZXIgZm9ybWF0IG9mIGFtb3VudFxuICAgICAgKGNvbnRlbnQuaW5jbHVkZXMoJ0Ftb3VudDonKSB8fCBjb250ZW50LmluY2x1ZGVzKCdcXG5BbW91bnRcXG4nKSlcbiAgICApO1xuICAgIFxuICAgIGlmICghaXNJbnZvaWNlRGV0YWlscykge1xuICAgICAgcmV0dXJuIGNvbnRlbnQ7IC8vIFJldHVybiB1bmNoYW5nZWQgaWYgbm90IGFuIGludm9pY2UgZGV0YWlscyBtZXNzYWdlXG4gICAgfVxuICAgIFxuICAgIC8vIFNwbGl0IGludG8gbGluZXMgYW5kIGZvcm1hdCBlYWNoIGxpbmVcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgaW52b2ljZSBkZXRhaWxzIC0gaGFuZGxlIGJvdGggZm9ybWF0c1xuICAgIGxldCBpbnZvaWNlTnVtYmVyID0gJyc7XG4gICAgbGV0IGN1c3RvbWVyID0gJyc7XG4gICAgbGV0IGFtb3VudCA9ICcnO1xuICAgIGxldCBkYXRlID0gJyc7XG4gICAgbGV0IGR1ZURhdGUgPSAnJztcbiAgICBsZXQgc3RhdHVzID0gJyc7XG4gICAgbGV0IGJhbGFuY2UgPSAnJztcbiAgICBcbiAgICAvLyBGaXJzdCBwYXNzIC0gbG9vayBmb3Igc3RhbmRhcmQgZm9ybWF0IChGaWVsZDogdmFsdWUpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCBpbnZvaWNlIG51bWJlciBmcm9tIHRoZSBmaXJzdCBsaW5lIHRoYXQgbWVudGlvbnMgXCJJbnZvaWNlICNcIlxuICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ0ludm9pY2UgIycpKSB7XG4gICAgICAgIGludm9pY2VOdW1iZXIgPSBsaW5lLnJlcGxhY2UoJ0ludm9pY2UgIycsICcnKS50cmltKCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE1hdGNoIGxpbmVzIHdpdGggZmllbGQgbGFiZWxzIGZvbGxvd2VkIGJ5IGNvbG9uXG4gICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdDdXN0b21lcjonKSkge1xuICAgICAgICBjdXN0b21lciA9IGxpbmUucmVwbGFjZSgnQ3VzdG9tZXI6JywgJycpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCdBbW91bnQ6JykpIHtcbiAgICAgICAgYW1vdW50ID0gbGluZS5yZXBsYWNlKCdBbW91bnQ6JywgJycpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCdEYXRlOicpKSB7XG4gICAgICAgIGRhdGUgPSBsaW5lLnJlcGxhY2UoJ0RhdGU6JywgJycpLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAobGluZS5zdGFydHNXaXRoKCdEdWUgRGF0ZTonKSkge1xuICAgICAgICBkdWVEYXRlID0gbGluZS5yZXBsYWNlKCdEdWUgRGF0ZTonLCAnJykudHJpbSgpO1xuICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ1N0YXR1czonKSkge1xuICAgICAgICBzdGF0dXMgPSBsaW5lLnJlcGxhY2UoJ1N0YXR1czonLCAnJykudHJpbSgpO1xuICAgICAgfSBlbHNlIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ0JhbGFuY2UgRHVlOicpKSB7XG4gICAgICAgIGJhbGFuY2UgPSBsaW5lLnJlcGxhY2UoJ0JhbGFuY2UgRHVlOicsICcnKS50cmltKCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIFNlY29uZCBwYXNzIC0gbG9vayBmb3IgYWx0ZXJuYXRlIGZvcm1hdCAoRmllbGRcXG52YWx1ZSlcbiAgICBpZiAoIWN1c3RvbWVyIHx8ICFhbW91bnQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2ldLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExvb2sgZm9yIGZpZWxkIG5hbWVzIG9uIHRoZWlyIG93biBsaW5lIGFuZCBncmFiIHRoZSBuZXh0IGxpbmVcbiAgICAgICAgaWYgKGxpbmUgPT09ICdDdXN0b21lcicgJiYgaSArIDEgPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICBjdXN0b21lciA9IGxpbmVzW2kgKyAxXS50cmltKCk7XG4gICAgICAgIH0gZWxzZSBpZiAobGluZSA9PT0gJ0Ftb3VudCcgJiYgaSArIDEgPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICBhbW91bnQgPSBsaW5lc1tpICsgMV0udHJpbSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGxpbmUgPT09ICdEYXRlJyAmJiBpICsgMSA8IGxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgIGRhdGUgPSBsaW5lc1tpICsgMV0udHJpbSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGxpbmUgPT09ICdEdWUgRGF0ZScgJiYgaSArIDEgPCBsaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICBkdWVEYXRlID0gbGluZXNbaSArIDFdLnRyaW0oKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaW5lID09PSAnQmFsYW5jZSBEdWUnICYmIGkgKyAxIDwgbGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgYmFsYW5jZSA9IGxpbmVzW2kgKyAxXS50cmltKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSWYgbm90IGV4cGxpY2l0bHkgc2V0LCBkZXRlcm1pbmUgaWYgcGFpZCBiYXNlZCBvbiBjb250ZW50XG4gICAgaWYgKCFzdGF0dXMpIHtcbiAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCdQYWlkJykgJiYgIWNvbnRlbnQuaW5jbHVkZXMoJ1VucGFpZCcpKSB7XG4gICAgICAgIHN0YXR1cyA9ICdQYWlkJztcbiAgICAgIH0gZWxzZSBpZiAoY29udGVudC5pbmNsdWRlcygnVW5wYWlkJykpIHtcbiAgICAgICAgc3RhdHVzID0gJ1VucGFpZCc7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIElmIHdlIGhhdmUgZW5vdWdoIGluZm8sIGZvcm1hdCBuaWNlbHlcbiAgICBpZiAoaW52b2ljZU51bWJlciAmJiAoY3VzdG9tZXIgfHwgYW1vdW50KSkge1xuICAgICAgLy8gRGV0ZXJtaW5lIHBhaWQgc3RhdHVzIC0gZmFsbGJhY2sgdG8gYmFsYW5jZSBjaGVjayBpZiBzdGF0dXMgbm90IGV4cGxpY2l0XG4gICAgICBjb25zdCBpc1BhaWQgPSBzdGF0dXMgPT09ICdQYWlkJyB8fCBcbiAgICAgICAgICAgICAgICAgICAgIChiYWxhbmNlICYmIGJhbGFuY2UuaW5jbHVkZXMoJyQwLjAwJykpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgKGJhbGFuY2UgPT09ICcnICYmIGNvbnRlbnQuaW5jbHVkZXMoJ1BhaWQnKSAmJiAhY29udGVudC5pbmNsdWRlcygnVW5wYWlkJykpO1xuICAgICAgXG4gICAgICAvLyBGb3JtYXQgdGhlIGludm9pY2UgZGV0YWlscyBuaWNlbHlcbiAgICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJiZy1ibHVlLTUwIHAtNCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgbXktMyBzaGFkb3ctc21cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDBcIj5JbnZvaWNlICMke2ludm9pY2VOdW1iZXJ9PC9oMz5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHgtMiBweS0xIGJnLSR7aXNQYWlkID8gJ2dyZWVuJyA6ICdvcmFuZ2UnfS0xMDAgdGV4dC0ke2lzUGFpZCA/ICdncmVlbicgOiAnb3JhbmdlJ30tODAwIHRleHQtc20gcm91bmRlZC1mdWxsXCI+XG4gICAgICAgICAgICAgICR7c3RhdHVzIHx8IChpc1BhaWQgPyAnUGFpZCcgOiAnVW5wYWlkJyl9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cImdyaWQgbWQ6Z3JpZC1jb2xzLTIgZ2FwLTQgbXQtM1wiPlxuICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPkN1c3RvbWVyPC9oND5cbiAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwXCI+JHtjdXN0b21lciB8fCAnVW5rbm93bid9PC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJncmlkIGdyaWQtY29scy0yIGdhcC0yXCI+XG4gICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImZvbnQtbWVkaXVtIHRleHQtZ3JheS03MDBcIj5BbW91bnQ8L2g0PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwXCI+JHthbW91bnQgfHwgJ05vdCBzcGVjaWZpZWQnfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkeyghaXNQYWlkICYmIGJhbGFuY2UpID8gYFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+QmFsYW5jZSBEdWU8L2g0PlxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XCJ0ZXh0LWdyYXktODAwIGZvbnQtbWVkaXVtIHRleHQtb3JhbmdlLTYwMFwiPiR7YmFsYW5jZX08L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwXCI+RGF0ZTwvaDQ+XG4gICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtZ3JheS04MDBcIj4ke2RhdGUgfHwgJ05vdCBzcGVjaWZpZWQnfTwvcD5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMFwiPkR1ZSBEYXRlPC9oND5cbiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1ncmF5LTgwMFwiPiR7ZHVlRGF0ZSB8fCAnTm90IHNwZWNpZmllZCd9PC9wPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICBcbiAgICAgIHJldHVybiBmb3JtYXR0ZWRDb250ZW50O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY29udGVudDsgLy8gSWYgd2UgY2FuJ3QgZXh0cmFjdCBlbm91Z2ggZGF0YSwgcmV0dXJuIHRoZSBvcmlnaW5hbCBjb250ZW50XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIG1lc3NhZ2UgY29udGVudCB3aXRoIGludm9pY2UgZm9ybWF0dGluZ1xuICBjb25zdCByZW5kZXJNZXNzYWdlQ29udGVudCA9IChtZXNzYWdlOiBNZXNzYWdlKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSBmb3JtYXRJbnZvaWNlTWVzc2FnZShtZXNzYWdlLmNvbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyBJZiB3ZSBkZXRlY3RlZCBhbiBpbnZvaWNlIGluIHRoZSBtZXNzYWdlLCBjaGVjayBpZiB3ZSBzaG91bGQgcHJldmVudCBhdXRvLWxvYWRpbmdcbiAgICAgIGNvbnN0IGhhc0ludm9pY2VGb3JtYXR0ZWQgPSBmb3JtYXR0ZWRDb250ZW50ICE9PSBtZXNzYWdlLmNvbnRlbnQgJiYgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZENvbnRlbnQuaW5jbHVkZXMoJ0ludm9pY2UgIycpICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdEludm9pY2U7XG5cbiAgICAgIC8vIEp1c3QgcmV0dXJuIHRoZSBmb3JtYXR0ZWQgY29udGVudCAtIGRvbid0IGNhbGwgaG9va3MgY29uZGl0aW9uYWxseSAgICAgIFxuICAgICAgcmV0dXJuIDxkaXYgXG4gICAgICAgIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXt7IF9faHRtbDogZm9ybWF0dGVkQ29udGVudCB9fVxuICAgICAgICBjbGFzc05hbWU9e2hhc0ludm9pY2VGb3JtYXR0ZWQgPyBcImZvcm1hdHRlZC1pbnZvaWNlXCIgOiBcIlwifVxuICAgICAgICBkYXRhLWhhcy1pbnZvaWNlPXtoYXNJbnZvaWNlRm9ybWF0dGVkID8gXCJ0cnVlXCIgOiBcImZhbHNlXCJ9XG4gICAgICA+PC9kaXY+O1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbWVzc2FnZS5jb250ZW50O1xuICB9O1xuXG4gIC8vIENoZWNrIGZvciBmb3JtYXR0ZWQgaW52b2ljZXMgaW4gYXNzaXN0YW50IG1lc3NhZ2VzIGFuZCBwcmV2ZW50IGF1dG8tbG9hZGluZ1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEdldCBsYXN0IGFzc2lzdGFudCBtZXNzYWdlXG4gICAgY29uc3QgbGFzdEFzc2lzdGFudE1lc3NhZ2UgPSBtZXNzYWdlc1xuICAgICAgLmZpbHRlcihtID0+IG0ucm9sZSA9PT0gJ2Fzc2lzdGFudCcpXG4gICAgICAucG9wKCk7XG4gICAgICBcbiAgICBpZiAobGFzdEFzc2lzdGFudE1lc3NhZ2UpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgbWVzc2FnZSBjb250YWlucyBhIGZvcm1hdHRlZCBpbnZvaWNlXG4gICAgICBjb25zdCBjb250ZW50ID0gbGFzdEFzc2lzdGFudE1lc3NhZ2UuY29udGVudDtcbiAgICAgIGNvbnN0IGlzRm9ybWF0dGVkID0gY29udGVudC5pbmNsdWRlcygnPGRpdiBjbGFzcz1cImJnLWJsdWUtNTAnKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LmluY2x1ZGVzKCc8aDMgY2xhc3M9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDBcIj4nKTtcbiAgICAgIGNvbnN0IGhhc0ludm9pY2UgPSBjb250ZW50LmluY2x1ZGVzKCdJbnZvaWNlICMnKSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgKGNvbnRlbnQuaW5jbHVkZXMoJ0N1c3RvbWVyOicpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ0N1c3RvbWVyXFxuJykpICYmXG4gICAgICAgICAgICAgICAgICAgICAgIChjb250ZW50LmluY2x1ZGVzKCdBbW91bnQ6JykgfHwgY29udGVudC5pbmNsdWRlcygnQW1vdW50XFxuJykpO1xuICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgIGlmIChpc0Zvcm1hdHRlZCAmJiBoYXNJbnZvaWNlICYmIG9uU2VsZWN0SW52b2ljZSkge1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgYSBmb3JtYXR0ZWQgaW52b2ljZSwgZG9uJ3QgYXV0by1mZXRjaFxuICAgICAgICBzZXRBdXRvTG9hZEludm9pY2UoZmFsc2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgW21lc3NhZ2VzLCBvblNlbGVjdEludm9pY2VdKTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggZmxleC1jb2wgYmctd2hpdGUgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWdyYXktMjAwIHNoYWRvdy1tZCBvdmVyZmxvdy1oaWRkZW5cIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JhZGllbnQtdG8tciBmcm9tLWJsdWUtNjAwIHRvLWluZGlnby03MDAgcHgtNiBweS00IGJvcmRlci1iIGJvcmRlci1ncmF5LTIwMFwiPlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC13aGl0ZVwiPkFJIEludm9pY2UgQXNzaXN0YW50PC9oMj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ibHVlLTEwMCB0ZXh0LXNtXCI+QXNrIHF1ZXN0aW9ucyBhYm91dCB5b3VyIGludm9pY2VzIGFuZCBmaW5hbmNpYWwgZGF0YTwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBvdmVyZmxvdy15LWF1dG8gcC02IHNwYWNlLXktNiBib3JkZXItbCBib3JkZXItciBib3JkZXItZ3JheS0yMDAgYmctZ3JheS01MFwiIGlkPVwiY2hhdC1tZXNzYWdlcy1jb250YWluZXJcIj5cbiAgICAgICAgey8qIEFQSSBQcm92aWRlciBCYWRnZSAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBtYi0yXCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LXhzIHB4LTIgcHktMSBiZy1ibHVlLTEwMCB0ZXh0LWJsdWUtODAwIHJvdW5kZWQtZnVsbFwiPlxuICAgICAgICAgICAgVXNpbmcge3VzZUdyb3EgPyAnR3JvcSBBSScgOiAnT3BlbkFJJ30gXG4gICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJtbC0yIHRleHQtYmx1ZS02MDAgaG92ZXI6dGV4dC1ibHVlLTgwMCBmb2N1czpvdXRsaW5lLW5vbmVcIlxuICAgICAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVQcm92aWRlcn1cbiAgICAgICAgICAgICAgdGl0bGU9XCJTd2l0Y2ggQUkgcHJvdmlkZXJcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICDin7NcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBvbkNsaWNrPXtyZXNldENoYXR9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ0ZXh0LXhzIHB4LTIgcHktMSBiZy1ncmF5LTEwMCB0ZXh0LWdyYXktNzAwIHJvdW5kZWQtZnVsbCBob3ZlcjpiZy1ncmF5LTIwMFwiXG4gICAgICAgICAgICB0aXRsZT1cIlJlc2V0IGNoYXRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIFJlc2V0IENoYXRcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICB7LyogRXJyb3IgQWxlcnQgd2l0aCBtb3JlIGRldGFpbHMgKi99XG4gICAgICAgIHthcGlFcnJvciAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHRleHQtcmVkLTcwMCBweC00IHB5LTMgcm91bmRlZCByZWxhdGl2ZSBtYi00XCIgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXhcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJweS0xXCI+XG4gICAgICAgICAgICAgICAgPHN2ZyBjbGFzc05hbWU9XCJmaWxsLWN1cnJlbnQgaC02IHctNiB0ZXh0LXJlZC01MDAgbXItNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTIuOTMgMTcuMDdBMTAgMTAgMCAxIDEgMTcuMDcgMi45MyAxMCAxMCAwIDAgMSAyLjkzIDE3LjA3em0xMi43My0xLjQxQTggOCAwIDEgMCA0LjM0IDQuMzRhOCA4IDAgMCAwIDExLjMyIDExLjMyek05IDExVjloMnY2SDl2LTR6bTAtNmgydjJIOVY1elwiLz5cbiAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1ib2xkXCI+Q29ubmVjdGlvbiBFcnJvcjwvcD5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtXCI+e2FwaUVycm9yfTwvcD5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlUmV0cnl9IFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXQtMiBiZy1yZWQtMTAwIGhvdmVyOmJnLXJlZC0yMDAgdGV4dC1yZWQtODAwIGZvbnQtYm9sZCBweS0xIHB4LTIgcm91bmRlZCB0ZXh0LXhzIGlubGluZS1mbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgVHJ5IGFnYWluXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAge21lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IChcbiAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICBrZXk9e2luZGV4fVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCAke1xuICAgICAgICAgICAgICBtZXNzYWdlLnJvbGUgPT09ICd1c2VyJyA/ICdqdXN0aWZ5LWVuZCcgOiAnanVzdGlmeS1zdGFydCdcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgcm91bmRlZC1sZyBweC02IHB5LTQgbWF4LXctWzgwJV0gc2hhZG93LXNtICR7XG4gICAgICAgICAgICAgICAgbWVzc2FnZS5yb2xlID09PSAndXNlcidcbiAgICAgICAgICAgICAgICAgID8gJ2JnLWJsdWUtNTAwIHRleHQtd2hpdGUnXG4gICAgICAgICAgICAgICAgICA6ICdiZy13aGl0ZSBib3JkZXIgYm9yZGVyLWdyYXktMjAwJ1xuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3JlbmRlck1lc3NhZ2VDb250ZW50KG1lc3NhZ2UpfVxuICAgICAgICAgICAgICB7bWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50JyAmJiB0b29sU3RhdGUuaXNFeGVjdXRpbmcgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgIEV4ZWN1dGluZyB7dG9vbFN0YXRlLmN1cnJlbnRUb29sfS4uLlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICB7bWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50JyAmJiByZW5kZXJUb29sSW52b2NhdGlvbnMobWVzc2FnZSBhcyBFeHRlbmRlZE1lc3NhZ2UpfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgICBcbiAgICAgICAge2lzTG9hZGluZyAmJiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktc3RhcnRcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm91bmRlZC1sZyBweC02IHB5LTQgYmctd2hpdGUgYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBzaGFkb3ctc21cIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctYmx1ZS00MDAgYW5pbWF0ZS1ib3VuY2VcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctMiBoLTIgcm91bmRlZC1mdWxsIGJnLWJsdWUtNDAwIGFuaW1hdGUtYm91bmNlIGRlbGF5LTE1MFwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidy0yIGgtMiByb3VuZGVkLWZ1bGwgYmctYmx1ZS00MDAgYW5pbWF0ZS1ib3VuY2UgZGVsYXktMzAwXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIFxuICAgICAgICB7LyogSGVscCBtZXNzYWdlIGlmIG5vIG1lc3NhZ2VzIHlldCAqL31cbiAgICAgICAge21lc3NhZ2VzLmxlbmd0aCA9PT0gMCAmJiAhaXNMb2FkaW5nICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtY2VudGVyIHRleHQtZ3JheS01MDAgcC02IGJnLWJsdWUtNTAgcm91bmRlZC1sZyBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIHNoYWRvdy1zbVwiPlxuICAgICAgICAgICAgPHN2ZyBcbiAgICAgICAgICAgICAgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIFxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTEyIHctMTIgbXgtYXV0byB0ZXh0LWJsdWUtNDAwIG1iLTRcIiBcbiAgICAgICAgICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgICAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgICAgICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8cGF0aCBcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBcbiAgICAgICAgICAgICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg9ezEuNX0gXG4gICAgICAgICAgICAgICAgZD1cIk04IDEwaC4wMU0xMiAxMGguMDFNMTYgMTBoLjAxTTkgMTZINWEyIDIgMCAwMS0yLTJWNmEyIDIgMCAwMTItMmgxNGEyIDIgMCAwMTIgMnY4YTIgMiAwIDAxLTIgMmgtNWwtNSA1di01elwiXG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtbWVkaXVtIHRleHQtYmx1ZS04MDAgbWItMlwiPkhvdyBjYW4gSSBoZWxwIHlvdSB0b2RheT88L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibWItNFwiPkFzayBtZSBhbnl0aGluZyBhYm91dCB5b3VyIGludm9pY2VzIG9yIGZpbmFuY2lhbCBkYXRhLjwvcD5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBzbTpncmlkLWNvbHMtMiBnYXAtMiBtYXgtdy1sZyBteC1hdXRvIHRleHQtbGVmdFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgXCJTaG93IG1lIGludm9pY2UgIzEwMDFcIlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSBwLTMgcm91bmRlZC1tZCBib3JkZXIgYm9yZGVyLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAgdGV4dC1zbVwiPlxuICAgICAgICAgICAgICAgIFwiU3VtbWFyaXplIHVucGFpZCBpbnZvaWNlc1wiXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgXCJXaGljaCBjdXN0b21lciBvd2VzIHRoZSBtb3N0P1wiXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHAtMyByb3VuZGVkLW1kIGJvcmRlciBib3JkZXItYmx1ZS0xMDAgdGV4dC1ibHVlLTgwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgICAgICAgXCJXaGF0IHdhcyBteSByZXZlbnVlIGxhc3QgbW9udGg/XCJcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlRm9ybVN1Ym1pdH0gY2xhc3NOYW1lPVwicC02IGJvcmRlci10IGJvcmRlci1ncmF5LTIwMCBiZy13aGl0ZVwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgc3BhY2UteS00XCI+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtNFwiPlxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIGlkPVwiY2hhdC1pbnB1dFwiXG4gICAgICAgICAgICAgIHZhbHVlPXtpbnB1dH1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUlucHV0Q2hhbmdlfVxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIkFzayBhYm91dCB5b3VyIGludm9pY2VzLi4uXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xIHB4LTYgcHktNCBib3JkZXIgcm91bmRlZC1sZyBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIHRleHQtbGcgJHtcbiAgICAgICAgICAgICAgICBzaG93RXJyb3IgJiYgIWlucHV0LnRyaW0oKSA/ICdib3JkZXItcmVkLTUwMCBmb2N1czpyaW5nLXJlZC01MDAnIDogJ2JvcmRlci1ncmF5LTMwMCBmb2N1czpyaW5nLWJsdWUtNTAwJ1xuICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZyB8fCB0b29sU3RhdGUuaXNFeGVjdXRpbmd9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICB0eXBlPVwic3VibWl0XCJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZyB8fCB0b29sU3RhdGUuaXNFeGVjdXRpbmcgfHwgIWlucHV0LnRyaW0oKX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNiBweS00IGJnLWJsdWUtNjAwIHRleHQtd2hpdGUgcm91bmRlZC1sZyBob3ZlcjpiZy1ibHVlLTcwMCBkaXNhYmxlZDpvcGFjaXR5LTUwIHRleHQtbGcgdHJhbnNpdGlvbi1jb2xvcnMgZHVyYXRpb24tMTUwIHNoYWRvdy1zbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFNlbmRcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIHtzaG93RXJyb3IgJiYgIWlucHV0LnRyaW0oKSAmJiAoXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTUwMFwiPlBsZWFzZSBlbnRlciBhIG1lc3NhZ2U8L3A+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Zvcm0+XG4gICAgPC9kaXY+XG4gICk7XG59ICJdLCJuYW1lcyI6WyJ1c2VDaGF0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJSZWFjdCIsIkFJQ2hhdCIsIm9uU2VsZWN0SW52b2ljZSIsIm9uVG9nZ2xlSW52b2ljZVBhbmVsIiwiaXNJbnZvaWNlUGFuZWxPcGVuIiwidG9vbFN0YXRlIiwic2V0VG9vbFN0YXRlIiwiaXNFeGVjdXRpbmciLCJjdXJyZW50VG9vbCIsImxhc3RSZXN1bHQiLCJzaG93RXJyb3IiLCJzZXRTaG93RXJyb3IiLCJhcGlFcnJvciIsInNldEFwaUVycm9yIiwiaXNSZXRyeWluZyIsInNldElzUmV0cnlpbmciLCJ1c2VHcm9xIiwic2V0VXNlR3JvcSIsImFwaUVuZHBvaW50Iiwic2V0QXBpRW5kcG9pbnQiLCJhdHRlbXB0ZWRQcm92aWRlcnMiLCJzZXRBdHRlbXB0ZWRQcm92aWRlcnMiLCJTZXQiLCJhdXRvTG9hZEludm9pY2UiLCJzZXRBdXRvTG9hZEludm9pY2UiLCJyZXNldENoYXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsIm1lc3NhZ2VzIiwiaW5wdXQiLCJoYW5kbGVJbnB1dENoYW5nZSIsImhhbmRsZVN1Ym1pdCIsImlzTG9hZGluZyIsImVycm9yIiwiYXBpIiwib25SZXNwb25zZSIsInJlc3BvbnNlIiwib2siLCJwcmV2IiwibmV3U2V0IiwiYWRkIiwianNvbiIsInRoZW4iLCJlcnJvckRhdGEiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsIm9uRmluaXNoIiwibWVzc2FnZSIsIm9uRXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsInRvZ2dsZVByb3ZpZGVyIiwiaGFzIiwibGVuZ3RoIiwibGFzdE1lc3NhZ2UiLCJyb2xlIiwiaW52b2ljZVBhdHRlcm5zIiwiaW52b2ljZUlkIiwicGF0dGVybiIsIm1hdGNoZXMiLCJBcnJheSIsImZyb20iLCJjb250ZW50IiwibWF0Y2hBbGwiLCJtYXRjaCIsImkiLCJ0ZXN0IiwiZmV0Y2hJbnZvaWNlRGV0YWlscyIsImxhc3RVc2VyTWVzc2FnZSIsImZpbHRlciIsIm0iLCJwb3AiLCJpc0V4cGxpY2l0SW52b2ljZVJlcXVlc3QiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiZXhpc3RpbmdJbnZvaWNlSW5mb0luQ2hhdCIsInNvbWUiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRvb2wiLCJwYXJhbXMiLCJpZCIsInJlc3VsdCIsImF1dGhNZXNzYWdlSHRtbCIsImF1dGhEaXYiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lckhUTUwiLCJjaGF0Q29udGFpbmVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJhcHBlbmRDaGlsZCIsInNldFRpbWVvdXQiLCJzY3JvbGxJbnRvVmlldyIsImJlaGF2aW9yIiwiYmxvY2siLCJpbnZvaWNlIiwiZGF0YSIsIklkIiwiRG9jTnVtYmVyIiwiaW52b2ljZU51bWJlciIsInN0YW5kYXJkSW52b2ljZSIsIm51bWJlciIsImN1c3RvbWVyTmFtZSIsIkN1c3RvbWVyUmVmIiwibmFtZSIsImFtb3VudCIsIlRvdGFsQW10IiwiYmFsYW5jZSIsIkJhbGFuY2UiLCJ1bmRlZmluZWQiLCJkYXRlIiwiVHhuRGF0ZSIsImR1ZURhdGUiLCJEdWVEYXRlIiwibWVtbyIsIlByaXZhdGVOb3RlIiwiQ3VzdG9tZXJNZW1vIiwidmFsdWUiLCJmb3JtYXRDdXJyZW5jeSIsIm51bWVyaWNBbW91bnQiLCJwYXJzZUZsb2F0IiwidG9GaXhlZCIsImZvcm1hdERhdGUiLCJkYXRlU3RyIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsInllYXIiLCJtb250aCIsImRheSIsImUiLCJiaWxsaW5nQWRkcmVzcyIsIkJpbGxBZGRyIiwiYmlsbEFkZHIiLCJhZGRyZXNzTGluZTEiLCJMaW5lMSIsImxpbmUxIiwiYWRkcmVzc0xpbmUyIiwiTGluZTIiLCJsaW5lMiIsImNpdHkiLCJDaXR5Iiwic3RhdGUiLCJDb3VudHJ5U3ViRGl2aXNpb25Db2RlIiwiemlwIiwiUG9zdGFsQ29kZSIsImZvcm1hdHRlZEFkZHJlc3MiLCJsaW5lIiwidHJpbSIsImpvaW4iLCJpc1BhaWQiLCJpbnZvaWNlRGV0YWlsc0h0bWwiLCJkZXRhaWxzRGl2IiwiZXhpc3RpbmdEaXNwbGF5cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWwiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJoYW5kbGVGb3JtU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJoYXNJbnZvaWNlUmVmZXJlbmNlIiwiaGFuZGxlUmV0cnkiLCJyZW5kZXJUb29sSW52b2NhdGlvbnMiLCJ0b29sSW52b2NhdGlvbnMiLCJkaXYiLCJtYXAiLCJpZHgiLCJzcGFuIiwicHJlIiwiYXJndW1lbnRzIiwiZm9ybWF0SW52b2ljZU1lc3NhZ2UiLCJpc0ludm9pY2VEZXRhaWxzIiwibGluZXMiLCJzcGxpdCIsImN1c3RvbWVyIiwicmVwbGFjZSIsInN0YXJ0c1dpdGgiLCJmb3JtYXR0ZWRDb250ZW50IiwicmVuZGVyTWVzc2FnZUNvbnRlbnQiLCJoYXNJbnZvaWNlRm9ybWF0dGVkIiwiZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwiLCJfX2h0bWwiLCJkYXRhLWhhcy1pbnZvaWNlIiwibGFzdEFzc2lzdGFudE1lc3NhZ2UiLCJpc0Zvcm1hdHRlZCIsImhhc0ludm9pY2UiLCJoMiIsInAiLCJidXR0b24iLCJvbkNsaWNrIiwidGl0bGUiLCJzdmciLCJ4bWxucyIsInZpZXdCb3giLCJwYXRoIiwiZCIsImluZGV4IiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsInN0cm9rZVdpZHRoIiwiaDMiLCJmb3JtIiwib25TdWJtaXQiLCJvbkNoYW5nZSIsInBsYWNlaG9sZGVyIiwiZGlzYWJsZWQiLCJ0eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/AIChat/index.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/InvoicePanel/index.tsx":
/*!***************************************************!*\
  !*** ./src/app/components/InvoicePanel/index.tsx ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ InvoicePanel)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-query */ \"(ssr)/./node_modules/react-query/es/index.js\");\n/* harmony import */ var _QuickbooksConnect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../QuickbooksConnect */ \"(ssr)/./src/app/components/QuickbooksConnect/index.tsx\");\n/* harmony import */ var _lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/quickbooks/api */ \"(ssr)/./src/lib/quickbooks/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\nconst API_BASE_URL = \"http://localhost:3000\" || 0;\nconst DEBUG = true;\n// Helper function to log debug information\nconst debugLog = (...args)=>{\n    if (DEBUG) {\n        console.log(\"[InvoicePanel Debug]\", ...args);\n    }\n};\n// Function to check if QuickBooks is authenticated\nconst checkQuickBooksAuth = async ()=>{\n    try {\n        // First check if we have tokens in localStorage\n        const readyInBrowser = (0,_lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_4__.isQuickBooksReady)();\n        debugLog(\"QuickBooks ready in browser:\", readyInBrowser);\n        if (readyInBrowser) {\n            return true;\n        }\n        // If not, check with the server\n        debugLog(\"Checking QuickBooks auth status with server\");\n        const response = await fetch(`${API_BASE_URL}/api/auth/status`);\n        if (!response.ok) {\n            const errorData = await response.json();\n            debugLog(\"Server auth status check failed:\", errorData);\n            return false;\n        }\n        const data = await response.json();\n        debugLog(\"Server auth status response:\", data);\n        return data.authenticated;\n    } catch (error) {\n        console.error(\"Error checking QuickBooks auth status:\", error);\n        return false;\n    }\n};\nconst fetchInvoices = async ()=>{\n    debugLog(\"Fetching invoices using chat/tool API for consistency\");\n    try {\n        // Use the new centralized endpoint for consistent data\n        const response = await fetch(\"/api/chat/tool\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                tool: \"listInvoices\",\n                params: {}\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`Failed to fetch invoices: ${response.status} ${response.statusText}`);\n        }\n        const data = await response.json();\n        // Handle either direct array response or response with invoices property\n        if (Array.isArray(data)) {\n            return data;\n        } else if (data.invoices && Array.isArray(data.invoices)) {\n            return data.invoices;\n        } else if (data.error) {\n            throw new Error(data.error);\n        } else {\n            throw new Error(\"Invalid response format from server\");\n        }\n    } catch (error) {\n        debugLog(\"Error fetching invoices:\", error);\n        throw error;\n    }\n};\nfunction InvoicePanel({ selectedInvoiceId = null, onSelectInvoice }) {\n    const [filter, setFilter] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [showConnect, setShowConnect] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [errorDetails, setErrorDetails] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasAttemptedAuth, setHasAttemptedAuth] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRefetching, setIsRefetching] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [retryCount, setRetryCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [authSuccess, setAuthSuccess] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [autoLoadAttempted, setAutoLoadAttempted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const initialLoadTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const autoRetryTimer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { data: invoices, isLoading, error, refetch } = (0,react_query__WEBPACK_IMPORTED_MODULE_2__.useQuery)(\"invoices\", fetchInvoices, {\n        retry: 3,\n        retryDelay: (attemptIndex)=>Math.min(1000 * 2 ** attemptIndex, 10000),\n        refetchOnWindowFocus: false,\n        // Always enable the query - it will check auth internally\n        enabled: true,\n        staleTime: 30000,\n        cacheTime: 5 * 60 * 1000,\n        onError: (err)=>{\n            debugLog(\"Query error:\", err);\n            if (err instanceof Error) {\n                debugLog(\"Error message:\", err.message);\n                if (err.message.includes(\"QuickBooks client not initialized\") || err.message.includes(\"authentication failed\")) {\n                    setShowConnect(true);\n                } else if (err.message.includes(\"timed out\")) {\n                    setRetryCount((prev)=>prev + 1);\n                    if (retryCount < 3) {\n                        setTimeout(()=>{\n                            debugLog(\"Retrying after timeout\");\n                            refetch();\n                        }, 2000);\n                    }\n                }\n            }\n            setAutoLoadAttempted(true);\n            // Set up auto-retry after error\n            if (autoRetryTimer.current) {\n                clearTimeout(autoRetryTimer.current);\n            }\n            autoRetryTimer.current = setTimeout(()=>{\n                debugLog(\"Auto-retrying after error\");\n                refetch();\n            }, 5000);\n        },\n        onSuccess: (data)=>{\n            debugLog(\"Query success, received invoices:\", data?.length);\n            setRetryCount(0);\n            setAutoLoadAttempted(true);\n            // Clear any retry timers on success\n            if (autoRetryTimer.current) {\n                clearTimeout(autoRetryTimer.current);\n                autoRetryTimer.current = null;\n            }\n        }\n    });\n    // Force refetch when component mounts to ensure data is fresh\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        debugLog(\"Component mounted, triggering initial fetch\");\n        // Use a shorter delay for the initial fetch\n        setTimeout(()=>{\n            refetch();\n        }, 500);\n        return ()=>{\n            // Cleanup timers on unmount\n            if (initialLoadTimer.current) {\n                clearTimeout(initialLoadTimer.current);\n            }\n            if (autoRetryTimer.current) {\n                clearTimeout(autoRetryTimer.current);\n            }\n        };\n    }, []);\n    // Set up automatic load after authentication\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Clear any existing timers first\n        if (initialLoadTimer.current) {\n            clearTimeout(initialLoadTimer.current);\n        }\n        debugLog(\"Auth state changed. authSuccess:\", authSuccess, \"showConnect:\", showConnect);\n        if (authSuccess && !showConnect) {\n            debugLog(\"Auth success detected, setting up automatic invoice loading\");\n            // Set a timer to load invoices automatically\n            initialLoadTimer.current = setTimeout(()=>{\n                debugLog(\"Auto-loading invoices after auth success\");\n                setAutoLoadAttempted(true);\n                refetch();\n            }, 1000);\n        }\n        // Cleanup function\n        return ()=>{\n            if (initialLoadTimer.current) {\n                clearTimeout(initialLoadTimer.current);\n            }\n        };\n    }, [\n        authSuccess,\n        showConnect,\n        refetch\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        debugLog(\"InvoicePanel mounted or URL params changed\");\n        // Check for auth query params\n        const urlParams = new URLSearchParams(window.location.search);\n        const authStatus = urlParams.get(\"auth\");\n        const errorMessage = urlParams.get(\"message\");\n        const tokenObtained = urlParams.get(\"tokenObtained\");\n        debugLog(\"URL parameters:\", {\n            authStatus,\n            errorMessage,\n            tokenObtained\n        });\n        if (authStatus === \"success\") {\n            debugLog(\"Authentication successful, token obtained:\", tokenObtained);\n            setShowConnect(false); // Hide connect UI after successful auth\n            setHasAttemptedAuth(true);\n            setAuthSuccess(true);\n            // Force an immediate refetch when auth is successful\n            setTimeout(()=>{\n                debugLog(\"Immediately refetching invoices after auth success\");\n                refetch();\n            }, 100);\n            // Remove query params to avoid refreshing on page reload, but after a delay\n            // to allow other components to detect the auth success\n            setTimeout(()=>{\n                debugLog(\"Cleaning up URL params after delay\");\n                window.history.replaceState({}, document.title, window.location.pathname);\n            }, 2000);\n        } else if (authStatus === \"error\" && errorMessage) {\n            console.error(\"Authentication error:\", errorMessage);\n            setErrorDetails(errorMessage);\n            setShowConnect(true);\n            setHasAttemptedAuth(true);\n            setAuthSuccess(false);\n            // Keep the error message available but clean up the URL\n            setTimeout(()=>{\n                debugLog(\"Cleaning up error URL params\");\n                window.history.replaceState({}, document.title, window.location.pathname);\n            }, 2000);\n        } else if (!hasAttemptedAuth) {\n            // Check authentication status if no URL parameters and we haven't attempted auth yet\n            debugLog(\"Checking authentication status\");\n            checkQuickBooksAuth().then((isAuthenticated)=>{\n                debugLog(\"QuickBooks authentication status:\", isAuthenticated);\n                setShowConnect(!isAuthenticated);\n                setAuthSuccess(isAuthenticated);\n                if (isAuthenticated) {\n                    debugLog(\"Already authenticated, scheduling immediate invoice fetch\");\n                    // Force an immediate refetch when already authenticated\n                    setTimeout(()=>{\n                        refetch();\n                    }, 100);\n                }\n                setHasAttemptedAuth(true);\n            });\n        }\n    }, [\n        refetch,\n        hasAttemptedAuth\n    ]);\n    // Check QuickBooks status on mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const checkQuickBooksStatus = async ()=>{\n            try {\n                if (invoices && invoices.length > 0) {\n                    // If we already have invoices, we can skip authentication check\n                    setShowConnect(false);\n                    return;\n                }\n                const isAuthenticated = await checkQuickBooksAuth();\n                if (!isAuthenticated) {\n                    setShowConnect(true);\n                } else {\n                    setShowConnect(false);\n                }\n            } catch (err) {\n                console.error(\"Error checking QuickBooks status:\", err);\n            }\n        };\n        checkQuickBooksStatus();\n    }, [\n        invoices?.length\n    ]);\n    const filteredInvoices = invoices?.filter((invoice)=>invoice.DocNumber.toLowerCase().includes(filter.toLowerCase()) || invoice.CustomerRef.name.toLowerCase().includes(filter.toLowerCase()));\n    // If showing connect UI, render it\n    if (showConnect) {\n        debugLog(\"Rendering QuickbooksConnect component\");\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_QuickbooksConnect__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                initialError: errorDetails\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                lineNumber: 301,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n            lineNumber: 300,\n            columnNumber: 7\n        }, this);\n    }\n    if (isLoading) {\n        debugLog(\"Rendering loading state\");\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex flex-col items-center\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 311,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-4 text-blue-500\",\n                        children: \"Loading QuickBooks invoices...\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 312,\n                        columnNumber: 11\n                    }, this),\n                    retryCount > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>{\n                            debugLog(\"Manual retry button clicked\");\n                            refetch();\n                        },\n                        className: \"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\",\n                        children: \"Retry Loading\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 314,\n                        columnNumber: 13\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                lineNumber: 310,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n            lineNumber: 309,\n            columnNumber: 7\n        }, this);\n    }\n    if (error) {\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error occurred\";\n        debugLog(\"Rendering error state:\", errorMessage);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex flex-col items-center justify-center p-4\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md mb-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-bold text-red-600 mb-2\",\n                        children: \"Error loading invoices\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 336,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-red-600\",\n                        children: errorMessage\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 337,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"mt-4 text-gray-600\",\n                        children: \"Please check your QuickBooks connection or try again.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 338,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 flex flex-col gap-2\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    debugLog(\"Reconnect button clicked\");\n                                    setShowConnect(true);\n                                },\n                                className: \"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 w-full\",\n                                children: \"Connect to QuickBooks\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 340,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>{\n                                    debugLog(\"Retry button clicked\");\n                                    refetch();\n                                },\n                                className: \"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 w-full\",\n                                children: \"Retry Fetch\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 349,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 339,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                lineNumber: 335,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n            lineNumber: 334,\n            columnNumber: 7\n        }, this);\n    }\n    if (!invoices || invoices.length === 0) {\n        debugLog(\"Rendering empty state (no invoices). isLoading:\", isLoading, \"autoLoadAttempted:\", autoLoadAttempted);\n        // Always show the loading indicator for the first few seconds\n        const shouldShowLoading = isLoading || !invoices && Date.now() - new Date().getTime() < 5000;\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full flex items-center justify-center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-blue-50 border border-blue-200 rounded-lg p-4 max-w-md\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                        className: \"text-lg font-bold text-blue-600 mb-2\",\n                        children: \"Invoice Tools\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 373,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600\",\n                        children: \"Select an invoice and tool to analyze your data\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 374,\n                        columnNumber: 11\n                    }, this),\n                    shouldShowLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-4 flex flex-col items-center justify-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-2\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 378,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-blue-600\",\n                                children: \"Invoices are loading automatically...\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 379,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 377,\n                        columnNumber: 13\n                    }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mt-2 text-gray-500\",\n                                children: \"No invoices found in your QuickBooks account.\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 383,\n                                columnNumber: 15\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-4 flex flex-col gap-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            debugLog(\"Reconnect button clicked (empty state)\");\n                                            setShowConnect(true);\n                                        },\n                                        className: \"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 w-full\",\n                                        children: \"Connect to QuickBooks\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                        lineNumber: 385,\n                                        columnNumber: 17\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>{\n                                            debugLog(\"Manual fetch button clicked\");\n                                            setAutoLoadAttempted(false);\n                                            refetch();\n                                        },\n                                        className: \"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 w-full\",\n                                        children: \"Refresh Invoices\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                        lineNumber: 394,\n                                        columnNumber: 17\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 384,\n                                columnNumber: 15\n                            }, this)\n                        ]\n                    }, void 0, true)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                lineNumber: 372,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n            lineNumber: 371,\n            columnNumber: 7\n        }, this);\n    }\n    debugLog(\"Rendering invoice list with\", invoices.length, \"invoices\");\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"h-full flex flex-col bg-white rounded-lg shadow-md\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex justify-between items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-2xl font-bold text-gray-800\",\n                                children: \"QuickBooks Invoices\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 417,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex space-x-2\",\n                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>{\n                                        debugLog(\"Reconnect button clicked (header)\");\n                                        setShowConnect(true);\n                                    },\n                                    className: \"text-sm bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md shadow-sm flex items-center\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                            xmlns: \"http://www.w3.org/2000/svg\",\n                                            className: \"h-4 w-4 mr-1\",\n                                            fill: \"none\",\n                                            viewBox: \"0 0 24 24\",\n                                            stroke: \"currentColor\",\n                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                                strokeLinecap: \"round\",\n                                                strokeLinejoin: \"round\",\n                                                strokeWidth: 2,\n                                                d: \"M13 10V3L4 14h7v7l9-11h-7z\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 428,\n                                                columnNumber: 17\n                                            }, this)\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                            lineNumber: 427,\n                                            columnNumber: 15\n                                        }, this),\n                                        \"Reconnect\"\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                    lineNumber: 420,\n                                    columnNumber: 13\n                                }, this)\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 418,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 416,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-3\",\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"relative\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                                    type: \"text\",\n                                    placeholder: \"Search by invoice number or customer name...\",\n                                    className: \"w-full p-2 pl-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all\",\n                                    value: filter,\n                                    onChange: (e)=>setFilter(e.target.value)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                    lineNumber: 436,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"absolute left-3 top-2.5 text-gray-400\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                                        xmlns: \"http://www.w3.org/2000/svg\",\n                                        className: \"h-5 w-5\",\n                                        fill: \"none\",\n                                        viewBox: \"0 0 24 24\",\n                                        stroke: \"currentColor\",\n                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                            strokeLinecap: \"round\",\n                                            strokeLinejoin: \"round\",\n                                            strokeWidth: 2,\n                                            d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                            lineNumber: 445,\n                                            columnNumber: 17\n                                        }, this)\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                        lineNumber: 444,\n                                        columnNumber: 15\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                    lineNumber: 443,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                            lineNumber: 435,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 434,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                lineNumber: 415,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex-1 overflow-y-auto\",\n                children: filteredInvoices && filteredInvoices.length > 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"divide-y divide-gray-200\",\n                    children: filteredInvoices.map((invoice)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: `p-4 cursor-pointer hover:bg-blue-50 transition-colors duration-150 ${selectedInvoiceId === invoice.Id ? \"bg-blue-100 border-l-4 border-blue-500\" : \"\"}`,\n                            onClick: ()=>{\n                                debugLog(\"Invoice selected:\", invoice.Id);\n                                if (onSelectInvoice) {\n                                    onSelectInvoice(invoice.Id);\n                                }\n                            },\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-between items-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                                className: \"font-medium text-lg text-gray-800\",\n                                                children: [\n                                                    \"Invoice #\",\n                                                    invoice.DocNumber\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 470,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-gray-600 mt-1\",\n                                                children: invoice.CustomerRef.name\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 471,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                className: \"mt-1 flex items-center\",\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        className: `w-2 h-2 rounded-full mr-2 ${(invoice.Balance || 0) > 0 ? \"bg-orange-500\" : \"bg-green-500\"}`\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                        lineNumber: 475,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        className: \"text-sm text-gray-500\",\n                                                        children: (invoice.Balance || 0) > 0 ? \"Balance due\" : \"Paid\"\n                                                    }, void 0, false, {\n                                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                        lineNumber: 476,\n                                                        columnNumber: 23\n                                                    }, this)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 474,\n                                                columnNumber: 21\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                        lineNumber: 469,\n                                        columnNumber: 19\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"text-right\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: `text-lg font-bold ${(invoice.Balance || 0) > 0 ? \"text-orange-500\" : \"text-green-600\"}`,\n                                                children: [\n                                                    \"$\",\n                                                    Number(invoice.TotalAmt).toFixed(2)\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 482,\n                                                columnNumber: 21\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm text-gray-500 mt-1\",\n                                                children: [\n                                                    \"Date: \",\n                                                    new Date(invoice.TxnDate).toLocaleDateString()\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 485,\n                                                columnNumber: 21\n                                            }, this),\n                                            invoice.DueDate && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm text-gray-500\",\n                                                children: [\n                                                    \"Due: \",\n                                                    new Date(invoice.DueDate).toLocaleDateString()\n                                                ]\n                                            }, void 0, true, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                                lineNumber: 489,\n                                                columnNumber: 23\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                        lineNumber: 481,\n                                        columnNumber: 19\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                                lineNumber: 468,\n                                columnNumber: 17\n                            }, this)\n                        }, invoice.Id, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                            lineNumber: 456,\n                            columnNumber: 15\n                        }, this))\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                    lineNumber: 454,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center h-full\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-500\",\n                        children: \"No invoices match your search criteria\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                        lineNumber: 500,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                    lineNumber: 499,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n                lineNumber: 452,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\InvoicePanel\\\\index.tsx\",\n        lineNumber: 414,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvSW52b2ljZVBhbmVsL2luZGV4LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFFbUQ7QUFDYjtBQUVjO0FBQ0k7QUFPeEQsTUFBTU0sZUFBZUMsdUJBQWdDLElBQUk7QUFDekQsTUFBTUcsUUFBUTtBQUVkLDJDQUEyQztBQUMzQyxNQUFNQyxXQUFXLENBQUMsR0FBR0M7SUFDbkIsSUFBSUYsT0FBTztRQUNURyxRQUFRQyxHQUFHLENBQUMsMkJBQTJCRjtJQUN6QztBQUNGO0FBRUEsbURBQW1EO0FBQ25ELE1BQU1HLHNCQUFzQjtJQUMxQixJQUFJO1FBQ0YsZ0RBQWdEO1FBQ2hELE1BQU1DLGlCQUFpQlgsc0VBQWlCQTtRQUN4Q00sU0FBUyxnQ0FBZ0NLO1FBRXpDLElBQUlBLGdCQUFnQjtZQUNsQixPQUFPO1FBQ1Q7UUFFQSxnQ0FBZ0M7UUFDaENMLFNBQVM7UUFDVCxNQUFNTSxXQUFXLE1BQU1DLE1BQU0sQ0FBQyxFQUFFWixhQUFhLGdCQUFnQixDQUFDO1FBRTlELElBQUksQ0FBQ1csU0FBU0UsRUFBRSxFQUFFO1lBQ2hCLE1BQU1DLFlBQVksTUFBTUgsU0FBU0ksSUFBSTtZQUNyQ1YsU0FBUyxvQ0FBb0NTO1lBQzdDLE9BQU87UUFDVDtRQUVBLE1BQU1FLE9BQU8sTUFBTUwsU0FBU0ksSUFBSTtRQUNoQ1YsU0FBUyxnQ0FBZ0NXO1FBQ3pDLE9BQU9BLEtBQUtDLGFBQWE7SUFDM0IsRUFBRSxPQUFPQyxPQUFPO1FBQ2RYLFFBQVFXLEtBQUssQ0FBQywwQ0FBMENBO1FBQ3hELE9BQU87SUFDVDtBQUNGO0FBRUEsTUFBTUMsZ0JBQWdCO0lBQ3BCZCxTQUFTO0lBRVQsSUFBSTtRQUNGLHVEQUF1RDtRQUN2RCxNQUFNTSxXQUFXLE1BQU1DLE1BQU0sa0JBQWtCO1lBQzdDUSxRQUFRO1lBQ1JDLFNBQVM7Z0JBQ1AsZ0JBQWdCO1lBQ2xCO1lBQ0FDLE1BQU1DLEtBQUtDLFNBQVMsQ0FBQztnQkFDbkJDLE1BQU07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Q0FBQ04sUUFBUW9DLE9BQU8sSUFBSSxLQUFLLElBQUksZ0JBQWdCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7a0RBSXBELDhEQUFDL0I7d0NBQUlDLFdBQVU7OzBEQUNiLDhEQUFDRTtnREFBRUYsV0FBVyxDQUFDLGtCQUFrQixFQUFFLENBQUNOLFFBQVFvQyxPQUFPLElBQUksS0FBSyxJQUFJLG9CQUFvQixpQkFBaUIsQ0FBQzs7b0RBQUU7b0RBQ3BHQyxPQUFPckMsUUFBUXNDLFFBQVEsRUFBRUMsT0FBTyxDQUFDOzs7Ozs7OzBEQUVyQyw4REFBQy9CO2dEQUFFRixXQUFVOztvREFBNkI7b0RBQ2pDLElBQUlPLEtBQUtiLFFBQVF3QyxPQUFPLEVBQUVDLGtCQUFrQjs7Ozs7Ozs0Q0FFcER6QyxRQUFRMEMsT0FBTyxrQkFDZCw4REFBQ2xDO2dEQUFFRixXQUFVOztvREFBd0I7b0RBQzdCLElBQUlPLEtBQUtiLFFBQVEwQyxPQUFPLEVBQUVELGtCQUFrQjs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyQkFqQ3JEekMsUUFBUW1DLEVBQUU7Ozs7Ozs7Ozt5Q0EwQ3JCLDhEQUFDOUI7b0JBQUlDLFdBQVU7OEJBQ2IsNEVBQUNFO3dCQUFFRixXQUFVO2tDQUFnQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU16QyIsInNvdXJjZXMiOlsid2VicGFjazovL2ludm9pY2UtYXBwLy4vc3JjL2FwcC9jb21wb25lbnRzL0ludm9pY2VQYW5lbC9pbmRleC50c3g/NTFjZSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gJ3JlYWN0LXF1ZXJ5J1xuaW1wb3J0IHsgSW52b2ljZSB9IGZyb20gJ0AvdHlwZXMnXG5pbXBvcnQgUXVpY2tib29rc0Nvbm5lY3QgZnJvbSAnLi4vUXVpY2tib29rc0Nvbm5lY3QnXG5pbXBvcnQgeyBpc1F1aWNrQm9va3NSZWFkeSB9IGZyb20gJ0AvbGliL3F1aWNrYm9va3MvYXBpJ1xuXG5pbnRlcmZhY2UgSW52b2ljZVBhbmVsUHJvcHMge1xuICBzZWxlY3RlZEludm9pY2VJZD86IHN0cmluZyB8IG51bGw7XG4gIG9uU2VsZWN0SW52b2ljZT86IChpZDogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG5jb25zdCBBUElfQkFTRV9VUkwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQVNFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ1xuY29uc3QgREVCVUcgPSB0cnVlO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gbG9nIGRlYnVnIGluZm9ybWF0aW9uXG5jb25zdCBkZWJ1Z0xvZyA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICBpZiAoREVCVUcpIHtcbiAgICBjb25zb2xlLmxvZygnW0ludm9pY2VQYW5lbCBEZWJ1Z10nLCAuLi5hcmdzKTtcbiAgfVxufTtcblxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgUXVpY2tCb29rcyBpcyBhdXRoZW50aWNhdGVkXG5jb25zdCBjaGVja1F1aWNrQm9va3NBdXRoID0gYXN5bmMgKCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICB0cnkge1xuICAgIC8vIEZpcnN0IGNoZWNrIGlmIHdlIGhhdmUgdG9rZW5zIGluIGxvY2FsU3RvcmFnZVxuICAgIGNvbnN0IHJlYWR5SW5Ccm93c2VyID0gaXNRdWlja0Jvb2tzUmVhZHkoKTtcbiAgICBkZWJ1Z0xvZygnUXVpY2tCb29rcyByZWFkeSBpbiBicm93c2VyOicsIHJlYWR5SW5Ccm93c2VyKTtcbiAgICBcbiAgICBpZiAocmVhZHlJbkJyb3dzZXIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBub3QsIGNoZWNrIHdpdGggdGhlIHNlcnZlclxuICAgIGRlYnVnTG9nKCdDaGVja2luZyBRdWlja0Jvb2tzIGF1dGggc3RhdHVzIHdpdGggc2VydmVyJyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtBUElfQkFTRV9VUkx9L2FwaS9hdXRoL3N0YXR1c2ApXG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgZGVidWdMb2coJ1NlcnZlciBhdXRoIHN0YXR1cyBjaGVjayBmYWlsZWQ6JywgZXJyb3JEYXRhKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIGRlYnVnTG9nKCdTZXJ2ZXIgYXV0aCBzdGF0dXMgcmVzcG9uc2U6JywgZGF0YSk7XG4gICAgcmV0dXJuIGRhdGEuYXV0aGVudGljYXRlZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBRdWlja0Jvb2tzIGF1dGggc3RhdHVzOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuY29uc3QgZmV0Y2hJbnZvaWNlcyA9IGFzeW5jICgpOiBQcm9taXNlPEludm9pY2VbXT4gPT4ge1xuICBkZWJ1Z0xvZygnRmV0Y2hpbmcgaW52b2ljZXMgdXNpbmcgY2hhdC90b29sIEFQSSBmb3IgY29uc2lzdGVuY3knKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gVXNlIHRoZSBuZXcgY2VudHJhbGl6ZWQgZW5kcG9pbnQgZm9yIGNvbnNpc3RlbnQgZGF0YVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvY2hhdC90b29sJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICB0b29sOiAnbGlzdEludm9pY2VzJyxcbiAgICAgICAgcGFyYW1zOiB7fVxuICAgICAgfSksXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggaW52b2ljZXM6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgLy8gSGFuZGxlIGVpdGhlciBkaXJlY3QgYXJyYXkgcmVzcG9uc2Ugb3IgcmVzcG9uc2Ugd2l0aCBpbnZvaWNlcyBwcm9wZXJ0eVxuICAgIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9IGVsc2UgaWYgKGRhdGEuaW52b2ljZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLmludm9pY2VzKSkge1xuICAgICAgcmV0dXJuIGRhdGEuaW52b2ljZXM7XG4gICAgfSBlbHNlIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXNwb25zZSBmb3JtYXQgZnJvbSBzZXJ2ZXInKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgZGVidWdMb2coJ0Vycm9yIGZldGNoaW5nIGludm9pY2VzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSW52b2ljZVBhbmVsKHsgXG4gIHNlbGVjdGVkSW52b2ljZUlkID0gbnVsbCwgXG4gIG9uU2VsZWN0SW52b2ljZSBcbn06IEludm9pY2VQYW5lbFByb3BzKSB7XG4gIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFtzaG93Q29ubmVjdCwgc2V0U2hvd0Nvbm5lY3RdID0gdXNlU3RhdGUodHJ1ZSk7XG4gIGNvbnN0IFtlcnJvckRldGFpbHMsIHNldEVycm9yRGV0YWlsc10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2hhc0F0dGVtcHRlZEF1dGgsIHNldEhhc0F0dGVtcHRlZEF1dGhdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbaXNSZWZldGNoaW5nLCBzZXRJc1JlZmV0Y2hpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmV0cnlDb3VudCwgc2V0UmV0cnlDb3VudF0gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW2F1dGhTdWNjZXNzLCBzZXRBdXRoU3VjY2Vzc10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFthdXRvTG9hZEF0dGVtcHRlZCwgc2V0QXV0b0xvYWRBdHRlbXB0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBpbml0aWFsTG9hZFRpbWVyID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IGF1dG9SZXRyeVRpbWVyID0gdXNlUmVmPE5vZGVKUy5UaW1lb3V0IHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgeyBkYXRhOiBpbnZvaWNlcywgaXNMb2FkaW5nLCBlcnJvciwgcmVmZXRjaCB9ID0gdXNlUXVlcnkoJ2ludm9pY2VzJywgZmV0Y2hJbnZvaWNlcywge1xuICAgIHJldHJ5OiAzLFxuICAgIHJldHJ5RGVsYXk6IChhdHRlbXB0SW5kZXgpID0+IE1hdGgubWluKDEwMDAgKiAyICoqIGF0dGVtcHRJbmRleCwgMTAwMDApLFxuICAgIHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxcbiAgICAvLyBBbHdheXMgZW5hYmxlIHRoZSBxdWVyeSAtIGl0IHdpbGwgY2hlY2sgYXV0aCBpbnRlcm5hbGx5XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBzdGFsZVRpbWU6IDMwMDAwLFxuICAgIGNhY2hlVGltZTogNSAqIDYwICogMTAwMCxcbiAgICBvbkVycm9yOiAoZXJyKSA9PiB7XG4gICAgICBkZWJ1Z0xvZygnUXVlcnkgZXJyb3I6JywgZXJyKTtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBkZWJ1Z0xvZygnRXJyb3IgbWVzc2FnZTonLCBlcnIubWVzc2FnZSk7XG4gICAgICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnUXVpY2tCb29rcyBjbGllbnQgbm90IGluaXRpYWxpemVkJykgfHwgXG4gICAgICAgICAgICBlcnIubWVzc2FnZS5pbmNsdWRlcygnYXV0aGVudGljYXRpb24gZmFpbGVkJykpIHtcbiAgICAgICAgICBzZXRTaG93Q29ubmVjdCh0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygndGltZWQgb3V0JykpIHtcbiAgICAgICAgICBzZXRSZXRyeUNvdW50KHByZXYgPT4gcHJldiArIDEpO1xuICAgICAgICAgIGlmIChyZXRyeUNvdW50IDwgMykge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIGRlYnVnTG9nKCdSZXRyeWluZyBhZnRlciB0aW1lb3V0Jyk7XG4gICAgICAgICAgICAgIHJlZmV0Y2goKTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0QXV0b0xvYWRBdHRlbXB0ZWQodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIFNldCB1cCBhdXRvLXJldHJ5IGFmdGVyIGVycm9yXG4gICAgICBpZiAoYXV0b1JldHJ5VGltZXIuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoYXV0b1JldHJ5VGltZXIuY3VycmVudCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGF1dG9SZXRyeVRpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZGVidWdMb2coJ0F1dG8tcmV0cnlpbmcgYWZ0ZXIgZXJyb3InKTtcbiAgICAgICAgcmVmZXRjaCgpO1xuICAgICAgfSwgNTAwMCk7XG4gICAgfSxcbiAgICBvblN1Y2Nlc3M6IChkYXRhKSA9PiB7XG4gICAgICBkZWJ1Z0xvZygnUXVlcnkgc3VjY2VzcywgcmVjZWl2ZWQgaW52b2ljZXM6JywgZGF0YT8ubGVuZ3RoKTtcbiAgICAgIHNldFJldHJ5Q291bnQoMCk7XG4gICAgICBzZXRBdXRvTG9hZEF0dGVtcHRlZCh0cnVlKTtcbiAgICAgIFxuICAgICAgLy8gQ2xlYXIgYW55IHJldHJ5IHRpbWVycyBvbiBzdWNjZXNzXG4gICAgICBpZiAoYXV0b1JldHJ5VGltZXIuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoYXV0b1JldHJ5VGltZXIuY3VycmVudCk7XG4gICAgICAgIGF1dG9SZXRyeVRpbWVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gRm9yY2UgcmVmZXRjaCB3aGVuIGNvbXBvbmVudCBtb3VudHMgdG8gZW5zdXJlIGRhdGEgaXMgZnJlc2hcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBkZWJ1Z0xvZygnQ29tcG9uZW50IG1vdW50ZWQsIHRyaWdnZXJpbmcgaW5pdGlhbCBmZXRjaCcpO1xuICAgIC8vIFVzZSBhIHNob3J0ZXIgZGVsYXkgZm9yIHRoZSBpbml0aWFsIGZldGNoXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZWZldGNoKCk7XG4gICAgfSwgNTAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgLy8gQ2xlYW51cCB0aW1lcnMgb24gdW5tb3VudFxuICAgICAgaWYgKGluaXRpYWxMb2FkVGltZXIuY3VycmVudCkge1xuICAgICAgICBjbGVhclRpbWVvdXQoaW5pdGlhbExvYWRUaW1lci5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChhdXRvUmV0cnlUaW1lci5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFyVGltZW91dChhdXRvUmV0cnlUaW1lci5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgLy8gU2V0IHVwIGF1dG9tYXRpYyBsb2FkIGFmdGVyIGF1dGhlbnRpY2F0aW9uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVycyBmaXJzdFxuICAgIGlmIChpbml0aWFsTG9hZFRpbWVyLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFyVGltZW91dChpbml0aWFsTG9hZFRpbWVyLmN1cnJlbnQpO1xuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZygnQXV0aCBzdGF0ZSBjaGFuZ2VkLiBhdXRoU3VjY2VzczonLCBhdXRoU3VjY2VzcywgJ3Nob3dDb25uZWN0OicsIHNob3dDb25uZWN0KTtcbiAgICBcbiAgICBpZiAoYXV0aFN1Y2Nlc3MgJiYgIXNob3dDb25uZWN0KSB7XG4gICAgICBkZWJ1Z0xvZygnQXV0aCBzdWNjZXNzIGRldGVjdGVkLCBzZXR0aW5nIHVwIGF1dG9tYXRpYyBpbnZvaWNlIGxvYWRpbmcnKTtcbiAgICAgIFxuICAgICAgLy8gU2V0IGEgdGltZXIgdG8gbG9hZCBpbnZvaWNlcyBhdXRvbWF0aWNhbGx5XG4gICAgICBpbml0aWFsTG9hZFRpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZGVidWdMb2coJ0F1dG8tbG9hZGluZyBpbnZvaWNlcyBhZnRlciBhdXRoIHN1Y2Nlc3MnKTtcbiAgICAgICAgc2V0QXV0b0xvYWRBdHRlbXB0ZWQodHJ1ZSk7XG4gICAgICAgIHJlZmV0Y2goKTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgICBcbiAgICAvLyBDbGVhbnVwIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbml0aWFsTG9hZFRpbWVyLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGluaXRpYWxMb2FkVGltZXIuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2F1dGhTdWNjZXNzLCBzaG93Q29ubmVjdCwgcmVmZXRjaF0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZGVidWdMb2coJ0ludm9pY2VQYW5lbCBtb3VudGVkIG9yIFVSTCBwYXJhbXMgY2hhbmdlZCcpO1xuICAgIFxuICAgIC8vIENoZWNrIGZvciBhdXRoIHF1ZXJ5IHBhcmFtc1xuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgY29uc3QgYXV0aFN0YXR1cyA9IHVybFBhcmFtcy5nZXQoJ2F1dGgnKTtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSB1cmxQYXJhbXMuZ2V0KCdtZXNzYWdlJyk7XG4gICAgY29uc3QgdG9rZW5PYnRhaW5lZCA9IHVybFBhcmFtcy5nZXQoJ3Rva2VuT2J0YWluZWQnKTtcbiAgICBcbiAgICBkZWJ1Z0xvZygnVVJMIHBhcmFtZXRlcnM6JywgeyBhdXRoU3RhdHVzLCBlcnJvck1lc3NhZ2UsIHRva2VuT2J0YWluZWQgfSk7XG4gICAgXG4gICAgaWYgKGF1dGhTdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgZGVidWdMb2coJ0F1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwsIHRva2VuIG9idGFpbmVkOicsIHRva2VuT2J0YWluZWQpO1xuICAgICAgc2V0U2hvd0Nvbm5lY3QoZmFsc2UpOyAvLyBIaWRlIGNvbm5lY3QgVUkgYWZ0ZXIgc3VjY2Vzc2Z1bCBhdXRoXG4gICAgICBzZXRIYXNBdHRlbXB0ZWRBdXRoKHRydWUpO1xuICAgICAgc2V0QXV0aFN1Y2Nlc3ModHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIEZvcmNlIGFuIGltbWVkaWF0ZSByZWZldGNoIHdoZW4gYXV0aCBpcyBzdWNjZXNzZnVsXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZGVidWdMb2coJ0ltbWVkaWF0ZWx5IHJlZmV0Y2hpbmcgaW52b2ljZXMgYWZ0ZXIgYXV0aCBzdWNjZXNzJyk7XG4gICAgICAgIHJlZmV0Y2goKTtcbiAgICAgIH0sIDEwMCk7XG4gICAgICBcbiAgICAgIC8vIFJlbW92ZSBxdWVyeSBwYXJhbXMgdG8gYXZvaWQgcmVmcmVzaGluZyBvbiBwYWdlIHJlbG9hZCwgYnV0IGFmdGVyIGEgZGVsYXlcbiAgICAgIC8vIHRvIGFsbG93IG90aGVyIGNvbXBvbmVudHMgdG8gZGV0ZWN0IHRoZSBhdXRoIHN1Y2Nlc3NcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBkZWJ1Z0xvZygnQ2xlYW5pbmcgdXAgVVJMIHBhcmFtcyBhZnRlciBkZWxheScpO1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfSBlbHNlIGlmIChhdXRoU3RhdHVzID09PSAnZXJyb3InICYmIGVycm9yTWVzc2FnZSkge1xuICAgICAgY29uc29sZS5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZXJyb3JNZXNzYWdlKTtcbiAgICAgIHNldEVycm9yRGV0YWlscyhlcnJvck1lc3NhZ2UpO1xuICAgICAgc2V0U2hvd0Nvbm5lY3QodHJ1ZSk7XG4gICAgICBzZXRIYXNBdHRlbXB0ZWRBdXRoKHRydWUpO1xuICAgICAgc2V0QXV0aFN1Y2Nlc3MoZmFsc2UpO1xuICAgICAgXG4gICAgICAvLyBLZWVwIHRoZSBlcnJvciBtZXNzYWdlIGF2YWlsYWJsZSBidXQgY2xlYW4gdXAgdGhlIFVSTFxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGRlYnVnTG9nKCdDbGVhbmluZyB1cCBlcnJvciBVUkwgcGFyYW1zJyk7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgZG9jdW1lbnQudGl0bGUsIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSk7XG4gICAgICB9LCAyMDAwKTtcbiAgICB9IGVsc2UgaWYgKCFoYXNBdHRlbXB0ZWRBdXRoKSB7XG4gICAgICAvLyBDaGVjayBhdXRoZW50aWNhdGlvbiBzdGF0dXMgaWYgbm8gVVJMIHBhcmFtZXRlcnMgYW5kIHdlIGhhdmVuJ3QgYXR0ZW1wdGVkIGF1dGggeWV0XG4gICAgICBkZWJ1Z0xvZygnQ2hlY2tpbmcgYXV0aGVudGljYXRpb24gc3RhdHVzJyk7XG4gICAgICBcbiAgICAgIGNoZWNrUXVpY2tCb29rc0F1dGgoKS50aGVuKGlzQXV0aGVudGljYXRlZCA9PiB7XG4gICAgICAgIGRlYnVnTG9nKCdRdWlja0Jvb2tzIGF1dGhlbnRpY2F0aW9uIHN0YXR1czonLCBpc0F1dGhlbnRpY2F0ZWQpO1xuICAgICAgICBzZXRTaG93Q29ubmVjdCghaXNBdXRoZW50aWNhdGVkKTtcbiAgICAgICAgc2V0QXV0aFN1Y2Nlc3MoaXNBdXRoZW50aWNhdGVkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICBkZWJ1Z0xvZygnQWxyZWFkeSBhdXRoZW50aWNhdGVkLCBzY2hlZHVsaW5nIGltbWVkaWF0ZSBpbnZvaWNlIGZldGNoJyk7XG4gICAgICAgICAgLy8gRm9yY2UgYW4gaW1tZWRpYXRlIHJlZmV0Y2ggd2hlbiBhbHJlYWR5IGF1dGhlbnRpY2F0ZWRcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJlZmV0Y2goKTtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzZXRIYXNBdHRlbXB0ZWRBdXRoKHRydWUpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcmVmZXRjaCwgaGFzQXR0ZW1wdGVkQXV0aF0pO1xuXG4gIC8vIENoZWNrIFF1aWNrQm9va3Mgc3RhdHVzIG9uIG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY2hlY2tRdWlja0Jvb2tzU3RhdHVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGludm9pY2VzICYmIGludm9pY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIGludm9pY2VzLCB3ZSBjYW4gc2tpcCBhdXRoZW50aWNhdGlvbiBjaGVja1xuICAgICAgICAgIHNldFNob3dDb25uZWN0KGZhbHNlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IGF3YWl0IGNoZWNrUXVpY2tCb29rc0F1dGgoKTtcbiAgICAgICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQpIHtcbiAgICAgICAgICBzZXRTaG93Q29ubmVjdCh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRTaG93Q29ubmVjdChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBRdWlja0Jvb2tzIHN0YXR1czonLCBlcnIpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY2hlY2tRdWlja0Jvb2tzU3RhdHVzKCk7XG4gIH0sIFtpbnZvaWNlcz8ubGVuZ3RoXSk7XG5cbiAgY29uc3QgZmlsdGVyZWRJbnZvaWNlcyA9IGludm9pY2VzPy5maWx0ZXIoaW52b2ljZSA9PiBcbiAgICBpbnZvaWNlLkRvY051bWJlci50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlci50b0xvd2VyQ2FzZSgpKSB8fFxuICAgIGludm9pY2UuQ3VzdG9tZXJSZWYubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlci50b0xvd2VyQ2FzZSgpKVxuICApO1xuXG4gIC8vIElmIHNob3dpbmcgY29ubmVjdCBVSSwgcmVuZGVyIGl0XG4gIGlmIChzaG93Q29ubmVjdCkge1xuICAgIGRlYnVnTG9nKCdSZW5kZXJpbmcgUXVpY2tib29rc0Nvbm5lY3QgY29tcG9uZW50Jyk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsXCI+XG4gICAgICAgIDxRdWlja2Jvb2tzQ29ubmVjdCBpbml0aWFsRXJyb3I9e2Vycm9yRGV0YWlsc30gLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgZGVidWdMb2coJ1JlbmRlcmluZyBsb2FkaW5nIHN0YXRlJyk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0xMiB3LTEyIGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwXCIgLz5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC00IHRleHQtYmx1ZS01MDBcIj5Mb2FkaW5nIFF1aWNrQm9va3MgaW52b2ljZXMuLi48L3A+XG4gICAgICAgICAge3JldHJ5Q291bnQgPiAwICYmIChcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nKCdNYW51YWwgcmV0cnkgYnV0dG9uIGNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICByZWZldGNoKCk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm10LTQgcHgtNCBweS0yIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcm91bmRlZCBob3ZlcjpiZy1ibHVlLTYwMFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIFJldHJ5IExvYWRpbmdcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIGlmIChlcnJvcikge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnO1xuICAgIGRlYnVnTG9nKCdSZW5kZXJpbmcgZXJyb3Igc3RhdGU6JywgZXJyb3JNZXNzYWdlKTtcbiAgICBcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctcmVkLTUwIGJvcmRlciBib3JkZXItcmVkLTIwMCByb3VuZGVkLWxnIHAtNCBtYXgtdy1tZCBtYi00XCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtcmVkLTYwMCBtYi0yXCI+RXJyb3IgbG9hZGluZyBpbnZvaWNlczwvaDM+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1yZWQtNjAwXCI+e2Vycm9yTWVzc2FnZX08L3A+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWdyYXktNjAwXCI+UGxlYXNlIGNoZWNrIHlvdXIgUXVpY2tCb29rcyBjb25uZWN0aW9uIG9yIHRyeSBhZ2Fpbi48L3A+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IGZsZXggZmxleC1jb2wgZ2FwLTJcIj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZygnUmVjb25uZWN0IGJ1dHRvbiBjbGlja2VkJyk7XG4gICAgICAgICAgICAgICAgc2V0U2hvd0Nvbm5lY3QodHJ1ZSk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ibHVlLTUwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgaG92ZXI6YmctYmx1ZS02MDAgdy1mdWxsXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQ29ubmVjdCB0byBRdWlja0Jvb2tzXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0xvZygnUmV0cnkgYnV0dG9uIGNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICByZWZldGNoKCk7XG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ncmF5LTIwMCB0ZXh0LWdyYXktODAwIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0zMDAgdy1mdWxsXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgUmV0cnkgRmV0Y2hcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoIWludm9pY2VzIHx8IGludm9pY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlYnVnTG9nKCdSZW5kZXJpbmcgZW1wdHkgc3RhdGUgKG5vIGludm9pY2VzKS4gaXNMb2FkaW5nOicsIGlzTG9hZGluZywgJ2F1dG9Mb2FkQXR0ZW1wdGVkOicsIGF1dG9Mb2FkQXR0ZW1wdGVkKTtcbiAgICBcbiAgICAvLyBBbHdheXMgc2hvdyB0aGUgbG9hZGluZyBpbmRpY2F0b3IgZm9yIHRoZSBmaXJzdCBmZXcgc2Vjb25kc1xuICAgIGNvbnN0IHNob3VsZFNob3dMb2FkaW5nID0gaXNMb2FkaW5nIHx8ICghaW52b2ljZXMgJiYgRGF0ZS5ub3coKSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpIDwgNTAwMCk7XG4gICAgXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctYmx1ZS01MCBib3JkZXIgYm9yZGVyLWJsdWUtMjAwIHJvdW5kZWQtbGcgcC00IG1heC13LW1kXCI+XG4gICAgICAgICAgPGgzIGNsYXNzTmFtZT1cInRleHQtbGcgZm9udC1ib2xkIHRleHQtYmx1ZS02MDAgbWItMlwiPkludm9pY2UgVG9vbHM8L2gzPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5TZWxlY3QgYW4gaW52b2ljZSBhbmQgdG9vbCB0byBhbmFseXplIHlvdXIgZGF0YTwvcD5cbiAgICAgICAgICBcbiAgICAgICAgICB7c2hvdWxkU2hvd0xvYWRpbmcgPyAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbmltYXRlLXNwaW4gcm91bmRlZC1mdWxsIGgtMTAgdy0xMCBib3JkZXItYi0yIGJvcmRlci1ibHVlLTUwMCBtYi0yXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDBcIj5JbnZvaWNlcyBhcmUgbG9hZGluZyBhdXRvbWF0aWNhbGx5Li4uPC9wPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTIgdGV4dC1ncmF5LTUwMFwiPk5vIGludm9pY2VzIGZvdW5kIGluIHlvdXIgUXVpY2tCb29rcyBhY2NvdW50LjwvcD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC00IGZsZXggZmxleC1jb2wgZ2FwLTJcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z0xvZygnUmVjb25uZWN0IGJ1dHRvbiBjbGlja2VkIChlbXB0eSBzdGF0ZSknKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0U2hvd0Nvbm5lY3QodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWJsdWUtNTAwIHRleHQtd2hpdGUgcm91bmRlZCBob3ZlcjpiZy1ibHVlLTYwMCB3LWZ1bGxcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIENvbm5lY3QgdG8gUXVpY2tCb29rc1xuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnTG9nKCdNYW51YWwgZmV0Y2ggYnV0dG9uIGNsaWNrZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0QXV0b0xvYWRBdHRlbXB0ZWQoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZWZldGNoKCk7XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHgtNCBweS0yIGJnLWdyYXktMjAwIHRleHQtZ3JheS04MDAgcm91bmRlZCBob3ZlcjpiZy1ncmF5LTMwMCB3LWZ1bGxcIlxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFJlZnJlc2ggSW52b2ljZXNcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Lz5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBkZWJ1Z0xvZygnUmVuZGVyaW5nIGludm9pY2UgbGlzdCB3aXRoJywgaW52b2ljZXMubGVuZ3RoLCAnaW52b2ljZXMnKTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBmbGV4IGZsZXgtY29sIGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kXCI+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBib3JkZXItYiBib3JkZXItZ3JheS0yMDAgYmctZ3JhZGllbnQtdG8tciBmcm9tLWJsdWUtNTAgdG8taW5kaWdvLTUwXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwXCI+UXVpY2tCb29rcyBJbnZvaWNlczwvaDE+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtMlwiPlxuICAgICAgICAgICBcbiAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4ge1xuICAgICAgICAgICAgICAgIGRlYnVnTG9nKCdSZWNvbm5lY3QgYnV0dG9uIGNsaWNrZWQgKGhlYWRlciknKTtcbiAgICAgICAgICAgICAgICBzZXRTaG93Q29ubmVjdCh0cnVlKTtcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidGV4dC1zbSBiZy1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTcwMCB0ZXh0LXdoaXRlIHB4LTMgcHktMSByb3VuZGVkLW1kIHNoYWRvdy1zbSBmbGV4IGl0ZW1zLWNlbnRlclwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGNsYXNzTmFtZT1cImgtNCB3LTQgbXItMVwiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiPlxuICAgICAgICAgICAgICAgIDxwYXRoIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIiBzdHJva2VXaWR0aD17Mn0gZD1cIk0xMyAxMFYzTDQgMTRoN3Y3bDktMTFoLTd6XCIgLz5cbiAgICAgICAgICAgICAgPC9zdmc+XG4gICAgICAgICAgICAgIFJlY29ubmVjdFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTNcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlXCI+XG4gICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIlNlYXJjaCBieSBpbnZvaWNlIG51bWJlciBvciBjdXN0b21lciBuYW1lLi4uXCJcbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHAtMiBwbC0xMCBib3JkZXIgYm9yZGVyLWdyYXktMzAwIHJvdW5kZWQtbWQgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwIHRyYW5zaXRpb24tYWxsXCJcbiAgICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcn1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRGaWx0ZXIoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgbGVmdC0zIHRvcC0yLjUgdGV4dC1ncmF5LTQwMFwiPlxuICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBjbGFzc05hbWU9XCJoLTUgdy01XCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCI+XG4gICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIHN0cm9rZVdpZHRoPXsyfSBkPVwiTTIxIDIxbC02LTZtMi01YTcgNyAwIDExLTE0IDAgNyA3IDAgMDExNCAwelwiIC8+XG4gICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleC0xIG92ZXJmbG93LXktYXV0b1wiPlxuICAgICAgICB7ZmlsdGVyZWRJbnZvaWNlcyAmJiBmaWx0ZXJlZEludm9pY2VzLmxlbmd0aCA+IDAgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaXZpZGUteSBkaXZpZGUtZ3JheS0yMDBcIj5cbiAgICAgICAgICAgIHtmaWx0ZXJlZEludm9pY2VzLm1hcCgoaW52b2ljZTogSW52b2ljZSkgPT4gKFxuICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAga2V5PXtpbnZvaWNlLklkfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YHAtNCBjdXJzb3ItcG9pbnRlciBob3ZlcjpiZy1ibHVlLTUwIHRyYW5zaXRpb24tY29sb3JzIGR1cmF0aW9uLTE1MCAke1xuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJbnZvaWNlSWQgPT09IGludm9pY2UuSWQgPyAnYmctYmx1ZS0xMDAgYm9yZGVyLWwtNCBib3JkZXItYmx1ZS01MDAnIDogJydcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBkZWJ1Z0xvZygnSW52b2ljZSBzZWxlY3RlZDonLCBpbnZvaWNlLklkKTtcbiAgICAgICAgICAgICAgICAgIGlmIChvblNlbGVjdEludm9pY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgb25TZWxlY3RJbnZvaWNlKGludm9pY2UuSWQpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtIHRleHQtbGcgdGV4dC1ncmF5LTgwMFwiPkludm9pY2UgI3tpbnZvaWNlLkRvY051bWJlcn08L2gzPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7aW52b2ljZS5DdXN0b21lclJlZi5uYW1lfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMSBmbGV4IGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgdy0yIGgtMiByb3VuZGVkLWZ1bGwgbXItMiAkeyhpbnZvaWNlLkJhbGFuY2UgfHwgMCkgPiAwID8gJ2JnLW9yYW5nZS01MDAnIDogJ2JnLWdyZWVuLTUwMCd9YH0+PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7KGludm9pY2UuQmFsYW5jZSB8fCAwKSA+IDAgPyAnQmFsYW5jZSBkdWUnIDogJ1BhaWQnfVxuICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1yaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9e2B0ZXh0LWxnIGZvbnQtYm9sZCAkeyhpbnZvaWNlLkJhbGFuY2UgfHwgMCkgPiAwID8gJ3RleHQtb3JhbmdlLTUwMCcgOiAndGV4dC1ncmVlbi02MDAnfWB9PlxuICAgICAgICAgICAgICAgICAgICAgICR7TnVtYmVyKGludm9pY2UuVG90YWxBbXQpLnRvRml4ZWQoMil9XG4gICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNTAwIG10LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICBEYXRlOiB7bmV3IERhdGUoaW52b2ljZS5UeG5EYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKX1cbiAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICB7aW52b2ljZS5EdWVEYXRlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIER1ZToge25ldyBEYXRlKGludm9pY2UuRHVlRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCl9XG4gICAgICAgICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBoLWZ1bGxcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj5ObyBpbnZvaWNlcyBtYXRjaCB5b3VyIHNlYXJjaCBjcml0ZXJpYTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICApO1xufSAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VRdWVyeSIsIlF1aWNrYm9va3NDb25uZWN0IiwiaXNRdWlja0Jvb2tzUmVhZHkiLCJBUElfQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQkFTRV9VUkwiLCJERUJVRyIsImRlYnVnTG9nIiwiYXJncyIsImNvbnNvbGUiLCJsb2ciLCJjaGVja1F1aWNrQm9va3NBdXRoIiwicmVhZHlJbkJyb3dzZXIiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiZGF0YSIsImF1dGhlbnRpY2F0ZWQiLCJlcnJvciIsImZldGNoSW52b2ljZXMiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b29sIiwicGFyYW1zIiwiRXJyb3IiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiQXJyYXkiLCJpc0FycmF5IiwiaW52b2ljZXMiLCJJbnZvaWNlUGFuZWwiLCJzZWxlY3RlZEludm9pY2VJZCIsIm9uU2VsZWN0SW52b2ljZSIsImZpbHRlciIsInNldEZpbHRlciIsInNob3dDb25uZWN0Iiwic2V0U2hvd0Nvbm5lY3QiLCJlcnJvckRldGFpbHMiLCJzZXRFcnJvckRldGFpbHMiLCJoYXNBdHRlbXB0ZWRBdXRoIiwic2V0SGFzQXR0ZW1wdGVkQXV0aCIsImlzUmVmZXRjaGluZyIsInNldElzUmVmZXRjaGluZyIsInJldHJ5Q291bnQiLCJzZXRSZXRyeUNvdW50IiwiYXV0aFN1Y2Nlc3MiLCJzZXRBdXRoU3VjY2VzcyIsImF1dG9Mb2FkQXR0ZW1wdGVkIiwic2V0QXV0b0xvYWRBdHRlbXB0ZWQiLCJpbml0aWFsTG9hZFRpbWVyIiwiYXV0b1JldHJ5VGltZXIiLCJpc0xvYWRpbmciLCJyZWZldGNoIiwicmV0cnkiLCJyZXRyeURlbGF5IiwiYXR0ZW1wdEluZGV4IiwiTWF0aCIsIm1pbiIsInJlZmV0Y2hPbldpbmRvd0ZvY3VzIiwiZW5hYmxlZCIsInN0YWxlVGltZSIsImNhY2hlVGltZSIsIm9uRXJyb3IiLCJlcnIiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJwcmV2Iiwic2V0VGltZW91dCIsImN1cnJlbnQiLCJjbGVhclRpbWVvdXQiLCJvblN1Y2Nlc3MiLCJsZW5ndGgiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsImF1dGhTdGF0dXMiLCJnZXQiLCJlcnJvck1lc3NhZ2UiLCJ0b2tlbk9idGFpbmVkIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsImRvY3VtZW50IiwidGl0bGUiLCJwYXRobmFtZSIsInRoZW4iLCJpc0F1dGhlbnRpY2F0ZWQiLCJjaGVja1F1aWNrQm9va3NTdGF0dXMiLCJmaWx0ZXJlZEludm9pY2VzIiwiaW52b2ljZSIsIkRvY051bWJlciIsInRvTG93ZXJDYXNlIiwiQ3VzdG9tZXJSZWYiLCJuYW1lIiwiZGl2IiwiY2xhc3NOYW1lIiwiaW5pdGlhbEVycm9yIiwicCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJoMyIsInNob3VsZFNob3dMb2FkaW5nIiwiRGF0ZSIsIm5vdyIsImdldFRpbWUiLCJoMSIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2UiLCJwYXRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwic3Ryb2tlV2lkdGgiLCJkIiwiaW5wdXQiLCJ0eXBlIiwicGxhY2Vob2xkZXIiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsIm1hcCIsIklkIiwiQmFsYW5jZSIsIk51bWJlciIsIlRvdGFsQW10IiwidG9GaXhlZCIsIlR4bkRhdGUiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJEdWVEYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/InvoicePanel/index.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/QuickbooksConnect/index.tsx":
/*!********************************************************!*\
  !*** ./src/app/components/QuickbooksConnect/index.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ QuickbooksConnect)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_quickbooks_directAuth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/quickbooks/directAuth */ \"(ssr)/./src/lib/quickbooks/directAuth.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction QuickbooksConnect({ initialError = null, onConnected }) {\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(initialError);\n    const [detailedError, setDetailedError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [redirectUri, setRedirectUri] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [isClient, setIsClient] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [authStatus, setAuthStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [connectionAttempted, setConnectionAttempted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Mark that we're on the client\n        setIsClient(true);\n        // Update error if initialError changes\n        if (initialError) {\n            setError(\"Failed to connect to QuickBooks\");\n            setDetailedError(initialError);\n        }\n        // Check for auth params in URL\n        const urlParams = new URLSearchParams(window.location.search);\n        const status = urlParams.get(\"auth\");\n        setAuthStatus(status);\n        // Handle auth result\n        if (status === \"success\") {\n            console.log(\"Authentication success detected in connect component\");\n            // Call the onConnected callback if provided\n            if (onConnected) {\n                onConnected();\n            }\n        // Don't clear URL parameters immediately - let other components detect the success\n        // Other components will handle URL cleanup after they've processed the auth success\n        } else if (status === \"error\") {\n            const message = urlParams.get(\"message\") || \"Unknown error\";\n            setError(\"QuickBooks authentication failed\");\n            setDetailedError(message);\n            // After a short delay, clean up the URL\n            setTimeout(()=>{\n                window.history.replaceState({}, document.title, window.location.pathname);\n            }, 1000);\n        }\n        // Get the redirect URI for display - only on client\n        try {\n            const uri = `${window.location.origin}/api/auth/callback`;\n            setRedirectUri(uri);\n            console.log(\"Callback URI set to:\", uri);\n        } catch (err) {\n            console.error(\"Error getting redirect URI:\", err);\n        }\n        // Check connection status on load\n        checkConnectionStatus();\n    }, [\n        initialError,\n        onConnected\n    ]);\n    // Function to check the current connection status\n    const checkConnectionStatus = async ()=>{\n        try {\n            console.log(\"Checking QuickBooks connection status...\");\n            const response = await fetch(\"/api/auth/status\");\n            if (!response.ok) {\n                console.error(\"Error checking status:\", response.status);\n                return;\n            }\n            const data = await response.json();\n            console.log(\"Connection status:\", data);\n            if (data.authenticated) {\n                setAuthStatus(\"success\");\n                // Call the onConnected callback if provided\n                if (onConnected) {\n                    onConnected();\n                }\n            }\n        } catch (err) {\n            console.error(\"Error checking connection status:\", err);\n        }\n    };\n    const handleConnect = async ()=>{\n        try {\n            setIsLoading(true);\n            setError(null);\n            setDetailedError(null);\n            setConnectionAttempted(true);\n            console.log(\"Initiating QuickBooks connection...\");\n            // Get QuickBooks authorization URL\n            const response = await fetch(\"/api/auth/quickbooks\");\n            const data = await response.json();\n            if (!response.ok) {\n                console.error(\"QuickBooks auth error details:\", data);\n                throw new Error(data.error || \"Failed to get authorization URL\");\n            }\n            const { authUrl, callbackUrl } = data;\n            console.log(\"Auth URL generated:\", authUrl);\n            console.log(\"Using callback URL:\", callbackUrl);\n            // Explicitly log that we're redirecting to QuickBooks\n            console.log(\"Redirecting to QuickBooks OAuth page...\");\n            // Redirect to QuickBooks authorization page\n            window.location.href = authUrl;\n        } catch (err) {\n            console.error(\"Error connecting to QuickBooks:\", err);\n            setError(\"Failed to connect to QuickBooks\");\n            setDetailedError(err instanceof Error ? err.message : \"Unknown error occurred\");\n            setIsLoading(false);\n        }\n    };\n    const handleDirectInit = ()=>{\n        try {\n            setIsLoading(true);\n            console.log(\"Attempting direct QuickBooks initialization for development\");\n            const success = (0,_lib_quickbooks_directAuth__WEBPACK_IMPORTED_MODULE_2__.initQuickBooksDirectly)();\n            if (success) {\n                // Show success status\n                setAuthStatus(\"success\");\n            } else {\n                setError(\"Direct initialization failed\");\n                setDetailedError(\"Could not initialize QuickBooks with test credentials\");\n            }\n        } catch (err) {\n            console.error(\"Error in direct initialization:\", err);\n            setError(\"Direct initialization error\");\n            setDetailedError(err instanceof Error ? err.message : String(err));\n        } finally{\n            setIsLoading(false);\n        }\n    };\n    // If we just completed auth successfully, show success message with refresh button\n    if (authStatus === \"success\") {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-md p-6 max-w-lg mx-auto my-8\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-12 w-12 mr-4 flex items-center justify-center bg-green-600 rounded text-white font-bold text-lg\",\n                            children: \"\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 159,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-gray-800\",\n                            children: \"QuickBooks Connected!\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 162,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 158,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-green-50 p-4 rounded-lg mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-green-700 font-medium\",\n                            children: \"Successfully connected to QuickBooks\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 166,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-green-600 mt-2\",\n                            children: \"Your QuickBooks account has been connected. Loading your invoices...\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 169,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 165,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                        lineNumber: 175,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 174,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n            lineNumber: 157,\n            columnNumber: 7\n        }, this);\n    }\n    const getStorageStatus = ()=>{\n        if (true) return \"Not in browser\";\n        try {\n            const token = localStorage.getItem(\"qb_token\");\n            const realmId = localStorage.getItem(\"qb_realm_id\");\n            const refreshToken = localStorage.getItem(\"qb_refresh_token\");\n            const expiryStr = localStorage.getItem(\"qb_token_expiry\");\n            return {\n                hasToken: !!token,\n                hasRealmId: !!realmId,\n                hasRefreshToken: !!refreshToken,\n                tokenExpiry: expiryStr\n            };\n        } catch (error) {\n            console.error(\"Failed to get storage status:\", error);\n            return {\n                hasToken: false,\n                hasRealmId: false,\n                hasRefreshToken: false,\n                tokenExpiry: 0\n            };\n        }\n    };\n    // If error display is showing, add a refresh button\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"bg-white rounded-lg shadow-md p-6 max-w-lg mx-auto my-8\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-center mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"h-12 w-12 mr-4 flex items-center justify-center bg-red-600 rounded text-white font-bold text-lg\",\n                            children: \"!\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 212,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-2xl font-bold text-gray-800\",\n                            children: \"Connection Error\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 215,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 211,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"bg-red-50 p-4 rounded-lg mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-red-600 font-medium\",\n                            children: error\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 219,\n                            columnNumber: 11\n                        }, this),\n                        detailedError && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-sm text-red-500\",\n                                    children: \"Error details:\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 222,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-sm text-red-500 mt-1\",\n                                    children: detailedError\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 223,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 221,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-4 text-sm text-gray-600\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    children: \"Please make sure:\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 227,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ul\", {\n                                    className: \"list-disc pl-5 mt-1 space-y-1\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: \"Your QuickBooks developer app is properly configured\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                            lineNumber: 229,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: \"The redirect URI is registered correctly in your QuickBooks app settings\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                            lineNumber: 230,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: \"Your environment variables are set correctly\"\n                                        }, void 0, false, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                            lineNumber: 231,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 228,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 226,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 218,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col gap-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleConnect,\n                            disabled: isLoading,\n                            className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed\",\n                            children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"inline-block mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                        lineNumber: 244,\n                                        columnNumber: 17\n                                    }, this),\n                                    \"Retrying...\"\n                                ]\n                            }, void 0, true) : \"Try Again\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 237,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>window.location.reload(),\n                            className: \"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 px-4 rounded-lg transition\",\n                            children: \"Refresh Page\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 252,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 236,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mt-4 pt-4 border-t border-gray-200\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                        className: \"text-sm text-gray-600\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                                className: \"cursor-pointer font-medium\",\n                                children: \"View Connection Troubleshooting\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                lineNumber: 262,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"mt-2 p-3 bg-gray-50 rounded\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                        children: \"If you continue to have issues:\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                        lineNumber: 264,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ol\", {\n                                        className: \"list-decimal pl-5 mt-1 space-y-1\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: \"Check the browser console for any JavaScript errors\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                lineNumber: 266,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: \"Verify that your QuickBooks developer credentials are correct\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                lineNumber: 267,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: \"Check that your browser allows cookies and local storage\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                lineNumber: 268,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: \"Try using the direct initialization option for development\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                lineNumber: 269,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                                children: \"Check the server logs for any authentication errors\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                lineNumber: 270,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                        lineNumber: 265,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                lineNumber: 263,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                        lineNumber: 261,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 260,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n            lineNumber: 210,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-white rounded-lg shadow-md p-6 max-w-lg mx-auto my-8\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex items-center justify-center mb-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"h-12 w-12 mr-4 flex items-center justify-center bg-blue-600 rounded text-white font-bold text-lg\",\n                        children: \"QB\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                        lineNumber: 282,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-2xl font-bold text-gray-800\",\n                        children: \"Connect to QuickBooks\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                        lineNumber: 285,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                lineNumber: 281,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"bg-blue-50 p-4 rounded-lg mb-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-blue-700 font-medium\",\n                        children: \"QuickBooks Connection Required\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                        lineNumber: 289,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-blue-600 mt-2\",\n                        children: \"Connect to your QuickBooks account to view and manage your invoices.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                        lineNumber: 292,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                lineNumber: 288,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                onClick: handleConnect,\n                disabled: isLoading,\n                className: \"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed mb-4\",\n                children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            className: \"inline-block mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 304,\n                            columnNumber: 13\n                        }, this),\n                        \"Connecting...\"\n                    ]\n                }, void 0, true) : \"Connect to QuickBooks\"\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                lineNumber: 297,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-6 pt-6 border-t border-gray-200\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                    className: \"text-sm text-gray-600\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                            className: \"cursor-pointer font-medium\",\n                            children: \"For Developers\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 314,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 p-3 bg-gray-50 rounded text-xs\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"font-medium\",\n                                    children: \"Setup Instructions:\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 316,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ol\", {\n                                    className: \"list-decimal pl-5 mt-1 space-y-2\",\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: [\n                                                \"Make sure you have registered your app in the \",\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n                                                    href: \"https://developer.intuit.com/app/developer/dashboard\",\n                                                    className: \"text-blue-600 hover:underline\",\n                                                    target: \"_blank\",\n                                                    rel: \"noopener\",\n                                                    children: \"QuickBooks Developer Dashboard\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                    lineNumber: 319,\n                                                    columnNumber: 63\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                            lineNumber: 318,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: [\n                                                \"Register this exact callback URL in your app settings:\",\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                    className: \"mt-1 p-2 bg-gray-100 rounded break-all\",\n                                                    suppressHydrationWarning: true,\n                                                    children: isClient ? redirectUri : \"Loading callback URL...\"\n                                                }, void 0, false, {\n                                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                    lineNumber: 323,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                            lineNumber: 321,\n                                            columnNumber: 15\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"li\", {\n                                            children: [\n                                                \"Ensure your app has the following environment variables:\",\n                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"code\", {\n                                                    className: \"block mt-1 p-2 bg-gray-100 rounded\",\n                                                    children: [\n                                                        \"QUICKBOOKS_CLIENT_ID\",\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                            lineNumber: 330,\n                                                            columnNumber: 39\n                                                        }, this),\n                                                        \"QUICKBOOKS_CLIENT_SECRET\",\n                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"br\", {}, void 0, false, {\n                                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                            lineNumber: 331,\n                                                            columnNumber: 43\n                                                        }, this),\n                                                        \"NEXT_PUBLIC_BASE_URL\"\n                                                    ]\n                                                }, void 0, true, {\n                                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                                    lineNumber: 329,\n                                                    columnNumber: 17\n                                                }, this)\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                            lineNumber: 327,\n                                            columnNumber: 15\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 317,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 315,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 313,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                lineNumber: 312,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-6 pt-6 border-t border-gray-200\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                    className: \"text-sm text-gray-600\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                            className: \"cursor-pointer font-medium\",\n                            children: \"Developer Options\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 342,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"mt-2 p-3 bg-gray-50 rounded\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-red-600 text-xs mb-2\",\n                                    children: \" For development use only:\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 344,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: handleDirectInit,\n                                    className: \"w-full bg-gray-800 text-white py-2 px-3 rounded text-sm hover:bg-gray-700\",\n                                    children: \"Initialize with Test Credentials\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 345,\n                                    columnNumber: 13\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    className: \"text-xs mt-2 text-gray-500\",\n                                    children: \"This bypasses OAuth and uses fake credentials for development.\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                                    lineNumber: 351,\n                                    columnNumber: 13\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                            lineNumber: 343,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                    lineNumber: 341,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n                lineNumber: 340,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\QuickbooksConnect\\\\index.tsx\",\n        lineNumber: 280,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvUXVpY2tib29rc0Nvbm5lY3QvaW5kZXgudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFFMkM7QUFFeUI7QUFRckQsU0FBU0csa0JBQWtCLEVBQUVDLGVBQWUsSUFBSSxFQUFFQyxXQUFXLEVBQTBCO0lBQ3BHLE1BQU0sQ0FBQ0MsV0FBV0MsYUFBYSxHQUFHUCwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNRLE9BQU9DLFNBQVMsR0FBR1QsK0NBQVFBLENBQWdCSTtJQUNsRCxNQUFNLENBQUNNLGVBQWVDLGlCQUFpQixHQUFHWCwrQ0FBUUEsQ0FBZ0I7SUFDbEUsTUFBTSxDQUFDWSxhQUFhQyxlQUFlLEdBQUdiLCtDQUFRQSxDQUFTO0lBQ3ZELE1BQU0sQ0FBQ2MsVUFBVUMsWUFBWSxHQUFHZiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUNnQixZQUFZQyxjQUFjLEdBQUdqQiwrQ0FBUUEsQ0FBZ0I7SUFDNUQsTUFBTSxDQUFDa0IscUJBQXFCQyx1QkFBdUIsR0FBR25CLCtDQUFRQSxDQUFDO0lBRS9EQyxnREFBU0EsQ0FBQztRQUNSLGdDQUFnQztRQUNoQ2MsWUFBWTtRQUVaLHVDQUF1QztRQUN2QyxJQUFJWCxjQUFjO1lBQ2hCSyxTQUFTO1lBQ1RFLGlCQUFpQlA7UUFDbkI7UUFFQSwrQkFBK0I7UUFDL0IsTUFBTWdCLFlBQVksSUFBSUMsZ0JBQWdCQyxPQUFPQyxRQUFRLENBQUNDLE1BQU07UUFDNUQsTUFBTUMsU0FBU0wsVUFBVU0sR0FBRyxDQUFDO1FBQzdCVCxjQUFjUTtRQUVkLHFCQUFxQjtRQUNyQixJQUFJQSxXQUFXLFdBQVc7WUFDeEJFLFFBQVFDLEdBQUcsQ0FBQztZQUNaLDRDQUE0QztZQUM1QyxJQUFJdkIsYUFBYTtnQkFDZkE7WUFDRjtRQUNBLG1GQUFtRjtRQUNuRixvRkFBb0Y7UUFDdEYsT0FBTyxJQUFJb0IsV0FBVyxTQUFTO1lBQzdCLE1BQU1JLFVBQVVULFVBQVVNLEdBQUcsQ0FBQyxjQUFjO1lBQzVDakIsU0FBUztZQUNURSxpQkFBaUJrQjtZQUVqQix3Q0FBd0M7WUFDeENDLFdBQVc7Z0JBQ1RSLE9BQU9TLE9BQU8sQ0FBQ0MsWUFBWSxDQUFDLENBQUMsR0FBR0MsU0FBU0MsS0FBSyxFQUFFWixPQUFPQyxRQUFRLENBQUNZLFFBQVE7WUFDMUUsR0FBRztRQUNMO1FBRUEsb0RBQW9EO1FBQ3BELElBQUk7WUFDRixNQUFNQyxNQUFNLENBQUMsRUFBRWQsT0FBT0MsUUFBUSxDQUFDYyxNQUFNLENBQUMsa0JBQWtCLENBQUM7WUFDekR4QixlQUFldUI7WUFDZlQsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QlE7UUFDdEMsRUFBRSxPQUFPRSxLQUFLO1lBQ1pYLFFBQVFuQixLQUFLLENBQUMsK0JBQStCOEI7UUFDL0M7UUFFQSxrQ0FBa0M7UUFDbENDO0lBQ0YsR0FBRztRQUFDbkM7UUFBY0M7S0FBWTtJQUU5QixrREFBa0Q7SUFDbEQsTUFBTWtDLHdCQUF3QjtRQUM1QixJQUFJO1lBQ0ZaLFFBQVFDLEdBQUcsQ0FBQztZQUNaLE1BQU1ZLFdBQVcsTUFBTUMsTUFBTTtZQUU3QixJQUFJLENBQUNELFNBQVNFLEVBQUUsRUFBRTtnQkFDaEJmLFFBQVFuQixLQUFLLENBQUMsMEJBQTBCZ0MsU0FBU2YsTUFBTTtnQkFDdkQ7WUFDRjtZQUVBLE1BQU1rQixPQUFPLE1BQU1ILFNBQVNJLElBQUk7WUFDaENqQixRQUFRQyxHQUFHLENBQUMsc0JBQXNCZTtZQUVsQyxJQUFJQSxLQUFLRSxhQUFhLEVBQUU7Z0JBQ3RCNUIsY0FBYztnQkFDZCw0Q0FBNEM7Z0JBQzVDLElBQUlaLGFBQWE7b0JBQ2ZBO2dCQUNGO1lBQ0Y7UUFDRixFQUFFLE9BQU9pQyxLQUFLO1lBQ1pYLFFBQVFuQixLQUFLLENBQUMscUNBQXFDOEI7UUFDckQ7SUFDRjtJQUVBLE1BQU1RLGdCQUFnQjtRQUNwQixJQUFJO1lBQ0Z2QyxhQUFhO1lBQ2JFLFNBQVM7WUFDVEUsaUJBQWlCO1lBQ2pCUSx1QkFBdUI7WUFFdkJRLFFBQVFDLEdBQUcsQ0FBQztZQUVaLG1DQUFtQztZQUNuQyxNQUFNWSxXQUFXLE1BQU1DLE1BQU07WUFDN0IsTUFBTUUsT0FBTyxNQUFNSCxTQUFTSSxJQUFJO1lBRWhDLElBQUksQ0FBQ0osU0FBU0UsRUFBRSxFQUFFO2dCQUNoQmYsUUFBUW5CLEtBQUssQ0FBQyxrQ0FBa0NtQztnQkFDaEQsTUFBTSxJQUFJSSxNQUFNSixLQUFLbkMsS0FBSyxJQUFJO1lBQ2hDO1lBRUEsTUFBTSxFQUFFd0MsT0FBTyxFQUFFQyxXQUFXLEVBQUUsR0FBR047WUFDakNoQixRQUFRQyxHQUFHLENBQUMsdUJBQXVCb0I7WUFDbkNyQixRQUFRQyxHQUFHLENBQUMsdUJBQXVCcUI7WUFFbkMsc0RBQXNEO1lBQ3REdEIsUUFBUUMsR0FBRyxDQUFDO1lBRVosNENBQTRDO1lBQzVDTixPQUFPQyxRQUFRLENBQUMyQixJQUFJLEdBQUdGO1FBQ3pCLEVBQUUsT0FBT1YsS0FBSztZQUNaWCxRQUFRbkIsS0FBSyxDQUFDLG1DQUFtQzhCO1lBQ2pEN0IsU0FBUztZQUNURSxpQkFBaUIyQixlQUFlUyxRQUFRVCxJQUFJVCxPQUFPLEdBQUc7WUFDdER0QixhQUFhO1FBQ2Y7SUFDRjtJQUVBLE1BQU00QyxtQkFBbUI7UUFDdkIsSUFBSTtZQUNGNUMsYUFBYTtZQUNib0IsUUFBUUMsR0FBRyxDQUFDO1lBRVosTUFBTXdCLFVBQVVsRCxrRkFBc0JBO1lBRXRDLElBQUlrRCxTQUFTO2dCQUNYLHNCQUFzQjtnQkFDdEJuQyxjQUFjO1lBQ2hCLE9BQU87Z0JBQ0xSLFNBQVM7Z0JBQ1RFLGlCQUFpQjtZQUNuQjtRQUNGLEVBQUUsT0FBTzJCLEtBQUs7WUFDWlgsUUFBUW5CLEtBQUssQ0FBQyxtQ0FBbUM4QjtZQUNqRDdCLFNBQVM7WUFDVEUsaUJBQWlCMkIsZUFBZVMsUUFBUVQsSUFBSVQsT0FBTyxHQUFHd0IsT0FBT2Y7UUFDL0QsU0FBVTtZQUNSL0IsYUFBYTtRQUNmO0lBQ0Y7SUFFQSxtRkFBbUY7SUFDbkYsSUFBSVMsZUFBZSxXQUFXO1FBQzVCLHFCQUNFLDhEQUFDc0M7WUFBSUMsV0FBVTs7OEJBQ2IsOERBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0Q7NEJBQUlDLFdBQVU7c0NBQW9HOzs7Ozs7c0NBR25ILDhEQUFDQzs0QkFBR0QsV0FBVTtzQ0FBbUM7Ozs7Ozs7Ozs7Ozs4QkFHbkQsOERBQUNEO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ0U7NEJBQUVGLFdBQVU7c0NBQTZCOzs7Ozs7c0NBRzFDLDhEQUFDRTs0QkFBRUYsV0FBVTtzQ0FBc0I7Ozs7Ozs7Ozs7Ozs4QkFLckMsOERBQUNEO29CQUFJQyxXQUFVOzhCQUNiLDRFQUFDRDt3QkFBSUMsV0FBVTs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFJdkI7SUFFQSxNQUFNRyxtQkFBbUI7UUFDdkIsSUFBSSxJQUFrQixFQUFhLE9BQU87UUFFMUMsSUFBSTtZQUNGLE1BQU1DLFFBQVFDLGFBQWFDLE9BQU8sQ0FBQztZQUNuQyxNQUFNQyxVQUFVRixhQUFhQyxPQUFPLENBQUM7WUFDckMsTUFBTUUsZUFBZUgsYUFBYUMsT0FBTyxDQUFDO1lBQzFDLE1BQU1HLFlBQVlKLGFBQWFDLE9BQU8sQ0FBQztZQUV2QyxPQUFPO2dCQUNMSSxVQUFVLENBQUMsQ0FBQ047Z0JBQ1pPLFlBQVksQ0FBQyxDQUFDSjtnQkFDZEssaUJBQWlCLENBQUMsQ0FBQ0o7Z0JBQ25CSyxhQUFhSjtZQUNmO1FBQ0YsRUFBRSxPQUFPeEQsT0FBTztZQUNkbUIsUUFBUW5CLEtBQUssQ0FBQyxpQ0FBaUNBO1lBQy9DLE9BQU87Z0JBQ0x5RCxVQUFVO2dCQUNWQyxZQUFZO2dCQUNaQyxpQkFBaUI7Z0JBQ2pCQyxhQUFhO1lBQ2Y7UUFDRjtJQUNGO0lBRUEsb0RBQW9EO0lBQ3BELElBQUk1RCxPQUFPO1FBQ1QscUJBQ0UsOERBQUM4QztZQUFJQyxXQUFVOzs4QkFDYiw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDRDs0QkFBSUMsV0FBVTtzQ0FBa0c7Ozs7OztzQ0FHakgsOERBQUNDOzRCQUFHRCxXQUFVO3NDQUFtQzs7Ozs7Ozs7Ozs7OzhCQUduRCw4REFBQ0Q7b0JBQUlDLFdBQVU7O3NDQUNiLDhEQUFDRTs0QkFBRUYsV0FBVTtzQ0FBNEIvQzs7Ozs7O3dCQUN4Q0UsK0JBQ0MsOERBQUM0Qzs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNFO29DQUFFRixXQUFVOzhDQUF1Qjs7Ozs7OzhDQUNwQyw4REFBQ0U7b0NBQUVGLFdBQVU7OENBQTZCN0M7Ozs7Ozs7Ozs7OztzQ0FHOUMsOERBQUM0Qzs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNFOzhDQUFFOzs7Ozs7OENBQ0gsOERBQUNZO29DQUFHZCxXQUFVOztzREFDWiw4REFBQ2U7c0RBQUc7Ozs7OztzREFDSiw4REFBQ0E7c0RBQUc7Ozs7OztzREFDSiw4REFBQ0E7c0RBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFLViw4REFBQ2hCO29CQUFJQyxXQUFVOztzQ0FDYiw4REFBQ2dCOzRCQUNDQyxTQUFTMUI7NEJBQ1QyQixVQUFVbkU7NEJBQ1ZpRCxXQUFVO3NDQUVUakQsMEJBQ0M7O2tEQUNFLDhEQUFDb0U7d0NBQUtuQixXQUFVOzs7Ozs7b0NBQXdHOzsrQ0FJMUg7Ozs7OztzQ0FJSiw4REFBQ2dCOzRCQUNDQyxTQUFTLElBQU1sRCxPQUFPQyxRQUFRLENBQUNvRCxNQUFNOzRCQUNyQ3BCLFdBQVU7c0NBQ1g7Ozs7Ozs7Ozs7Ozs4QkFLSCw4REFBQ0Q7b0JBQUlDLFdBQVU7OEJBQ2IsNEVBQUNxQjt3QkFBUXJCLFdBQVU7OzBDQUNqQiw4REFBQ3NCO2dDQUFRdEIsV0FBVTswQ0FBNkI7Ozs7OzswQ0FDaEQsOERBQUNEO2dDQUFJQyxXQUFVOztrREFDYiw4REFBQ0U7a0RBQUU7Ozs7OztrREFDSCw4REFBQ3FCO3dDQUFHdkIsV0FBVTs7MERBQ1osOERBQUNlOzBEQUFHOzs7Ozs7MERBQ0osOERBQUNBOzBEQUFHOzs7Ozs7MERBQ0osOERBQUNBOzBEQUFHOzs7Ozs7MERBQ0osOERBQUNBOzBEQUFHOzs7Ozs7MERBQ0osOERBQUNBOzBEQUFHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQU9sQjtJQUVBLHFCQUNFLDhEQUFDaEI7UUFBSUMsV0FBVTs7MEJBQ2IsOERBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0Q7d0JBQUlDLFdBQVU7a0NBQW1HOzs7Ozs7a0NBR2xILDhEQUFDQzt3QkFBR0QsV0FBVTtrQ0FBbUM7Ozs7Ozs7Ozs7OzswQkFHbkQsOERBQUNEO2dCQUFJQyxXQUFVOztrQ0FDYiw4REFBQ0U7d0JBQUVGLFdBQVU7a0NBQTRCOzs7Ozs7a0NBR3pDLDhEQUFDRTt3QkFBRUYsV0FBVTtrQ0FBcUI7Ozs7Ozs7Ozs7OzswQkFLcEMsOERBQUNnQjtnQkFDQ0MsU0FBUzFCO2dCQUNUMkIsVUFBVW5FO2dCQUNWaUQsV0FBVTswQkFFVGpELDBCQUNDOztzQ0FDRSw4REFBQ29FOzRCQUFLbkIsV0FBVTs7Ozs7O3dCQUF3Rzs7bUNBSTFIOzs7Ozs7MEJBSUosOERBQUNEO2dCQUFJQyxXQUFVOzBCQUNiLDRFQUFDcUI7b0JBQVFyQixXQUFVOztzQ0FDakIsOERBQUNzQjs0QkFBUXRCLFdBQVU7c0NBQTZCOzs7Ozs7c0NBQ2hELDhEQUFDRDs0QkFBSUMsV0FBVTs7OENBQ2IsOERBQUNFO29DQUFFRixXQUFVOzhDQUFjOzs7Ozs7OENBQzNCLDhEQUFDdUI7b0NBQUd2QixXQUFVOztzREFDWiw4REFBQ2U7O2dEQUFHOzhEQUM0Qyw4REFBQ1M7b0RBQUU3QixNQUFLO29EQUF1REssV0FBVTtvREFBZ0N5QixRQUFPO29EQUFTQyxLQUFJOzhEQUFXOzs7Ozs7Ozs7Ozs7c0RBRXhMLDhEQUFDWDs7Z0RBQUc7OERBRUYsOERBQUNoQjtvREFBSUMsV0FBVTtvREFBeUMyQix3QkFBd0I7OERBQzdFcEUsV0FBV0YsY0FBYzs7Ozs7Ozs7Ozs7O3NEQUc5Qiw4REFBQzBEOztnREFBRzs4REFFRiw4REFBQ2E7b0RBQUs1QixXQUFVOzt3REFBcUM7c0VBQy9CLDhEQUFDNkI7Ozs7O3dEQUFJO3NFQUNELDhEQUFDQTs7Ozs7d0RBQUk7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzswQkFTekMsOERBQUM5QjtnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ3FCO29CQUFRckIsV0FBVTs7c0NBQ2pCLDhEQUFDc0I7NEJBQVF0QixXQUFVO3NDQUE2Qjs7Ozs7O3NDQUNoRCw4REFBQ0Q7NEJBQUlDLFdBQVU7OzhDQUNiLDhEQUFDRTtvQ0FBRUYsV0FBVTs4Q0FBNEI7Ozs7Ozs4Q0FDekMsOERBQUNnQjtvQ0FDQ0MsU0FBU3JCO29DQUNUSSxXQUFVOzhDQUNYOzs7Ozs7OENBR0QsOERBQUNFO29DQUFFRixXQUFVOzhDQUE2Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRdEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL3NyYy9hcHAvY29tcG9uZW50cy9RdWlja2Jvb2tzQ29ubmVjdC9pbmRleC50c3g/NjYwZCJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IHsgZ2V0UmVkaXJlY3RVcmlGb3JEaXNwbGF5IH0gZnJvbSAnQC9saWIvcXVpY2tib29rcy9hcGknXHJcbmltcG9ydCB7IGluaXRRdWlja0Jvb2tzRGlyZWN0bHkgfSBmcm9tICdAL2xpYi9xdWlja2Jvb2tzL2RpcmVjdEF1dGgnXHJcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9RdWlja2Jvb2tzQ29ubmVjdC5tb2R1bGUuY3NzJ1xyXG5cclxuaW50ZXJmYWNlIFF1aWNrYm9va3NDb25uZWN0UHJvcHMge1xyXG4gIGluaXRpYWxFcnJvcj86IHN0cmluZyB8IG51bGw7XHJcbiAgb25Db25uZWN0ZWQ/OiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBRdWlja2Jvb2tzQ29ubmVjdCh7IGluaXRpYWxFcnJvciA9IG51bGwsIG9uQ29ubmVjdGVkIH06IFF1aWNrYm9va3NDb25uZWN0UHJvcHMpIHtcclxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpXHJcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihpbml0aWFsRXJyb3IpXHJcbiAgY29uc3QgW2RldGFpbGVkRXJyb3IsIHNldERldGFpbGVkRXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbClcclxuICBjb25zdCBbcmVkaXJlY3RVcmksIHNldFJlZGlyZWN0VXJpXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpXHJcbiAgY29uc3QgW2lzQ2xpZW50LCBzZXRJc0NsaWVudF0gPSB1c2VTdGF0ZShmYWxzZSlcclxuICBjb25zdCBbYXV0aFN0YXR1cywgc2V0QXV0aFN0YXR1c10gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxyXG4gIGNvbnN0IFtjb25uZWN0aW9uQXR0ZW1wdGVkLCBzZXRDb25uZWN0aW9uQXR0ZW1wdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG4gIFxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyBNYXJrIHRoYXQgd2UncmUgb24gdGhlIGNsaWVudFxyXG4gICAgc2V0SXNDbGllbnQodHJ1ZSlcclxuICAgIFxyXG4gICAgLy8gVXBkYXRlIGVycm9yIGlmIGluaXRpYWxFcnJvciBjaGFuZ2VzXHJcbiAgICBpZiAoaW5pdGlhbEVycm9yKSB7XHJcbiAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gY29ubmVjdCB0byBRdWlja0Jvb2tzJylcclxuICAgICAgc2V0RGV0YWlsZWRFcnJvcihpbml0aWFsRXJyb3IpXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGZvciBhdXRoIHBhcmFtcyBpbiBVUkxcclxuICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcclxuICAgIGNvbnN0IHN0YXR1cyA9IHVybFBhcmFtcy5nZXQoJ2F1dGgnKVxyXG4gICAgc2V0QXV0aFN0YXR1cyhzdGF0dXMpXHJcbiAgICBcclxuICAgIC8vIEhhbmRsZSBhdXRoIHJlc3VsdFxyXG4gICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdBdXRoZW50aWNhdGlvbiBzdWNjZXNzIGRldGVjdGVkIGluIGNvbm5lY3QgY29tcG9uZW50JylcclxuICAgICAgLy8gQ2FsbCB0aGUgb25Db25uZWN0ZWQgY2FsbGJhY2sgaWYgcHJvdmlkZWRcclxuICAgICAgaWYgKG9uQ29ubmVjdGVkKSB7XHJcbiAgICAgICAgb25Db25uZWN0ZWQoKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBEb24ndCBjbGVhciBVUkwgcGFyYW1ldGVycyBpbW1lZGlhdGVseSAtIGxldCBvdGhlciBjb21wb25lbnRzIGRldGVjdCB0aGUgc3VjY2Vzc1xyXG4gICAgICAvLyBPdGhlciBjb21wb25lbnRzIHdpbGwgaGFuZGxlIFVSTCBjbGVhbnVwIGFmdGVyIHRoZXkndmUgcHJvY2Vzc2VkIHRoZSBhdXRoIHN1Y2Nlc3NcclxuICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAnZXJyb3InKSB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSB1cmxQYXJhbXMuZ2V0KCdtZXNzYWdlJykgfHwgJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIHNldEVycm9yKCdRdWlja0Jvb2tzIGF1dGhlbnRpY2F0aW9uIGZhaWxlZCcpXHJcbiAgICAgIHNldERldGFpbGVkRXJyb3IobWVzc2FnZSlcclxuICAgICAgXHJcbiAgICAgIC8vIEFmdGVyIGEgc2hvcnQgZGVsYXksIGNsZWFuIHVwIHRoZSBVUkxcclxuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVxyXG4gICAgICB9LCAxMDAwKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gR2V0IHRoZSByZWRpcmVjdCBVUkkgZm9yIGRpc3BsYXkgLSBvbmx5IG9uIGNsaWVudFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXJpID0gYCR7d2luZG93LmxvY2F0aW9uLm9yaWdpbn0vYXBpL2F1dGgvY2FsbGJhY2tgO1xyXG4gICAgICBzZXRSZWRpcmVjdFVyaSh1cmkpO1xyXG4gICAgICBjb25zb2xlLmxvZygnQ2FsbGJhY2sgVVJJIHNldCB0bzonLCB1cmkpO1xyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHJlZGlyZWN0IFVSSTpcIiwgZXJyKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgY29ubmVjdGlvbiBzdGF0dXMgb24gbG9hZFxyXG4gICAgY2hlY2tDb25uZWN0aW9uU3RhdHVzKCk7XHJcbiAgfSwgW2luaXRpYWxFcnJvciwgb25Db25uZWN0ZWRdKTtcclxuICBcclxuICAvLyBGdW5jdGlvbiB0byBjaGVjayB0aGUgY3VycmVudCBjb25uZWN0aW9uIHN0YXR1c1xyXG4gIGNvbnN0IGNoZWNrQ29ubmVjdGlvblN0YXR1cyA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBRdWlja0Jvb2tzIGNvbm5lY3Rpb24gc3RhdHVzLi4uJyk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYXV0aC9zdGF0dXMnKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIHN0YXR1czonLCBkYXRhKTtcclxuICAgICAgXHJcbiAgICAgIGlmIChkYXRhLmF1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICBzZXRBdXRoU3RhdHVzKCdzdWNjZXNzJyk7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgb25Db25uZWN0ZWQgY2FsbGJhY2sgaWYgcHJvdmlkZWRcclxuICAgICAgICBpZiAob25Db25uZWN0ZWQpIHtcclxuICAgICAgICAgIG9uQ29ubmVjdGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgY29ubmVjdGlvbiBzdGF0dXM6JywgZXJyKTtcclxuICAgIH1cclxuICB9O1xyXG4gIFxyXG4gIGNvbnN0IGhhbmRsZUNvbm5lY3QgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBzZXRJc0xvYWRpbmcodHJ1ZSlcclxuICAgICAgc2V0RXJyb3IobnVsbClcclxuICAgICAgc2V0RGV0YWlsZWRFcnJvcihudWxsKVxyXG4gICAgICBzZXRDb25uZWN0aW9uQXR0ZW1wdGVkKHRydWUpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygnSW5pdGlhdGluZyBRdWlja0Jvb2tzIGNvbm5lY3Rpb24uLi4nKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCBRdWlja0Jvb2tzIGF1dGhvcml6YXRpb24gVVJMXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYXV0aC9xdWlja2Jvb2tzJylcclxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgXHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiUXVpY2tCb29rcyBhdXRoIGVycm9yIGRldGFpbHM6XCIsIGRhdGEpO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yIHx8ICdGYWlsZWQgdG8gZ2V0IGF1dGhvcml6YXRpb24gVVJMJylcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBhdXRoVXJsLCBjYWxsYmFja1VybCB9ID0gZGF0YVxyXG4gICAgICBjb25zb2xlLmxvZyhcIkF1dGggVVJMIGdlbmVyYXRlZDpcIiwgYXV0aFVybCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiVXNpbmcgY2FsbGJhY2sgVVJMOlwiLCBjYWxsYmFja1VybCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBFeHBsaWNpdGx5IGxvZyB0aGF0IHdlJ3JlIHJlZGlyZWN0aW5nIHRvIFF1aWNrQm9va3NcclxuICAgICAgY29uc29sZS5sb2coXCJSZWRpcmVjdGluZyB0byBRdWlja0Jvb2tzIE9BdXRoIHBhZ2UuLi5cIik7XHJcbiAgICAgIFxyXG4gICAgICAvLyBSZWRpcmVjdCB0byBRdWlja0Jvb2tzIGF1dGhvcml6YXRpb24gcGFnZVxyXG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF1dGhVcmxcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb25uZWN0aW5nIHRvIFF1aWNrQm9va3M6JywgZXJyKVxyXG4gICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGNvbm5lY3QgdG8gUXVpY2tCb29rcycpXHJcbiAgICAgIHNldERldGFpbGVkRXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdVbmtub3duIGVycm9yIG9jY3VycmVkJylcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBjb25zdCBoYW5kbGVEaXJlY3RJbml0ID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG4gICAgICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyBkaXJlY3QgUXVpY2tCb29rcyBpbml0aWFsaXphdGlvbiBmb3IgZGV2ZWxvcG1lbnQnKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBpbml0UXVpY2tCb29rc0RpcmVjdGx5KCk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgIC8vIFNob3cgc3VjY2VzcyBzdGF0dXNcclxuICAgICAgICBzZXRBdXRoU3RhdHVzKCdzdWNjZXNzJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2V0RXJyb3IoJ0RpcmVjdCBpbml0aWFsaXphdGlvbiBmYWlsZWQnKTtcclxuICAgICAgICBzZXREZXRhaWxlZEVycm9yKCdDb3VsZCBub3QgaW5pdGlhbGl6ZSBRdWlja0Jvb2tzIHdpdGggdGVzdCBjcmVkZW50aWFscycpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZGlyZWN0IGluaXRpYWxpemF0aW9uOicsIGVycik7XHJcbiAgICAgIHNldEVycm9yKCdEaXJlY3QgaW5pdGlhbGl6YXRpb24gZXJyb3InKTtcclxuICAgICAgc2V0RGV0YWlsZWRFcnJvcihlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogU3RyaW5nKGVycikpO1xyXG4gICAgfSBmaW5hbGx5IHtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgIH1cclxuICB9O1xyXG4gIFxyXG4gIC8vIElmIHdlIGp1c3QgY29tcGxldGVkIGF1dGggc3VjY2Vzc2Z1bGx5LCBzaG93IHN1Y2Nlc3MgbWVzc2FnZSB3aXRoIHJlZnJlc2ggYnV0dG9uXHJcbiAgaWYgKGF1dGhTdGF0dXMgPT09ICdzdWNjZXNzJykge1xyXG4gICAgcmV0dXJuIChcclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy13aGl0ZSByb3VuZGVkLWxnIHNoYWRvdy1tZCBwLTYgbWF4LXctbGcgbXgtYXV0byBteS04XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtYi00XCI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtMTIgdy0xMiBtci00IGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyZWVuLTYwMCByb3VuZGVkIHRleHQtd2hpdGUgZm9udC1ib2xkIHRleHQtbGdcIj5cclxuICAgICAgICAgICAg4pyTXHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LTJ4bCBmb250LWJvbGQgdGV4dC1ncmF5LTgwMFwiPlF1aWNrQm9va3MgQ29ubmVjdGVkITwvaDI+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJiZy1ncmVlbi01MCBwLTQgcm91bmRlZC1sZyBtYi02XCI+XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyZWVuLTcwMCBmb250LW1lZGl1bVwiPlxyXG4gICAgICAgICAgICBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIFF1aWNrQm9va3NcclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtZ3JlZW4tNjAwIG10LTJcIj5cclxuICAgICAgICAgICAgWW91ciBRdWlja0Jvb2tzIGFjY291bnQgaGFzIGJlZW4gY29ubmVjdGVkLiBMb2FkaW5nIHlvdXIgaW52b2ljZXMuLi5cclxuICAgICAgICAgIDwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgganVzdGlmeS1jZW50ZXJcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTggdy04IGJvcmRlci1iLTIgYm9yZGVyLWJsdWUtNTAwXCI+PC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PlxyXG4gICAgKTtcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgZ2V0U3RvcmFnZVN0YXR1cyA9ICgpID0+IHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuICdOb3QgaW4gYnJvd3Nlcic7XHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3FiX3Rva2VuJyk7XHJcbiAgICAgIGNvbnN0IHJlYWxtSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncWJfcmVhbG1faWQnKTtcclxuICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3FiX3JlZnJlc2hfdG9rZW4nKTtcclxuICAgICAgY29uc3QgZXhwaXJ5U3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3FiX3Rva2VuX2V4cGlyeScpO1xyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBoYXNUb2tlbjogISF0b2tlbixcclxuICAgICAgICBoYXNSZWFsbUlkOiAhIXJlYWxtSWQsXHJcbiAgICAgICAgaGFzUmVmcmVzaFRva2VuOiAhIXJlZnJlc2hUb2tlbixcclxuICAgICAgICB0b2tlbkV4cGlyeTogZXhwaXJ5U3RyXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHN0b3JhZ2Ugc3RhdHVzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBoYXNUb2tlbjogZmFsc2UsXHJcbiAgICAgICAgaGFzUmVhbG1JZDogZmFsc2UsXHJcbiAgICAgICAgaGFzUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgICB0b2tlbkV4cGlyeTogMFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBJZiBlcnJvciBkaXNwbGF5IGlzIHNob3dpbmcsIGFkZCBhIHJlZnJlc2ggYnV0dG9uXHJcbiAgaWYgKGVycm9yKSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kIHAtNiBtYXgtdy1sZyBteC1hdXRvIG15LThcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1iLTRcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC0xMiB3LTEyIG1yLTQgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctcmVkLTYwMCByb3VuZGVkIHRleHQtd2hpdGUgZm9udC1ib2xkIHRleHQtbGdcIj5cclxuICAgICAgICAgICAgIVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS04MDBcIj5Db25uZWN0aW9uIEVycm9yPC9oMj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXJlZC01MCBwLTQgcm91bmRlZC1sZyBtYi02XCI+XHJcbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgZm9udC1tZWRpdW1cIj57ZXJyb3J9PC9wPlxyXG4gICAgICAgICAge2RldGFpbGVkRXJyb3IgJiYgKFxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTJcIj5cclxuICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtcmVkLTUwMFwiPkVycm9yIGRldGFpbHM6PC9wPlxyXG4gICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1yZWQtNTAwIG10LTFcIj57ZGV0YWlsZWRFcnJvcn08L3A+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cclxuICAgICAgICAgICAgPHA+UGxlYXNlIG1ha2Ugc3VyZTo8L3A+XHJcbiAgICAgICAgICAgIDx1bCBjbGFzc05hbWU9XCJsaXN0LWRpc2MgcGwtNSBtdC0xIHNwYWNlLXktMVwiPlxyXG4gICAgICAgICAgICAgIDxsaT5Zb3VyIFF1aWNrQm9va3MgZGV2ZWxvcGVyIGFwcCBpcyBwcm9wZXJseSBjb25maWd1cmVkPC9saT5cclxuICAgICAgICAgICAgICA8bGk+VGhlIHJlZGlyZWN0IFVSSSBpcyByZWdpc3RlcmVkIGNvcnJlY3RseSBpbiB5b3VyIFF1aWNrQm9va3MgYXBwIHNldHRpbmdzPC9saT5cclxuICAgICAgICAgICAgICA8bGk+WW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHNldCBjb3JyZWN0bHk8L2xpPlxyXG4gICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGdhcC0zXCI+XHJcbiAgICAgICAgICA8YnV0dG9uXHJcbiAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNvbm5lY3R9XHJcbiAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XHJcbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1ibHVlLTYwMCBob3ZlcjpiZy1ibHVlLTcwMCB0ZXh0LXdoaXRlIGZvbnQtbWVkaXVtIHB5LTMgcHgtNCByb3VuZGVkLWxnIHRyYW5zaXRpb24gZGlzYWJsZWQ6b3BhY2l0eS01MCBkaXNhYmxlZDpjdXJzb3Itbm90LWFsbG93ZWRcIlxyXG4gICAgICAgICAgPlxyXG4gICAgICAgICAgICB7aXNMb2FkaW5nID8gKFxyXG4gICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgbXItMiBoLTQgdy00IGJvcmRlci0yIGJvcmRlci13aGl0ZSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgUmV0cnlpbmcuLi5cclxuICAgICAgICAgICAgICA8Lz5cclxuICAgICAgICAgICAgKSA6IChcclxuICAgICAgICAgICAgICAnVHJ5IEFnYWluJ1xyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpfVxyXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAgdGV4dC1ncmF5LTgwMCBmb250LW1lZGl1bSBweS0zIHB4LTQgcm91bmRlZC1sZyB0cmFuc2l0aW9uXCJcclxuICAgICAgICAgID5cclxuICAgICAgICAgICAgUmVmcmVzaCBQYWdlXHJcbiAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICBcclxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcHQtNCBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cclxuICAgICAgICAgIDxkZXRhaWxzIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxyXG4gICAgICAgICAgICA8c3VtbWFyeSBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciBmb250LW1lZGl1bVwiPlZpZXcgQ29ubmVjdGlvbiBUcm91Ymxlc2hvb3Rpbmc8L3N1bW1hcnk+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBwLTMgYmctZ3JheS01MCByb3VuZGVkXCI+XHJcbiAgICAgICAgICAgICAgPHA+SWYgeW91IGNvbnRpbnVlIHRvIGhhdmUgaXNzdWVzOjwvcD5cclxuICAgICAgICAgICAgICA8b2wgY2xhc3NOYW1lPVwibGlzdC1kZWNpbWFsIHBsLTUgbXQtMSBzcGFjZS15LTFcIj5cclxuICAgICAgICAgICAgICAgIDxsaT5DaGVjayB0aGUgYnJvd3NlciBjb25zb2xlIGZvciBhbnkgSmF2YVNjcmlwdCBlcnJvcnM8L2xpPlxyXG4gICAgICAgICAgICAgICAgPGxpPlZlcmlmeSB0aGF0IHlvdXIgUXVpY2tCb29rcyBkZXZlbG9wZXIgY3JlZGVudGlhbHMgYXJlIGNvcnJlY3Q8L2xpPlxyXG4gICAgICAgICAgICAgICAgPGxpPkNoZWNrIHRoYXQgeW91ciBicm93c2VyIGFsbG93cyBjb29raWVzIGFuZCBsb2NhbCBzdG9yYWdlPC9saT5cclxuICAgICAgICAgICAgICAgIDxsaT5UcnkgdXNpbmcgdGhlIGRpcmVjdCBpbml0aWFsaXphdGlvbiBvcHRpb24gZm9yIGRldmVsb3BtZW50PC9saT5cclxuICAgICAgICAgICAgICAgIDxsaT5DaGVjayB0aGUgc2VydmVyIGxvZ3MgZm9yIGFueSBhdXRoZW50aWNhdGlvbiBlcnJvcnM8L2xpPlxyXG4gICAgICAgICAgICAgIDwvb2w+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kZXRhaWxzPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgICk7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LW1kIHAtNiBtYXgtdy1sZyBteC1hdXRvIG15LThcIj5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBtYi00XCI+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLTEyIHctMTIgbXItNCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ibHVlLTYwMCByb3VuZGVkIHRleHQtd2hpdGUgZm9udC1ib2xkIHRleHQtbGdcIj5cclxuICAgICAgICAgIFFCXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwXCI+Q29ubmVjdCB0byBRdWlja0Jvb2tzPC9oMj5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImJnLWJsdWUtNTAgcC00IHJvdW5kZWQtbGcgbWItNlwiPlxyXG4gICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmx1ZS03MDAgZm9udC1tZWRpdW1cIj5cclxuICAgICAgICAgIFF1aWNrQm9va3MgQ29ubmVjdGlvbiBSZXF1aXJlZFxyXG4gICAgICAgIDwvcD5cclxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNjAwIG10LTJcIj5cclxuICAgICAgICAgIENvbm5lY3QgdG8geW91ciBRdWlja0Jvb2tzIGFjY291bnQgdG8gdmlldyBhbmQgbWFuYWdlIHlvdXIgaW52b2ljZXMuXHJcbiAgICAgICAgPC9wPlxyXG4gICAgICA8L2Rpdj5cclxuICAgICAgXHJcbiAgICAgIDxidXR0b25cclxuICAgICAgICBvbkNsaWNrPXtoYW5kbGVDb25uZWN0fVxyXG4gICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XHJcbiAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIGJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNzAwIHRleHQtd2hpdGUgZm9udC1tZWRpdW0gcHktMyBweC00IHJvdW5kZWQtbGcgdHJhbnNpdGlvbiBkaXNhYmxlZDpvcGFjaXR5LTUwIGRpc2FibGVkOmN1cnNvci1ub3QtYWxsb3dlZCBtYi00XCJcclxuICAgICAgPlxyXG4gICAgICAgIHtpc0xvYWRpbmcgPyAoXHJcbiAgICAgICAgICA8PlxyXG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJpbmxpbmUtYmxvY2sgbXItMiBoLTQgdy00IGJvcmRlci0yIGJvcmRlci13aGl0ZSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluXCI+PC9zcGFuPlxyXG4gICAgICAgICAgICBDb25uZWN0aW5nLi4uXHJcbiAgICAgICAgICA8Lz5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgJ0Nvbm5lY3QgdG8gUXVpY2tCb29rcydcclxuICAgICAgICApfVxyXG4gICAgICA8L2J1dHRvbj5cclxuICAgICAgXHJcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNiBwdC02IGJvcmRlci10IGJvcmRlci1ncmF5LTIwMFwiPlxyXG4gICAgICAgIDxkZXRhaWxzIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPlxyXG4gICAgICAgICAgPHN1bW1hcnkgY2xhc3NOYW1lPVwiY3Vyc29yLXBvaW50ZXIgZm9udC1tZWRpdW1cIj5Gb3IgRGV2ZWxvcGVyczwvc3VtbWFyeT5cclxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBwLTMgYmctZ3JheS01MCByb3VuZGVkIHRleHQteHNcIj5cclxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5TZXR1cCBJbnN0cnVjdGlvbnM6PC9wPlxyXG4gICAgICAgICAgICA8b2wgY2xhc3NOYW1lPVwibGlzdC1kZWNpbWFsIHBsLTUgbXQtMSBzcGFjZS15LTJcIj5cclxuICAgICAgICAgICAgICA8bGk+XHJcbiAgICAgICAgICAgICAgICBNYWtlIHN1cmUgeW91IGhhdmUgcmVnaXN0ZXJlZCB5b3VyIGFwcCBpbiB0aGUgPGEgaHJlZj1cImh0dHBzOi8vZGV2ZWxvcGVyLmludHVpdC5jb20vYXBwL2RldmVsb3Blci9kYXNoYm9hcmRcIiBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNjAwIGhvdmVyOnVuZGVybGluZVwiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyXCI+UXVpY2tCb29rcyBEZXZlbG9wZXIgRGFzaGJvYXJkPC9hPlxyXG4gICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgICAgPGxpPlxyXG4gICAgICAgICAgICAgICAgUmVnaXN0ZXIgdGhpcyBleGFjdCBjYWxsYmFjayBVUkwgaW4geW91ciBhcHAgc2V0dGluZ3M6XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTEgcC0yIGJnLWdyYXktMTAwIHJvdW5kZWQgYnJlYWstYWxsXCIgc3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nPlxyXG4gICAgICAgICAgICAgICAgICB7aXNDbGllbnQgPyByZWRpcmVjdFVyaSA6ICdMb2FkaW5nIGNhbGxiYWNrIFVSTC4uLid9XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICAgIDxsaT5cclxuICAgICAgICAgICAgICAgIEVuc3VyZSB5b3VyIGFwcCBoYXMgdGhlIGZvbGxvd2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXM6IFxyXG4gICAgICAgICAgICAgICAgPGNvZGUgY2xhc3NOYW1lPVwiYmxvY2sgbXQtMSBwLTIgYmctZ3JheS0xMDAgcm91bmRlZFwiPlxyXG4gICAgICAgICAgICAgICAgICBRVUlDS0JPT0tTX0NMSUVOVF9JRDxici8+XHJcbiAgICAgICAgICAgICAgICAgIFFVSUNLQk9PS1NfQ0xJRU5UX1NFQ1JFVDxici8+XHJcbiAgICAgICAgICAgICAgICAgIE5FWFRfUFVCTElDX0JBU0VfVVJMXHJcbiAgICAgICAgICAgICAgICA8L2NvZGU+XHJcbiAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgPC9vbD5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDwvZGV0YWlscz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIFxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTYgcHQtNiBib3JkZXItdCBib3JkZXItZ3JheS0yMDBcIj5cclxuICAgICAgICA8ZGV0YWlscyBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj5cclxuICAgICAgICAgIDxzdW1tYXJ5IGNsYXNzTmFtZT1cImN1cnNvci1wb2ludGVyIGZvbnQtbWVkaXVtXCI+RGV2ZWxvcGVyIE9wdGlvbnM8L3N1bW1hcnk+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcC0zIGJnLWdyYXktNTAgcm91bmRlZFwiPlxyXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXJlZC02MDAgdGV4dC14cyBtYi0yXCI+4pqg77iPIEZvciBkZXZlbG9wbWVudCB1c2Ugb25seTo8L3A+XHJcbiAgICAgICAgICAgIDxidXR0b25cclxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVEaXJlY3RJbml0fVxyXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBiZy1ncmF5LTgwMCB0ZXh0LXdoaXRlIHB5LTIgcHgtMyByb3VuZGVkIHRleHQtc20gaG92ZXI6YmctZ3JheS03MDBcIlxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgSW5pdGlhbGl6ZSB3aXRoIFRlc3QgQ3JlZGVudGlhbHNcclxuICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgbXQtMiB0ZXh0LWdyYXktNTAwXCI+XHJcbiAgICAgICAgICAgICAgVGhpcyBieXBhc3NlcyBPQXV0aCBhbmQgdXNlcyBmYWtlIGNyZWRlbnRpYWxzIGZvciBkZXZlbG9wbWVudC5cclxuICAgICAgICAgICAgPC9wPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9kZXRhaWxzPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gIClcclxufSAiXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJpbml0UXVpY2tCb29rc0RpcmVjdGx5IiwiUXVpY2tib29rc0Nvbm5lY3QiLCJpbml0aWFsRXJyb3IiLCJvbkNvbm5lY3RlZCIsImlzTG9hZGluZyIsInNldElzTG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJkZXRhaWxlZEVycm9yIiwic2V0RGV0YWlsZWRFcnJvciIsInJlZGlyZWN0VXJpIiwic2V0UmVkaXJlY3RVcmkiLCJpc0NsaWVudCIsInNldElzQ2xpZW50IiwiYXV0aFN0YXR1cyIsInNldEF1dGhTdGF0dXMiLCJjb25uZWN0aW9uQXR0ZW1wdGVkIiwic2V0Q29ubmVjdGlvbkF0dGVtcHRlZCIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3RhdHVzIiwiZ2V0IiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJzZXRUaW1lb3V0IiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsImRvY3VtZW50IiwidGl0bGUiLCJwYXRobmFtZSIsInVyaSIsIm9yaWdpbiIsImVyciIsImNoZWNrQ29ubmVjdGlvblN0YXR1cyIsInJlc3BvbnNlIiwiZmV0Y2giLCJvayIsImRhdGEiLCJqc29uIiwiYXV0aGVudGljYXRlZCIsImhhbmRsZUNvbm5lY3QiLCJFcnJvciIsImF1dGhVcmwiLCJjYWxsYmFja1VybCIsImhyZWYiLCJoYW5kbGVEaXJlY3RJbml0Iiwic3VjY2VzcyIsIlN0cmluZyIsImRpdiIsImNsYXNzTmFtZSIsImgyIiwicCIsImdldFN0b3JhZ2VTdGF0dXMiLCJ0b2tlbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJyZWFsbUlkIiwicmVmcmVzaFRva2VuIiwiZXhwaXJ5U3RyIiwiaGFzVG9rZW4iLCJoYXNSZWFsbUlkIiwiaGFzUmVmcmVzaFRva2VuIiwidG9rZW5FeHBpcnkiLCJ1bCIsImxpIiwiYnV0dG9uIiwib25DbGljayIsImRpc2FibGVkIiwic3BhbiIsInJlbG9hZCIsImRldGFpbHMiLCJzdW1tYXJ5Iiwib2wiLCJhIiwidGFyZ2V0IiwicmVsIiwic3VwcHJlc3NIeWRyYXRpb25XYXJuaW5nIiwiY29kZSIsImJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/QuickbooksConnect/index.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/components/ToolsPanel/index.tsx":
/*!*************************************************!*\
  !*** ./src/app/components/ToolsPanel/index.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ToolsPanel)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/ai/tools */ \"(ssr)/./src/lib/ai/tools.ts\");\n/* harmony import */ var _QuickbooksConnect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../QuickbooksConnect */ \"(ssr)/./src/app/components/QuickbooksConnect/index.tsx\");\n/* harmony import */ var _lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/quickbooks/api */ \"(ssr)/./src/lib/quickbooks/api.ts\");\n\n\n\n\n\nconst API_BASE_URL = \"http://localhost:3000\" || 0;\n// Function to check if QuickBooks is authenticated\nconst checkQuickBooksAuth = async ()=>{\n    try {\n        // First check if we have tokens in localStorage\n        if ((0,_lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_4__.isQuickBooksReady)()) {\n            return true;\n        }\n        // If not, check with the server\n        const response = await fetch(`${API_BASE_URL}/api/auth/status`);\n        if (!response.ok) {\n            return false;\n        }\n        const data = await response.json();\n        return data.authenticated;\n    } catch (error) {\n        console.error(\"Error checking QuickBooks auth status:\", error);\n        return false;\n    }\n};\nfunction ToolsPanel() {\n    const [toolStatus, setToolStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(Object.keys(_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.invoiceTools).reduce((acc, toolName)=>({\n            ...acc,\n            [toolName]: {\n                name: toolName,\n                status: \"idle\"\n            }\n        }), {}));\n    const [selectedInvoiceId, setSelectedInvoiceId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [selectedTool, setSelectedTool] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"summarizeInvoice\");\n    const [invoices, setInvoices] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showConnect, setShowConnect] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [hasLoadedInvoices, setHasLoadedInvoices] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [autoFetchAttempted, setAutoFetchAttempted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Function to fetch invoices for tools panel\n    const fetchInvoices = async ()=>{\n        try {\n            setIsLoading(true);\n            setError(null);\n            console.log(\"Fetching invoices for tools panel using chat/tool API\");\n            // Use the new centralized endpoint for consistent data\n            const response = await fetch(\"/api/chat/tool\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    tool: \"listInvoices\",\n                    params: {}\n                })\n            });\n            if (!response.ok) {\n                const errorData = await response.json();\n                console.error(\"Error response from invoices API:\", errorData);\n                throw new Error(errorData.error || \"Failed to fetch invoices\");\n            }\n            const data = await response.json();\n            console.log(`Successfully fetched invoices for tools panel`);\n            // Handle different response formats\n            let invoicesData;\n            if (Array.isArray(data)) {\n                invoicesData = data;\n            } else if (data.invoices && Array.isArray(data.invoices)) {\n                invoicesData = data.invoices;\n            } else if (data.error) {\n                throw new Error(data.error);\n            } else {\n                throw new Error(\"Invalid response format from server\");\n            }\n            setInvoices(invoicesData);\n            setHasLoadedInvoices(true);\n            // Auto-select the first invoice if available\n            if (invoicesData.length > 0) {\n                setSelectedInvoiceId(invoicesData[0].Id);\n                // Auto-execute the default tool if an invoice is selected\n                setTimeout(()=>{\n                    handleToolClick(\"summarizeInvoice\");\n                }, 500);\n            }\n        } catch (err) {\n            console.error(\"Error fetching invoices:\", err);\n            // If it's an authentication error, show connect UI\n            if (err instanceof Error && err.message.includes(\"QuickBooks client not initialized\")) {\n                setShowConnect(true);\n            }\n            setError(err instanceof Error ? err.message : \"Failed to load invoices\");\n            setHasLoadedInvoices(true);\n        } finally{\n            setIsLoading(false);\n            setAutoFetchAttempted(true);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const checkQuickBooksStatus = async ()=>{\n            try {\n                setIsLoading(true);\n                // First check if QuickBooks is authenticated\n                const isAuthenticated = await checkQuickBooksAuth();\n                if (!isAuthenticated && !hasLoadedInvoices) {\n                    console.log(\"QuickBooks not authenticated, showing connect UI\");\n                    setShowConnect(true);\n                    setIsLoading(false);\n                    return; // Don't try to fetch invoices if not authenticated\n                }\n                // If we've already loaded invoices successfully, don't show connect UI again\n                if (hasLoadedInvoices) {\n                    setShowConnect(false);\n                }\n                // Check for auth query params in case we just completed authentication\n                const urlParams = new URLSearchParams(window.location.search);\n                const authStatus = urlParams.get(\"auth\");\n                if (authStatus === \"success\") {\n                    console.log(\"Authentication success detected, clearing URL params\");\n                    window.history.replaceState({}, document.title, window.location.pathname);\n                }\n                // Automatically fetch invoices instead of waiting for button click\n                console.log(\"QuickBooks authenticated, automatically fetching invoices\");\n                fetchInvoices();\n            } catch (err) {\n                console.error(\"Error checking QuickBooks status:\", err);\n                setError(err instanceof Error ? err.message : \"Failed to check QuickBooks status\");\n                setIsLoading(false);\n            }\n        };\n        checkQuickBooksStatus();\n    }, [\n        hasLoadedInvoices\n    ]);\n    // Set up a retry mechanism in case the first attempt fails\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // If we're not showing the connect UI and haven't loaded invoices yet, retry after a delay\n        if (!showConnect && !hasLoadedInvoices && !isLoading && !autoFetchAttempted) {\n            console.log(\"Setting up automatic retry for invoice fetching\");\n            const retryTimer = setTimeout(()=>{\n                console.log(\"Auto-retrying invoice fetch\");\n                fetchInvoices();\n            }, 2000);\n            return ()=>clearTimeout(retryTimer);\n        }\n    }, [\n        showConnect,\n        hasLoadedInvoices,\n        isLoading,\n        autoFetchAttempted\n    ]);\n    const clearToolResults = ()=>{\n        setToolStatus((prev)=>{\n            const newStatus = {\n                ...prev\n            };\n            Object.keys(newStatus).forEach((key)=>{\n                newStatus[key] = {\n                    ...newStatus[key],\n                    status: \"idle\",\n                    result: null\n                };\n            });\n            return newStatus;\n        });\n    };\n    const handleToolSelect = (toolName)=>{\n        setSelectedTool(toolName);\n        clearToolResults();\n    };\n    const handleToolClick = async (toolName)=>{\n        const tool = _lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.invoiceTools[toolName];\n        if (!tool) return;\n        setToolStatus((prev)=>{\n            const newStatus = {\n                ...prev\n            };\n            Object.keys(newStatus).forEach((key)=>{\n                if (key !== toolName) {\n                    newStatus[key] = {\n                        ...newStatus[key],\n                        status: \"idle\",\n                        result: null\n                    };\n                }\n            });\n            return {\n                ...newStatus,\n                [toolName]: {\n                    ...newStatus[toolName],\n                    status: \"executing\"\n                }\n            };\n        });\n        try {\n            console.log(`Executing tool: ${toolName}`);\n            let result;\n            if (toolName === \"getInvoice\") {\n                result = await (0,_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.handleToolCall)(toolName, {\n                    id: selectedInvoiceId\n                });\n            } else if (toolName === \"listInvoices\") {\n                result = await (0,_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.handleToolCall)(toolName, {});\n            } else if (toolName === \"summarizeInvoice\") {\n                result = await (0,_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.handleToolCall)(toolName, {\n                    id: selectedInvoiceId\n                });\n            } else if (toolName === \"analyzeInvoices\") {\n                result = await (0,_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.handleToolCall)(toolName, {\n                    analysisType: \"trends\"\n                });\n            }\n            console.log(`Tool execution completed: ${toolName}`);\n            setToolStatus((prev)=>({\n                    ...prev,\n                    [toolName]: {\n                        ...prev[toolName],\n                        status: \"completed\",\n                        result\n                    }\n                }));\n        } catch (error) {\n            console.error(`Error executing tool ${toolName}:`, error);\n            setToolStatus((prev)=>({\n                    ...prev,\n                    [toolName]: {\n                        ...prev[toolName],\n                        status: \"error\",\n                        result: error\n                    }\n                }));\n        }\n    };\n    const getStatusColor = (status)=>{\n        switch(status){\n            case \"idle\":\n                return \"bg-gray-200\";\n            case \"executing\":\n                return \"bg-yellow-200\";\n            case \"completed\":\n                return \"bg-green-200\";\n            case \"error\":\n                return \"bg-red-200\";\n            default:\n                return \"bg-gray-200\";\n        }\n    };\n    const renderResult = (result, toolName)=>{\n        if (!result) return null;\n        if (toolName === \"summarizeInvoice\") {\n            // Add safety checks for result structure\n            const summary = result.summary || \"Invoice Summary\";\n            const details = result.details || {};\n            const balance = details.balance || \"$0.00\";\n            const amount = details.amount || \"$0.00\";\n            const date = details.date || \"Unknown\";\n            const dueDate = details.dueDate || \"Unknown\";\n            const memo = details.memo || \"No memo available\";\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-4 p-4 bg-white rounded-lg shadow-sm border border-gray-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex items-center justify-between mb-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                className: \"text-lg font-semibold text-gray-800\",\n                                children: summary\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 277,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full\",\n                                children: balance\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 278,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 276,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"grid grid-cols-2 gap-4 text-sm\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-gray-500\",\n                                                children: \"Amount:\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 285,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"ml-2 font-medium\",\n                                                children: amount\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 286,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 284,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-gray-500\",\n                                                children: \"Date:\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 289,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"ml-2 font-medium\",\n                                                children: date\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 290,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 288,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-gray-500\",\n                                                children: \"Due Date:\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 293,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"ml-2 font-medium\",\n                                                children: dueDate\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 294,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 292,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 283,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"space-y-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-gray-500\",\n                                                children: \"Balance:\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 299,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"ml-2 font-medium\",\n                                                children: balance\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 300,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 298,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"col-span-2\",\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                                className: \"text-gray-500\",\n                                                children: \"Memo:\"\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 303,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"mt-1 p-2 bg-gray-50 rounded text-gray-700\",\n                                                children: memo\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 304,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 302,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 297,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 282,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                lineNumber: 275,\n                columnNumber: 9\n            }, this);\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"mt-2 p-2 bg-gray-50 rounded\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                className: \"text-sm overflow-auto\",\n                children: JSON.stringify(result, null, 2)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                lineNumber: 316,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n            lineNumber: 315,\n            columnNumber: 7\n        }, this);\n    };\n    const handleDirectInitialization = async ()=>{\n        try {\n            console.log(\"Attempting direct QuickBooks initialization\");\n            const result = (0,_lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_4__.manuallyInitializeQuickBooks)();\n            if (result) {\n                console.log(\"QuickBooks manual initialization successful\");\n                // Refresh the page to apply the changes\n                window.location.reload();\n            } else {\n                setError(\"Failed to manually initialize QuickBooks\");\n            }\n        } catch (err) {\n            console.error(\"Error during manual initialization:\", err);\n            setError(\"Error during manual initialization: \" + (err instanceof Error ? err.message : String(err)));\n        }\n    };\n    // Modify the UI to remove the \"Fetch Invoices\" button and show auto-loading indicator\n    if (!hasLoadedInvoices || isLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full p-4 flex flex-col\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-xl font-bold text-gray-800\",\n                            children: \"Invoice Tools\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 346,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-600\",\n                            children: \"Loading invoice tools...\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 347,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 345,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex-1 flex items-center justify-center\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex flex-col items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500 mb-3\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 352,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-blue-600 text-sm\",\n                                children: \"Automatically loading invoice data...\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 353,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 351,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 350,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n            lineNumber: 344,\n            columnNumber: 7\n        }, this);\n    }\n    if (showConnect) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-xl font-bold text-gray-800\",\n                            children: \"Invoice Tools\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 364,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-600 mb-2\",\n                            children: \"Connect your QuickBooks account to use these tools\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 365,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 363,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_QuickbooksConnect__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {}, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 367,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n            lineNumber: 362,\n            columnNumber: 7\n        }, this);\n    }\n    if (error) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-xl font-bold text-gray-800\",\n                            children: \"Invoice Tools\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 376,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-600 mb-2\",\n                            children: \"There was an error loading invoice data\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 377,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 375,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 bg-red-50 border border-red-200 rounded-lg mb-4\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-red-600\",\n                        children: error\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 380,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 379,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: ()=>fetchInvoices(),\n                    className: \"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600\",\n                    children: \"Try Again\"\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 382,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n            lineNumber: 374,\n            columnNumber: 7\n        }, this);\n    }\n    if (invoices.length === 0) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"h-full p-4\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                            className: \"text-xl font-bold text-gray-800\",\n                            children: \"Invoice Tools\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 396,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"text-sm text-gray-600 mb-2\",\n                            children: \"No invoices found in your QuickBooks account\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 397,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 395,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"p-4 bg-blue-50 border border-blue-200 rounded-lg\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-blue-600\",\n                        children: \"Please add invoices to your QuickBooks account to use these tools.\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 400,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 399,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n            lineNumber: 394,\n            columnNumber: 7\n        }, this);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-4 border-t\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-6\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                        className: \"text-2xl font-bold text-gray-900 mb-2\",\n                        children: \"Invoice Tools\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 409,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-gray-600\",\n                        children: \"Select an invoice and tool to analyze your data\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 410,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                lineNumber: 408,\n                columnNumber: 7\n            }, this),\n            invoices.length === 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-blue-700 mb-3\",\n                        children: \"No invoices have been loaded yet. Click the button below to fetch invoices:\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 416,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: fetchInvoices,\n                        className: \"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\",\n                        children: \"Fetch Invoices\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 417,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                lineNumber: 415,\n                columnNumber: 9\n            }, this),\n            invoices.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mb-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center space-x-4\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"invoice-select\",\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Select Invoice\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                    lineNumber: 430,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                    id: \"invoice-select\",\n                                    value: selectedInvoiceId,\n                                    onChange: (e)=>setSelectedInvoiceId(e.target.value),\n                                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                                    children: invoices.map((invoice)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: invoice.Id,\n                                            children: [\n                                                \"Invoice #\",\n                                                invoice.DocNumber,\n                                                \" - \",\n                                                invoice.CustomerRef.name,\n                                                \" ($\",\n                                                invoice.TotalAmt,\n                                                \")\"\n                                            ]\n                                        }, invoice.Id, true, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                            lineNumber: 440,\n                                            columnNumber: 19\n                                        }, this))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                    lineNumber: 433,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 429,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex-1\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                                    htmlFor: \"tool-select\",\n                                    className: \"block text-sm font-medium text-gray-700 mb-1\",\n                                    children: \"Select Tool\"\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                    lineNumber: 448,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                                    id: \"tool-select\",\n                                    value: selectedTool,\n                                    onChange: (e)=>handleToolSelect(e.target.value),\n                                    className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\",\n                                    children: Object.entries(_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.invoiceTools).map(([name, tool])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                                            value: name,\n                                            children: [\n                                                tool.name,\n                                                \" - \",\n                                                tool.description\n                                            ]\n                                        }, name, true, {\n                                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                            lineNumber: 458,\n                                            columnNumber: 19\n                                        }, this))\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                    lineNumber: 451,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 447,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-end\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>handleToolClick(selectedTool),\n                                disabled: toolStatus[selectedTool].status === \"executing\" || !selectedInvoiceId,\n                                className: \"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:opacity-50 h-[42px]\",\n                                children: \"Execute\"\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 466,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                            lineNumber: 465,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                    lineNumber: 428,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                lineNumber: 427,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-4\",\n                children: Object.entries(_lib_ai_tools__WEBPACK_IMPORTED_MODULE_2__.invoiceTools).map(([name, tool])=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"border rounded-lg p-4\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex justify-between items-center mb-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h4\", {\n                                                className: \"font-medium\",\n                                                children: tool.name\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 483,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"text-sm text-gray-600\",\n                                                children: tool.description\n                                            }, void 0, false, {\n                                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                                lineNumber: 484,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 482,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                        onClick: ()=>handleToolClick(name),\n                                        disabled: toolStatus[name].status === \"executing\" || !selectedInvoiceId || invoices.length === 0,\n                                        className: \"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50\",\n                                        children: \"Execute\"\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 486,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 481,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"flex items-center space-x-2\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: `w-3 h-3 rounded-full ${getStatusColor(toolStatus[name].status)}`\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 496,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                        className: \"text-sm capitalize\",\n                                        children: toolStatus[name].status\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                        lineNumber: 497,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                                lineNumber: 495,\n                                columnNumber: 13\n                            }, this),\n                            toolStatus[name].result && renderResult(toolStatus[name].result, name)\n                        ]\n                    }, name, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                        lineNumber: 480,\n                        columnNumber: 11\n                    }, this))\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n                lineNumber: 478,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\components\\\\ToolsPanel\\\\index.tsx\",\n        lineNumber: 407,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL2NvbXBvbmVudHMvVG9vbHNQYW5lbC9pbmRleC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ2tCO0FBRVQ7QUFDa0M7QUFRdEYsTUFBTU8sZUFBZUMsdUJBQWdDLElBQUk7QUFFekQsbURBQW1EO0FBQ25ELE1BQU1HLHNCQUFzQjtJQUMxQixJQUFJO1FBQ0YsZ0RBQWdEO1FBQ2hELElBQUlOLHNFQUFpQkEsSUFBSTtZQUN2QixPQUFPO1FBQ1Q7UUFFQSxnQ0FBZ0M7UUFDaEMsTUFBTU8sV0FBVyxNQUFNQyxNQUFNLENBQUMsRUFBRU4sYUFBYSxnQkFBZ0IsQ0FBQztRQUM5RCxJQUFJLENBQUNLLFNBQVNFLEVBQUUsRUFBRTtZQUNoQixPQUFPO1FBQ1Q7UUFDQSxNQUFNQyxPQUFPLE1BQU1ILFNBQVNJLElBQUk7UUFDaEMsT0FBT0QsS0FBS0UsYUFBYTtJQUMzQixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDBDQUEwQ0E7UUFDeEQsT0FBTztJQUNUO0FBQ0Y7QUFFZSxTQUFTRTtJQUN0QixNQUFNLENBQUNDLFlBQVlDLGNBQWMsR0FBR3RCLCtDQUFRQSxDQUMxQ3VCLE9BQU9DLElBQUksQ0FBQ3RCLHVEQUFZQSxFQUFFdUIsTUFBTSxDQUFDLENBQUNDLEtBQUtDLFdBQWM7WUFDbkQsR0FBR0QsR0FBRztZQUNOLENBQUNDLFNBQVMsRUFBRTtnQkFBRUMsTUFBTUQ7Z0JBQVVFLFFBQVE7WUFBTztRQUMvQyxJQUFJLENBQUM7SUFFUCxNQUFNLENBQUNDLG1CQUFtQkMscUJBQXFCLEdBQUcvQiwrQ0FBUUEsQ0FBQztJQUMzRCxNQUFNLENBQUNnQyxjQUFjQyxnQkFBZ0IsR0FBR2pDLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ2tDLFVBQVVDLFlBQVksR0FBR25DLCtDQUFRQSxDQUFZLEVBQUU7SUFDdEQsTUFBTSxDQUFDb0MsV0FBV0MsYUFBYSxHQUFHckMsK0NBQVFBLENBQUM7SUFDM0Ms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Q2IsOERBQUNEOzswREFDQyw4REFBQ0U7Z0RBQUdELFdBQVU7MERBQWVqRCxLQUFLeEIsSUFBSTs7Ozs7OzBEQUN0Qyw4REFBQzRFO2dEQUFFSCxXQUFVOzBEQUF5QmpELEtBQUswRSxXQUFXOzs7Ozs7Ozs7Ozs7a0RBRXhELDhEQUFDaEI7d0NBQ0NDLFNBQVMsSUFBTWpELGdCQUFnQmxDO3dDQUMvQm1HLFVBQVUxRyxVQUFVLENBQUNPLEtBQUssQ0FBQ0MsTUFBTSxLQUFLLGVBQWUsQ0FBQ0MscUJBQXFCSSxTQUFTeUIsTUFBTSxLQUFLO3dDQUMvRjBDLFdBQVU7a0RBQ1g7Ozs7Ozs7Ozs7OzswQ0FLSCw4REFBQ0Q7Z0NBQUlDLFdBQVU7O2tEQUNiLDhEQUFDRDt3Q0FBSUMsV0FBVyxDQUFDLHFCQUFxQixFQUFFVixlQUFldEUsVUFBVSxDQUFDTyxLQUFLLENBQUNDLE1BQU0sRUFBRSxDQUFDOzs7Ozs7a0RBQ2pGLDhEQUFDMEU7d0NBQUtGLFdBQVU7a0RBQXNCaEYsVUFBVSxDQUFDTyxLQUFLLENBQUNDLE1BQU07Ozs7Ozs7Ozs7Ozs0QkFHOURSLFVBQVUsQ0FBQ08sS0FBSyxDQUFDMkQsTUFBTSxJQUFJSyxhQUFhdkUsVUFBVSxDQUFDTyxLQUFLLENBQUMyRCxNQUFNLEVBQUUzRDs7dUJBcEIxREE7Ozs7Ozs7Ozs7Ozs7Ozs7QUEwQnBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9zcmMvYXBwL2NvbXBvbmVudHMvVG9vbHNQYW5lbC9pbmRleC50c3g/ZTc2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBpbnZvaWNlVG9vbHMsIGhhbmRsZVRvb2xDYWxsIH0gZnJvbSAnQC9saWIvYWkvdG9vbHMnXG5pbXBvcnQgeyBJbnZvaWNlIH0gZnJvbSAnQC90eXBlcy9pbnZvaWNlJ1xuaW1wb3J0IFF1aWNrYm9va3NDb25uZWN0IGZyb20gJy4uL1F1aWNrYm9va3NDb25uZWN0J1xuaW1wb3J0IHsgaXNRdWlja0Jvb2tzUmVhZHksIG1hbnVhbGx5SW5pdGlhbGl6ZVF1aWNrQm9va3MgfSBmcm9tICdAL2xpYi9xdWlja2Jvb2tzL2FwaSdcblxuaW50ZXJmYWNlIFRvb2xTdGF0dXMge1xuICBuYW1lOiBzdHJpbmdcbiAgc3RhdHVzOiAnaWRsZScgfCAnZXhlY3V0aW5nJyB8ICdjb21wbGV0ZWQnIHwgJ2Vycm9yJ1xuICByZXN1bHQ/OiBhbnlcbn1cblxuY29uc3QgQVBJX0JBU0VfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFTRV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCdcblxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgUXVpY2tCb29rcyBpcyBhdXRoZW50aWNhdGVkXG5jb25zdCBjaGVja1F1aWNrQm9va3NBdXRoID0gYXN5bmMgKCk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICB0cnkge1xuICAgIC8vIEZpcnN0IGNoZWNrIGlmIHdlIGhhdmUgdG9rZW5zIGluIGxvY2FsU3RvcmFnZVxuICAgIGlmIChpc1F1aWNrQm9va3NSZWFkeSgpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgbm90LCBjaGVjayB3aXRoIHRoZSBzZXJ2ZXJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFX1VSTH0vYXBpL2F1dGgvc3RhdHVzYClcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgIHJldHVybiBkYXRhLmF1dGhlbnRpY2F0ZWRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBRdWlja0Jvb2tzIGF1dGggc3RhdHVzOicsIGVycm9yKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRvb2xzUGFuZWwoKSB7XG4gIGNvbnN0IFt0b29sU3RhdHVzLCBzZXRUb29sU3RhdHVzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIFRvb2xTdGF0dXM+PihcbiAgICBPYmplY3Qua2V5cyhpbnZvaWNlVG9vbHMpLnJlZHVjZSgoYWNjLCB0b29sTmFtZSkgPT4gKHtcbiAgICAgIC4uLmFjYyxcbiAgICAgIFt0b29sTmFtZV06IHsgbmFtZTogdG9vbE5hbWUsIHN0YXR1czogJ2lkbGUnIH1cbiAgICB9KSwge30pXG4gIClcbiAgY29uc3QgW3NlbGVjdGVkSW52b2ljZUlkLCBzZXRTZWxlY3RlZEludm9pY2VJZF0gPSB1c2VTdGF0ZSgnJylcbiAgY29uc3QgW3NlbGVjdGVkVG9vbCwgc2V0U2VsZWN0ZWRUb29sXSA9IHVzZVN0YXRlKCdzdW1tYXJpemVJbnZvaWNlJylcbiAgY29uc3QgW2ludm9pY2VzLCBzZXRJbnZvaWNlc10gPSB1c2VTdGF0ZTxJbnZvaWNlW10+KFtdKVxuICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSlcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbc2hvd0Nvbm5lY3QsIHNldFNob3dDb25uZWN0XSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbaGFzTG9hZGVkSW52b2ljZXMsIHNldEhhc0xvYWRlZEludm9pY2VzXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbYXV0b0ZldGNoQXR0ZW1wdGVkLCBzZXRBdXRvRmV0Y2hBdHRlbXB0ZWRdID0gdXNlU3RhdGUoZmFsc2UpXG5cbiAgLy8gRnVuY3Rpb24gdG8gZmV0Y2ggaW52b2ljZXMgZm9yIHRvb2xzIHBhbmVsXG4gIGNvbnN0IGZldGNoSW52b2ljZXMgPSBhc3luYyAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldElzTG9hZGluZyh0cnVlKVxuICAgICAgc2V0RXJyb3IobnVsbClcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIGludm9pY2VzIGZvciB0b29scyBwYW5lbCB1c2luZyBjaGF0L3Rvb2wgQVBJJyk7XG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgbmV3IGNlbnRyYWxpemVkIGVuZHBvaW50IGZvciBjb25zaXN0ZW50IGRhdGFcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvY2hhdC90b29sJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICB0b29sOiAnbGlzdEludm9pY2VzJyxcbiAgICAgICAgICBwYXJhbXM6IHt9XG4gICAgICAgIH0pLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXNwb25zZSBmcm9tIGludm9pY2VzIEFQSTonLCBlcnJvckRhdGEpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JEYXRhLmVycm9yIHx8ICdGYWlsZWQgdG8gZmV0Y2ggaW52b2ljZXMnKVxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBmZXRjaGVkIGludm9pY2VzIGZvciB0b29scyBwYW5lbGApO1xuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHJlc3BvbnNlIGZvcm1hdHNcbiAgICAgIGxldCBpbnZvaWNlc0RhdGE7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgICAgICBpbnZvaWNlc0RhdGEgPSBkYXRhO1xuICAgICAgfSBlbHNlIGlmIChkYXRhLmludm9pY2VzICYmIEFycmF5LmlzQXJyYXkoZGF0YS5pbnZvaWNlcykpIHtcbiAgICAgICAgaW52b2ljZXNEYXRhID0gZGF0YS5pbnZvaWNlcztcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gc2VydmVyJyk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldEludm9pY2VzKGludm9pY2VzRGF0YSlcbiAgICAgIHNldEhhc0xvYWRlZEludm9pY2VzKHRydWUpXG4gICAgICBcbiAgICAgIC8vIEF1dG8tc2VsZWN0IHRoZSBmaXJzdCBpbnZvaWNlIGlmIGF2YWlsYWJsZVxuICAgICAgaWYgKGludm9pY2VzRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNldFNlbGVjdGVkSW52b2ljZUlkKGludm9pY2VzRGF0YVswXS5JZClcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tZXhlY3V0ZSB0aGUgZGVmYXVsdCB0b29sIGlmIGFuIGludm9pY2UgaXMgc2VsZWN0ZWRcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaGFuZGxlVG9vbENsaWNrKCdzdW1tYXJpemVJbnZvaWNlJyk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBpbnZvaWNlczonLCBlcnIpO1xuICAgICAgXG4gICAgICAvLyBJZiBpdCdzIGFuIGF1dGhlbnRpY2F0aW9uIGVycm9yLCBzaG93IGNvbm5lY3QgVUlcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnIubWVzc2FnZS5pbmNsdWRlcygnUXVpY2tCb29rcyBjbGllbnQgbm90IGluaXRpYWxpemVkJykpIHtcbiAgICAgICAgc2V0U2hvd0Nvbm5lY3QodHJ1ZSlcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0RXJyb3IoZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIubWVzc2FnZSA6ICdGYWlsZWQgdG8gbG9hZCBpbnZvaWNlcycpXG4gICAgICBzZXRIYXNMb2FkZWRJbnZvaWNlcyh0cnVlKVxuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpXG4gICAgICBzZXRBdXRvRmV0Y2hBdHRlbXB0ZWQodHJ1ZSlcbiAgICB9XG4gIH1cblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrUXVpY2tCb29rc1N0YXR1cyA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNldElzTG9hZGluZyh0cnVlKVxuICAgICAgICBcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgUXVpY2tCb29rcyBpcyBhdXRoZW50aWNhdGVkXG4gICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IGF3YWl0IGNoZWNrUXVpY2tCb29rc0F1dGgoKVxuICAgICAgICBpZiAoIWlzQXV0aGVudGljYXRlZCAmJiAhaGFzTG9hZGVkSW52b2ljZXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnUXVpY2tCb29rcyBub3QgYXV0aGVudGljYXRlZCwgc2hvd2luZyBjb25uZWN0IFVJJyk7XG4gICAgICAgICAgc2V0U2hvd0Nvbm5lY3QodHJ1ZSk7XG4gICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICByZXR1cm47IC8vIERvbid0IHRyeSB0byBmZXRjaCBpbnZvaWNlcyBpZiBub3QgYXV0aGVudGljYXRlZFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGxvYWRlZCBpbnZvaWNlcyBzdWNjZXNzZnVsbHksIGRvbid0IHNob3cgY29ubmVjdCBVSSBhZ2FpblxuICAgICAgICBpZiAoaGFzTG9hZGVkSW52b2ljZXMpIHtcbiAgICAgICAgICBzZXRTaG93Q29ubmVjdChmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBhdXRoIHF1ZXJ5IHBhcmFtcyBpbiBjYXNlIHdlIGp1c3QgY29tcGxldGVkIGF1dGhlbnRpY2F0aW9uXG4gICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICAgICAgY29uc3QgYXV0aFN0YXR1cyA9IHVybFBhcmFtcy5nZXQoJ2F1dGgnKVxuICAgICAgICBcbiAgICAgICAgaWYgKGF1dGhTdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBdXRoZW50aWNhdGlvbiBzdWNjZXNzIGRldGVjdGVkLCBjbGVhcmluZyBVUkwgcGFyYW1zJyk7XG4gICAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBdXRvbWF0aWNhbGx5IGZldGNoIGludm9pY2VzIGluc3RlYWQgb2Ygd2FpdGluZyBmb3IgYnV0dG9uIGNsaWNrXG4gICAgICAgIGNvbnNvbGUubG9nKCdRdWlja0Jvb2tzIGF1dGhlbnRpY2F0ZWQsIGF1dG9tYXRpY2FsbHkgZmV0Y2hpbmcgaW52b2ljZXMnKTtcbiAgICAgICAgZmV0Y2hJbnZvaWNlcygpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIFF1aWNrQm9va3Mgc3RhdHVzOicsIGVycik7XG4gICAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnRmFpbGVkIHRvIGNoZWNrIFF1aWNrQm9va3Mgc3RhdHVzJylcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrUXVpY2tCb29rc1N0YXR1cygpXG4gIH0sIFtoYXNMb2FkZWRJbnZvaWNlc10pXG4gIFxuICAvLyBTZXQgdXAgYSByZXRyeSBtZWNoYW5pc20gaW4gY2FzZSB0aGUgZmlyc3QgYXR0ZW1wdCBmYWlsc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIElmIHdlJ3JlIG5vdCBzaG93aW5nIHRoZSBjb25uZWN0IFVJIGFuZCBoYXZlbid0IGxvYWRlZCBpbnZvaWNlcyB5ZXQsIHJldHJ5IGFmdGVyIGEgZGVsYXlcbiAgICBpZiAoIXNob3dDb25uZWN0ICYmICFoYXNMb2FkZWRJbnZvaWNlcyAmJiAhaXNMb2FkaW5nICYmICFhdXRvRmV0Y2hBdHRlbXB0ZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIGF1dG9tYXRpYyByZXRyeSBmb3IgaW52b2ljZSBmZXRjaGluZycpO1xuICAgICAgY29uc3QgcmV0cnlUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnQXV0by1yZXRyeWluZyBpbnZvaWNlIGZldGNoJyk7XG4gICAgICAgIGZldGNoSW52b2ljZXMoKTtcbiAgICAgIH0sIDIwMDApO1xuICAgICAgXG4gICAgICByZXR1cm4gKCkgPT4gY2xlYXJUaW1lb3V0KHJldHJ5VGltZXIpO1xuICAgIH1cbiAgfSwgW3Nob3dDb25uZWN0LCBoYXNMb2FkZWRJbnZvaWNlcywgaXNMb2FkaW5nLCBhdXRvRmV0Y2hBdHRlbXB0ZWRdKTtcblxuICBjb25zdCBjbGVhclRvb2xSZXN1bHRzID0gKCkgPT4ge1xuICAgIHNldFRvb2xTdGF0dXMocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTdGF0dXMgPSB7IC4uLnByZXYgfVxuICAgICAgT2JqZWN0LmtleXMobmV3U3RhdHVzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIG5ld1N0YXR1c1trZXldID0geyBcbiAgICAgICAgICAuLi5uZXdTdGF0dXNba2V5XSwgXG4gICAgICAgICAgc3RhdHVzOiAnaWRsZScsXG4gICAgICAgICAgcmVzdWx0OiBudWxsIFxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgcmV0dXJuIG5ld1N0YXR1c1xuICAgIH0pXG4gIH1cblxuICBjb25zdCBoYW5kbGVUb29sU2VsZWN0ID0gKHRvb2xOYW1lOiBzdHJpbmcpID0+IHtcbiAgICBzZXRTZWxlY3RlZFRvb2wodG9vbE5hbWUpXG4gICAgY2xlYXJUb29sUmVzdWx0cygpXG4gIH1cblxuICBjb25zdCBoYW5kbGVUb29sQ2xpY2sgPSBhc3luYyAodG9vbE5hbWU6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHRvb2wgPSBpbnZvaWNlVG9vbHNbdG9vbE5hbWUgYXMga2V5b2YgdHlwZW9mIGludm9pY2VUb29sc11cbiAgICBpZiAoIXRvb2wpIHJldHVyblxuXG4gICAgc2V0VG9vbFN0YXR1cyhwcmV2ID0+IHtcbiAgICAgIGNvbnN0IG5ld1N0YXR1cyA9IHsgLi4ucHJldiB9XG4gICAgICBPYmplY3Qua2V5cyhuZXdTdGF0dXMpLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgaWYgKGtleSAhPT0gdG9vbE5hbWUpIHtcbiAgICAgICAgICBuZXdTdGF0dXNba2V5XSA9IHsgXG4gICAgICAgICAgICAuLi5uZXdTdGF0dXNba2V5XSwgXG4gICAgICAgICAgICBzdGF0dXM6ICdpZGxlJyxcbiAgICAgICAgICAgIHJlc3VsdDogbnVsbCBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5uZXdTdGF0dXMsXG4gICAgICAgIFt0b29sTmFtZV06IHsgLi4ubmV3U3RhdHVzW3Rvb2xOYW1lXSwgc3RhdHVzOiAnZXhlY3V0aW5nJyB9XG4gICAgICB9XG4gICAgfSlcblxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZyhgRXhlY3V0aW5nIHRvb2w6ICR7dG9vbE5hbWV9YCk7XG4gICAgICBsZXQgcmVzdWx0OiBhbnlcbiAgICAgIGlmICh0b29sTmFtZSA9PT0gJ2dldEludm9pY2UnKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZVRvb2xDYWxsKHRvb2xOYW1lLCB7IGlkOiBzZWxlY3RlZEludm9pY2VJZCB9KVxuICAgICAgfSBlbHNlIGlmICh0b29sTmFtZSA9PT0gJ2xpc3RJbnZvaWNlcycpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlVG9vbENhbGwodG9vbE5hbWUsIHt9KVxuICAgICAgfSBlbHNlIGlmICh0b29sTmFtZSA9PT0gJ3N1bW1hcml6ZUludm9pY2UnKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGhhbmRsZVRvb2xDYWxsKHRvb2xOYW1lLCB7IGlkOiBzZWxlY3RlZEludm9pY2VJZCB9KVxuICAgICAgfSBlbHNlIGlmICh0b29sTmFtZSA9PT0gJ2FuYWx5emVJbnZvaWNlcycpIHtcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgaGFuZGxlVG9vbENhbGwodG9vbE5hbWUsIHsgYW5hbHlzaXNUeXBlOiAndHJlbmRzJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhgVG9vbCBleGVjdXRpb24gY29tcGxldGVkOiAke3Rvb2xOYW1lfWApO1xuICAgICAgc2V0VG9vbFN0YXR1cyhwcmV2ID0+ICh7XG4gICAgICAgIC4uLnByZXYsXG4gICAgICAgIFt0b29sTmFtZV06IHsgXG4gICAgICAgICAgLi4ucHJldlt0b29sTmFtZV0sIFxuICAgICAgICAgIHN0YXR1czogJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgcmVzdWx0XG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBleGVjdXRpbmcgdG9vbCAke3Rvb2xOYW1lfTpgLCBlcnJvcik7XG4gICAgICBzZXRUb29sU3RhdHVzKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgW3Rvb2xOYW1lXTogeyBcbiAgICAgICAgICAuLi5wcmV2W3Rvb2xOYW1lXSwgXG4gICAgICAgICAgc3RhdHVzOiAnZXJyb3InLFxuICAgICAgICAgIHJlc3VsdDogZXJyb3JcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgfVxuICB9XG5cbiAgY29uc3QgZ2V0U3RhdHVzQ29sb3IgPSAoc3RhdHVzOiBzdHJpbmcpID0+IHtcbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSAnaWRsZSc6IHJldHVybiAnYmctZ3JheS0yMDAnXG4gICAgICBjYXNlICdleGVjdXRpbmcnOiByZXR1cm4gJ2JnLXllbGxvdy0yMDAnXG4gICAgICBjYXNlICdjb21wbGV0ZWQnOiByZXR1cm4gJ2JnLWdyZWVuLTIwMCdcbiAgICAgIGNhc2UgJ2Vycm9yJzogcmV0dXJuICdiZy1yZWQtMjAwJ1xuICAgICAgZGVmYXVsdDogcmV0dXJuICdiZy1ncmF5LTIwMCdcbiAgICB9XG4gIH1cblxuICBjb25zdCByZW5kZXJSZXN1bHQgPSAocmVzdWx0OiBhbnksIHRvb2xOYW1lOiBzdHJpbmcpID0+IHtcbiAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIG51bGw7XG5cbiAgICBpZiAodG9vbE5hbWUgPT09ICdzdW1tYXJpemVJbnZvaWNlJykge1xuICAgICAgLy8gQWRkIHNhZmV0eSBjaGVja3MgZm9yIHJlc3VsdCBzdHJ1Y3R1cmVcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSByZXN1bHQuc3VtbWFyeSB8fCAnSW52b2ljZSBTdW1tYXJ5JztcbiAgICAgIGNvbnN0IGRldGFpbHMgPSByZXN1bHQuZGV0YWlscyB8fCB7fTtcbiAgICAgIGNvbnN0IGJhbGFuY2UgPSBkZXRhaWxzLmJhbGFuY2UgfHwgJyQwLjAwJztcbiAgICAgIGNvbnN0IGFtb3VudCA9IGRldGFpbHMuYW1vdW50IHx8ICckMC4wMCc7XG4gICAgICBjb25zdCBkYXRlID0gZGV0YWlscy5kYXRlIHx8ICdVbmtub3duJztcbiAgICAgIGNvbnN0IGR1ZURhdGUgPSBkZXRhaWxzLmR1ZURhdGUgfHwgJ1Vua25vd24nO1xuICAgICAgY29uc3QgbWVtbyA9IGRldGFpbHMubWVtbyB8fCAnTm8gbWVtbyBhdmFpbGFibGUnO1xuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTQgcC00IGJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtIGJvcmRlciBib3JkZXItZ3JheS0yMDBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBtYi00XCI+XG4gICAgICAgICAgICA8aDQgY2xhc3NOYW1lPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS04MDBcIj57c3VtbWFyeX08L2g0PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwicHgtMiBweS0xIGJnLWJsdWUtMTAwIHRleHQtYmx1ZS04MDAgdGV4dC1zbSByb3VuZGVkLWZ1bGxcIj5cbiAgICAgICAgICAgICAge2JhbGFuY2V9XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJncmlkIGdyaWQtY29scy0yIGdhcC00IHRleHQtc21cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0yXCI+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPkFtb3VudDo8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMiBmb250LW1lZGl1bVwiPnthbW91bnR9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwXCI+RGF0ZTo8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMiBmb250LW1lZGl1bVwiPntkYXRlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwidGV4dC1ncmF5LTUwMFwiPkR1ZSBEYXRlOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJtbC0yIGZvbnQtbWVkaXVtXCI+e2R1ZURhdGV9PC9zcGFuPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNTAwXCI+QmFsYW5jZTo8L3NwYW4+XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibWwtMiBmb250LW1lZGl1bVwiPntiYWxhbmNlfTwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sLXNwYW4tMlwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtZ3JheS01MDBcIj5NZW1vOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHAtMiBiZy1ncmF5LTUwIHJvdW5kZWQgdGV4dC1ncmF5LTcwMFwiPlxuICAgICAgICAgICAgICAgICAge21lbW99XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMiBwLTIgYmctZ3JheS01MCByb3VuZGVkXCI+XG4gICAgICAgIDxwcmUgY2xhc3NOYW1lPVwidGV4dC1zbSBvdmVyZmxvdy1hdXRvXCI+XG4gICAgICAgICAge0pTT04uc3RyaW5naWZ5KHJlc3VsdCwgbnVsbCwgMil9XG4gICAgICAgIDwvcHJlPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEaXJlY3RJbml0aWFsaXphdGlvbiA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgZGlyZWN0IFF1aWNrQm9va3MgaW5pdGlhbGl6YXRpb24nKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG1hbnVhbGx5SW5pdGlhbGl6ZVF1aWNrQm9va3MoKTtcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBjb25zb2xlLmxvZygnUXVpY2tCb29rcyBtYW51YWwgaW5pdGlhbGl6YXRpb24gc3VjY2Vzc2Z1bCcpO1xuICAgICAgICAvLyBSZWZyZXNoIHRoZSBwYWdlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gbWFudWFsbHkgaW5pdGlhbGl6ZSBRdWlja0Jvb2tzJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgbWFudWFsIGluaXRpYWxpemF0aW9uOicsIGVycik7XG4gICAgICBzZXRFcnJvcignRXJyb3IgZHVyaW5nIG1hbnVhbCBpbml0aWFsaXphdGlvbjogJyArIChlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogU3RyaW5nKGVycikpKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTW9kaWZ5IHRoZSBVSSB0byByZW1vdmUgdGhlIFwiRmV0Y2ggSW52b2ljZXNcIiBidXR0b24gYW5kIHNob3cgYXV0by1sb2FkaW5nIGluZGljYXRvclxuICBpZiAoIWhhc0xvYWRlZEludm9pY2VzIHx8IGlzTG9hZGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtZnVsbCBwLTQgZmxleCBmbGV4LWNvbFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTgwMFwiPkludm9pY2UgVG9vbHM8L2gyPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPkxvYWRpbmcgaW52b2ljZSB0b29scy4uLjwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMSBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYW5pbWF0ZS1zcGluIHJvdW5kZWQtZnVsbCBoLTEwIHctMTAgYm9yZGVyLWItMiBib3JkZXItYmx1ZS01MDAgbWItM1wiPjwvZGl2PlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1ibHVlLTYwMCB0ZXh0LXNtXCI+QXV0b21hdGljYWxseSBsb2FkaW5nIGludm9pY2UgZGF0YS4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKHNob3dDb25uZWN0KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIHAtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTgwMFwiPkludm9pY2UgVG9vbHM8L2gyPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBtYi0yXCI+Q29ubmVjdCB5b3VyIFF1aWNrQm9va3MgYWNjb3VudCB0byB1c2UgdGhlc2UgdG9vbHM8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8UXVpY2tib29rc0Nvbm5lY3QgLz5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJoLWZ1bGwgcC00XCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNFwiPlxuICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtYm9sZCB0ZXh0LWdyYXktODAwXCI+SW52b2ljZSBUb29sczwvaDI+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIG1iLTJcIj5UaGVyZSB3YXMgYW4gZXJyb3IgbG9hZGluZyBpbnZvaWNlIGRhdGE8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBiZy1yZWQtNTAgYm9yZGVyIGJvcmRlci1yZWQtMjAwIHJvdW5kZWQtbGcgbWItNFwiPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtcmVkLTYwMFwiPntlcnJvcn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGZldGNoSW52b2ljZXMoKX1cbiAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkIGhvdmVyOmJnLWJsdWUtNjAwXCJcbiAgICAgICAgPlxuICAgICAgICAgIFRyeSBBZ2FpblxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICBpZiAoaW52b2ljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1mdWxsIHAtNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTRcIj5cbiAgICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC14bCBmb250LWJvbGQgdGV4dC1ncmF5LTgwMFwiPkludm9pY2UgVG9vbHM8L2gyPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBtYi0yXCI+Tm8gaW52b2ljZXMgZm91bmQgaW4geW91ciBRdWlja0Jvb2tzIGFjY291bnQ8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInAtNCBiZy1ibHVlLTUwIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgcm91bmRlZC1sZ1wiPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtYmx1ZS02MDBcIj5QbGVhc2UgYWRkIGludm9pY2VzIHRvIHlvdXIgUXVpY2tCb29rcyBhY2NvdW50IHRvIHVzZSB0aGVzZSB0b29scy48L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJwLTQgYm9yZGVyLXRcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNlwiPlxuICAgICAgICA8aDIgY2xhc3NOYW1lPVwidGV4dC0yeGwgZm9udC1ib2xkIHRleHQtZ3JheS05MDAgbWItMlwiPkludm9pY2UgVG9vbHM8L2gyPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWdyYXktNjAwXCI+U2VsZWN0IGFuIGludm9pY2UgYW5kIHRvb2wgdG8gYW5hbHl6ZSB5b3VyIGRhdGE8L3A+XG4gICAgICA8L2Rpdj5cblxuICAgICAgey8qIEFkZCBhIGJ1dHRvbiB0byBtYW51YWxseSBmZXRjaCBpbnZvaWNlcyBpZiBub25lIGV4aXN0ICovfVxuICAgICAge2ludm9pY2VzLmxlbmd0aCA9PT0gMCAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWItNiBwLTQgYmctYmx1ZS01MCByb3VuZGVkLWxnIGJvcmRlciBib3JkZXItYmx1ZS0yMDBcIj5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LWJsdWUtNzAwIG1iLTNcIj5ObyBpbnZvaWNlcyBoYXZlIGJlZW4gbG9hZGVkIHlldC4gQ2xpY2sgdGhlIGJ1dHRvbiBiZWxvdyB0byBmZXRjaCBpbnZvaWNlczo8L3A+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17ZmV0Y2hJbnZvaWNlc31cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInB4LTQgcHktMiBiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHJvdW5kZWQgaG92ZXI6YmctYmx1ZS03MDBcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIEZldGNoIEludm9pY2VzXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cblxuICAgICAge2ludm9pY2VzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1iLTYgYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBwLTRcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4LTFcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJpbnZvaWNlLXNlbGVjdFwiIGNsYXNzTmFtZT1cImJsb2NrIHRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1ncmF5LTcwMCBtYi0xXCI+XG4gICAgICAgICAgICAgICAgU2VsZWN0IEludm9pY2VcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPHNlbGVjdFxuICAgICAgICAgICAgICAgIGlkPVwiaW52b2ljZS1zZWxlY3RcIlxuICAgICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZEludm9pY2VJZH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFNlbGVjdGVkSW52b2ljZUlkKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ3LWZ1bGwgcHgtMyBweS0yIGJvcmRlciBib3JkZXItZ3JheS0zMDAgcm91bmRlZC1tZCBzaGFkb3ctc20gZm9jdXM6b3V0bGluZS1ub25lIGZvY3VzOnJpbmctYmx1ZS01MDAgZm9jdXM6Ym9yZGVyLWJsdWUtNTAwXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtpbnZvaWNlcy5tYXAoKGludm9pY2UpID0+IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpbnZvaWNlLklkfSB2YWx1ZT17aW52b2ljZS5JZH0+XG4gICAgICAgICAgICAgICAgICAgIEludm9pY2UgI3tpbnZvaWNlLkRvY051bWJlcn0gLSB7aW52b2ljZS5DdXN0b21lclJlZi5uYW1lfSAoJHtpbnZvaWNlLlRvdGFsQW10fSlcbiAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXgtMVwiPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInRvb2wtc2VsZWN0XCIgY2xhc3NOYW1lPVwiYmxvY2sgdGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LWdyYXktNzAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICBTZWxlY3QgVG9vbFxuICAgICAgICAgICAgICA8L2xhYmVsPlxuICAgICAgICAgICAgICA8c2VsZWN0XG4gICAgICAgICAgICAgICAgaWQ9XCJ0b29sLXNlbGVjdFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e3NlbGVjdGVkVG9vbH1cbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IGhhbmRsZVRvb2xTZWxlY3QoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1ncmF5LTMwMCByb3VuZGVkLW1kIHNoYWRvdy1zbSBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy1ibHVlLTUwMCBmb2N1czpib3JkZXItYmx1ZS01MDBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge09iamVjdC5lbnRyaWVzKGludm9pY2VUb29scykubWFwKChbbmFtZSwgdG9vbF0pID0+IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtuYW1lfSB2YWx1ZT17bmFtZX0+XG4gICAgICAgICAgICAgICAgICAgIHt0b29sLm5hbWV9IC0ge3Rvb2wuZGVzY3JpcHRpb259XG4gICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWVuZFwiPlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlVG9vbENsaWNrKHNlbGVjdGVkVG9vbCl9XG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3Rvb2xTdGF0dXNbc2VsZWN0ZWRUb29sXS5zdGF0dXMgPT09ICdleGVjdXRpbmcnIHx8ICFzZWxlY3RlZEludm9pY2VJZH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkLW1kIGhvdmVyOmJnLWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgaC1bNDJweF1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRXhlY3V0ZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS00XCI+XG4gICAgICAgIHtPYmplY3QuZW50cmllcyhpbnZvaWNlVG9vbHMpLm1hcCgoW25hbWUsIHRvb2xdKSA9PiAoXG4gICAgICAgICAgPGRpdiBrZXk9e25hbWV9IGNsYXNzTmFtZT1cImJvcmRlciByb3VuZGVkLWxnIHAtNFwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxoNCBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPnt0b29sLm5hbWV9PC9oND5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXNtIHRleHQtZ3JheS02MDBcIj57dG9vbC5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlVG9vbENsaWNrKG5hbWUpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXt0b29sU3RhdHVzW25hbWVdLnN0YXR1cyA9PT0gJ2V4ZWN1dGluZycgfHwgIXNlbGVjdGVkSW52b2ljZUlkIHx8IGludm9pY2VzLmxlbmd0aCA9PT0gMH1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJweC0zIHB5LTEgYmctYmx1ZS01MDAgdGV4dC13aGl0ZSByb3VuZGVkIGhvdmVyOmJnLWJsdWUtNjAwIGRpc2FibGVkOm9wYWNpdHktNTBcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgRXhlY3V0ZVxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIHNwYWNlLXgtMlwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YHctMyBoLTMgcm91bmRlZC1mdWxsICR7Z2V0U3RhdHVzQ29sb3IodG9vbFN0YXR1c1tuYW1lXS5zdGF0dXMpfWB9IC8+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQtc20gY2FwaXRhbGl6ZVwiPnt0b29sU3RhdHVzW25hbWVdLnN0YXR1c308L3NwYW4+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAge3Rvb2xTdGF0dXNbbmFtZV0ucmVzdWx0ICYmIHJlbmRlclJlc3VsdCh0b29sU3RhdHVzW25hbWVdLnJlc3VsdCwgbmFtZSl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICkpfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIClcbn0gIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwiaW52b2ljZVRvb2xzIiwiaGFuZGxlVG9vbENhbGwiLCJRdWlja2Jvb2tzQ29ubmVjdCIsImlzUXVpY2tCb29rc1JlYWR5IiwibWFudWFsbHlJbml0aWFsaXplUXVpY2tCb29rcyIsIkFQSV9CQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19CQVNFX1VSTCIsImNoZWNrUXVpY2tCb29rc0F1dGgiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJkYXRhIiwianNvbiIsImF1dGhlbnRpY2F0ZWQiLCJlcnJvciIsImNvbnNvbGUiLCJUb29sc1BhbmVsIiwidG9vbFN0YXR1cyIsInNldFRvb2xTdGF0dXMiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwidG9vbE5hbWUiLCJuYW1lIiwic3RhdHVzIiwic2VsZWN0ZWRJbnZvaWNlSWQiLCJzZXRTZWxlY3RlZEludm9pY2VJZCIsInNlbGVjdGVkVG9vbCIsInNldFNlbGVjdGVkVG9vbCIsImludm9pY2VzIiwic2V0SW52b2ljZXMiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzZXRFcnJvciIsInNob3dDb25uZWN0Iiwic2V0U2hvd0Nvbm5lY3QiLCJoYXNMb2FkZWRJbnZvaWNlcyIsInNldEhhc0xvYWRlZEludm9pY2VzIiwiYXV0b0ZldGNoQXR0ZW1wdGVkIiwic2V0QXV0b0ZldGNoQXR0ZW1wdGVkIiwiZmV0Y2hJbnZvaWNlcyIsImxvZyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRvb2wiLCJwYXJhbXMiLCJlcnJvckRhdGEiLCJFcnJvciIsImludm9pY2VzRGF0YSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsIklkIiwic2V0VGltZW91dCIsImhhbmRsZVRvb2xDbGljayIsImVyciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsImNoZWNrUXVpY2tCb29rc1N0YXR1cyIsImlzQXV0aGVudGljYXRlZCIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiYXV0aFN0YXR1cyIsImdldCIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJkb2N1bWVudCIsInRpdGxlIiwicGF0aG5hbWUiLCJyZXRyeVRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJUb29sUmVzdWx0cyIsInByZXYiLCJuZXdTdGF0dXMiLCJmb3JFYWNoIiwia2V5IiwicmVzdWx0IiwiaGFuZGxlVG9vbFNlbGVjdCIsImlkIiwiYW5hbHlzaXNUeXBlIiwiZ2V0U3RhdHVzQ29sb3IiLCJyZW5kZXJSZXN1bHQiLCJzdW1tYXJ5IiwiZGV0YWlscyIsImJhbGFuY2UiLCJhbW91bnQiLCJkYXRlIiwiZHVlRGF0ZSIsIm1lbW8iLCJkaXYiLCJjbGFzc05hbWUiLCJoNCIsInNwYW4iLCJwIiwicHJlIiwiaGFuZGxlRGlyZWN0SW5pdGlhbGl6YXRpb24iLCJyZWxvYWQiLCJTdHJpbmciLCJoMiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJsYWJlbCIsImh0bWxGb3IiLCJzZWxlY3QiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwiZSIsInRhcmdldCIsIm1hcCIsImludm9pY2UiLCJvcHRpb24iLCJEb2NOdW1iZXIiLCJDdXN0b21lclJlZiIsIlRvdGFsQW10IiwiZW50cmllcyIsImRlc2NyaXB0aW9uIiwiZGlzYWJsZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/components/ToolsPanel/index.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_InvoicePanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/InvoicePanel */ \"(ssr)/./src/app/components/InvoicePanel/index.tsx\");\n/* harmony import */ var _components_AIChat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/AIChat */ \"(ssr)/./src/app/components/AIChat/index.tsx\");\n/* harmony import */ var _components_ToolsPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/ToolsPanel */ \"(ssr)/./src/app/components/ToolsPanel/index.tsx\");\n/* harmony import */ var _components_QuickbooksConnect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/QuickbooksConnect */ \"(ssr)/./src/app/components/QuickbooksConnect/index.tsx\");\n/* harmony import */ var _lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/quickbooks/api */ \"(ssr)/./src/lib/quickbooks/api.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n// Define your own checkAuth function in the page\nconst checkQuickBooksAuth = async ()=>{\n    try {\n        // First check if we have tokens in localStorage\n        if ((0,_lib_quickbooks_api__WEBPACK_IMPORTED_MODULE_6__.isQuickBooksReady)()) {\n            return true;\n        }\n        // If not, check with the server\n        const baseUrl = \"http://localhost:3000\" || 0;\n        const response = await fetch(`${baseUrl}/api/auth/status`);\n        if (!response.ok) {\n            return false;\n        }\n        const data = await response.json();\n        return data.authenticated;\n    } catch (error) {\n        console.error(\"Error checking QuickBooks auth status:\", error);\n        return false;\n    }\n};\nfunction Home() {\n    const [selectedInvoiceId, setSelectedInvoiceId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isAuthenticated, setIsAuthenticated] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [showDebug, setShowDebug] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isInvoicePanelOpen, setIsInvoicePanelOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showConnect, setShowConnect] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isQBConnected, setIsQBConnected] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [initialLoad, setInitialLoad] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    // Check QuickBooks auth status once on component mount\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const checkAuth = async ()=>{\n            try {\n                const isAuthenticated = await checkQuickBooksAuth();\n                setIsQBConnected(isAuthenticated);\n                setShowConnect(!isAuthenticated);\n                setInitialLoad(false);\n            } catch (error) {\n                console.error(\"Error checking auth:\", error);\n                setShowConnect(true);\n                setInitialLoad(false);\n            }\n        };\n        checkAuth();\n        // Check URL for auth=success and clear it\n        if (false) {}\n    }, []);\n    // Press D key 5 times to show debug panel\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (true) return;\n        let keypresses = 0;\n        let lastKeyTime = 0;\n        const handleKeyDown = (e)=>{\n            // Safely check if e.key exists before calling toLowerCase()\n            if (e && e.key && e.key.toLowerCase() === \"d\") {\n                const now = Date.now();\n                if (now - lastKeyTime < 1000) {\n                    keypresses++;\n                } else {\n                    keypresses = 1;\n                }\n                lastKeyTime = now;\n                if (keypresses >= 5) {\n                    setShowDebug(true);\n                    keypresses = 0;\n                }\n            }\n        };\n        window.addEventListener(\"keydown\", handleKeyDown);\n        return ()=>window.removeEventListener(\"keydown\", handleKeyDown);\n    }, []);\n    // Function to toggle invoice panel visibility\n    const toggleInvoicePanel = (open)=>{\n        setIsInvoicePanelOpen(open);\n    };\n    // Handle successful QuickBooks connection\n    const handleQuickBooksConnected = ()=>{\n        setIsQBConnected(true);\n        setShowConnect(false);\n    };\n    // Debug panel component\n    const DebugPanel = ()=>{\n        const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n        const checkStatus = async ()=>{\n            try {\n                const response = await fetch(\"/api/auth/debug\");\n                const data = await response.json();\n                setStatus(data);\n            } catch (error) {\n                console.error(\"Error checking status:\", error);\n                setStatus({\n                    error: String(error)\n                });\n            }\n        };\n        const initializeDirectly = async ()=>{\n            try {\n                const response = await fetch(\"/api/auth/debug\", {\n                    method: \"POST\"\n                });\n                const data = await response.json();\n                setStatus(data);\n                if (data.success) {\n                    window.location.reload();\n                }\n            } catch (error) {\n                console.error(\"Error initializing:\", error);\n                setStatus({\n                    error: String(error)\n                });\n            }\n        };\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"fixed top-0 right-0 z-50 bg-black bg-opacity-90 text-green-400 p-4 rounded-bl-lg max-w-md overflow-auto max-h-screen text-xs font-mono\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex justify-between items-center mb-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                            className: \"text-sm font-bold\",\n                            children: \"QuickBooks Debug Panel\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 143,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setShowDebug(false),\n                            className: \"text-gray-400 hover:text-white\",\n                            children: \"\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 144,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 142,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-2\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: checkStatus,\n                            className: \"bg-gray-800 text-white px-3 py-1 rounded-sm hover:bg-gray-700 text-xs mr-2\",\n                            children: \"Check Status\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 153,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: initializeDirectly,\n                            className: \"bg-blue-800 text-white px-3 py-1 rounded-sm hover:bg-blue-700 text-xs\",\n                            children: \"Initialize Directly\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 160,\n                            columnNumber: 11\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 152,\n                    columnNumber: 9\n                }, this),\n                status && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                    className: \"mt-3 text-xs overflow-auto max-h-96 p-2 bg-gray-900 rounded\",\n                    children: JSON.stringify(status, null, 2)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 169,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n            lineNumber: 141,\n            columnNumber: 7\n        }, this);\n    };\n    // Main app layout when authenticated\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen bg-gray-50\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"header\", {\n                className: \"bg-white shadow-sm\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                            className: \"text-xl font-medium text-gray-800\",\n                            children: \"Invoice Management Dashboard\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 182,\n                            columnNumber: 11\n                        }, this),\n                        !isQBConnected && !initialLoad && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setShowConnect(true),\n                            className: \"bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700\",\n                            children: \"Connect QuickBooks\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 184,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 181,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                lineNumber: 180,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"main\", {\n                className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",\n                children: showConnect ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"my-8\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_QuickbooksConnect__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                        initialError: null,\n                        onConnected: handleQuickBooksConnected\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                        lineNumber: 197,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 196,\n                    columnNumber: 11\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex flex-col gap-8\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-1 lg:grid-cols-2 gap-8\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[calc(100vh-16rem)]\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_InvoicePanel__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                                        selectedInvoiceId: selectedInvoiceId,\n                                        onSelectInvoice: setSelectedInvoiceId\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                        lineNumber: 206,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                    lineNumber: 205,\n                                    columnNumber: 15\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    className: \"h-[calc(100vh-16rem)]\",\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AIChat__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                        onSelectInvoice: setSelectedInvoiceId,\n                                        onToggleInvoicePanel: ()=>{},\n                                        isInvoicePanelOpen: true\n                                    }, void 0, false, {\n                                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                        lineNumber: 212,\n                                        columnNumber: 17\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                    lineNumber: 211,\n                                    columnNumber: 15\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 204,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"w-full\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ToolsPanel__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {}, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                lineNumber: 220,\n                                columnNumber: 15\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 219,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 203,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                lineNumber: 194,\n                columnNumber: 7\n            }, this),\n            showDebug && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(DebugPanel, {}, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                lineNumber: 227,\n                columnNumber: 21\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n        lineNumber: 179,\n        columnNumber: 5\n    }, this);\n}\n// Debug action component for testing\nfunction DebugAction({ title, description, endpoint, method = \"GET\" }) {\n    const [result, setResult] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const handleAction = async ()=>{\n        setLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(endpoint, {\n                method\n            });\n            const data = await response.json();\n            setResult(data);\n            if (!response.ok) {\n                setError(`Error ${response.status}: ${data.error || \"Unknown error\"}`);\n            }\n        } catch (err) {\n            setError(err instanceof Error ? err.message : \"Unknown error\");\n        } finally{\n            setLoading(false);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"bg-gray-50 p-4 rounded-lg\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex justify-between items-center mb-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                                className: \"font-medium\",\n                                children: title\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                lineNumber: 264,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"text-sm text-gray-600\",\n                                children: description\n                            }, void 0, false, {\n                                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                                lineNumber: 265,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                        lineNumber: 263,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: handleAction,\n                        disabled: loading,\n                        className: \"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded disabled:opacity-50\",\n                        children: loading ? \"Loading...\" : \"Run\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                        lineNumber: 267,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                lineNumber: 262,\n                columnNumber: 7\n            }, this),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2 p-3 bg-red-50 rounded text-red-600 text-sm\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                        children: \"Error:\"\n                    }, void 0, false, {\n                        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                        lineNumber: 278,\n                        columnNumber: 11\n                    }, this),\n                    \" \",\n                    error\n                ]\n            }, void 0, true, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                lineNumber: 277,\n                columnNumber: 9\n            }, this),\n            result && !error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-2\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"details\", {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"summary\", {\n                            className: \"cursor-pointer text-sm text-blue-600\",\n                            children: \"View Results\"\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 285,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"pre\", {\n                            className: \"mt-2 p-3 bg-gray-100 rounded text-xs overflow-auto max-h-40\",\n                            children: JSON.stringify(result, null, 2)\n                        }, void 0, false, {\n                            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                            lineNumber: 286,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                    lineNumber: 284,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n                lineNumber: 283,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\page.tsx\",\n        lineNumber: 261,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7QUFPNUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL3NyYy9hcHAvcGFnZS50c3g/ZjY4YSJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IEludm9pY2VQYW5lbCBmcm9tICcuL2NvbXBvbmVudHMvSW52b2ljZVBhbmVsJ1xuaW1wb3J0IEFJQ2hhdCBmcm9tICcuL2NvbXBvbmVudHMvQUlDaGF0J1xuaW1wb3J0IFRvb2xzUGFuZWwgZnJvbSAnLi9jb21wb25lbnRzL1Rvb2xzUGFuZWwnXG5pbXBvcnQgUXVpY2tib29rc0Nvbm5lY3QgZnJvbSAnLi9jb21wb25lbnRzL1F1aWNrYm9va3NDb25uZWN0J1xuaW1wb3J0IHsgaXNRdWlja0Jvb2tzUmVhZHkgfSBmcm9tICdAL2xpYi9xdWlja2Jvb2tzL2FwaSdcblxuLy8gRGVmaW5lIHlvdXIgb3duIGNoZWNrQXV0aCBmdW5jdGlvbiBpbiB0aGUgcGFnZVxuY29uc3QgY2hlY2tRdWlja0Jvb2tzQXV0aCA9IGFzeW5jICgpOiBQcm9taXNlPGJvb2xlYW4+ID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCBjaGVjayBpZiB3ZSBoYXZlIHRva2VucyBpbiBsb2NhbFN0b3JhZ2VcbiAgICBpZiAoaXNRdWlja0Jvb2tzUmVhZHkoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vdCwgY2hlY2sgd2l0aCB0aGUgc2VydmVyXG4gICAgY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBU0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfS9hcGkvYXV0aC9zdGF0dXNgKVxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgcmV0dXJuIGRhdGEuYXV0aGVudGljYXRlZFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIFF1aWNrQm9va3MgYXV0aCBzdGF0dXM6JywgZXJyb3IpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gSG9tZSgpIHtcbiAgY29uc3QgW3NlbGVjdGVkSW52b2ljZUlkLCBzZXRTZWxlY3RlZEludm9pY2VJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKVxuICBjb25zdCBbaXNBdXRoZW50aWNhdGVkLCBzZXRJc0F1dGhlbnRpY2F0ZWRdID0gdXNlU3RhdGU8Ym9vbGVhbiB8IG51bGw+KG51bGwpXG4gIGNvbnN0IFtzaG93RGVidWcsIHNldFNob3dEZWJ1Z10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW2lzSW52b2ljZVBhbmVsT3Blbiwgc2V0SXNJbnZvaWNlUGFuZWxPcGVuXSA9IHVzZVN0YXRlKHRydWUpXG4gIGNvbnN0IFtzaG93Q29ubmVjdCwgc2V0U2hvd0Nvbm5lY3RdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtpc1FCQ29ubmVjdGVkLCBzZXRJc1FCQ29ubmVjdGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBbaW5pdGlhbExvYWQsIHNldEluaXRpYWxMb2FkXSA9IHVzZVN0YXRlKHRydWUpXG5cbiAgLy8gQ2hlY2sgUXVpY2tCb29rcyBhdXRoIHN0YXR1cyBvbmNlIG9uIGNvbXBvbmVudCBtb3VudFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGNoZWNrQXV0aCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IGF3YWl0IGNoZWNrUXVpY2tCb29rc0F1dGgoKVxuICAgICAgICBzZXRJc1FCQ29ubmVjdGVkKGlzQXV0aGVudGljYXRlZClcbiAgICAgICAgc2V0U2hvd0Nvbm5lY3QoIWlzQXV0aGVudGljYXRlZClcbiAgICAgICAgc2V0SW5pdGlhbExvYWQoZmFsc2UpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBhdXRoOicsIGVycm9yKVxuICAgICAgICBzZXRTaG93Q29ubmVjdCh0cnVlKVxuICAgICAgICBzZXRJbml0aWFsTG9hZChmYWxzZSlcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY2hlY2tBdXRoKClcbiAgICBcbiAgICAvLyBDaGVjayBVUkwgZm9yIGF1dGg9c3VjY2VzcyBhbmQgY2xlYXIgaXRcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcbiAgICAgIGNvbnN0IGF1dGhTdGF0dXMgPSB1cmxQYXJhbXMuZ2V0KCdhdXRoJylcbiAgICAgIGlmIChhdXRoU3RhdHVzID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgc2V0SXNRQkNvbm5lY3RlZCh0cnVlKVxuICAgICAgICBzZXRTaG93Q29ubmVjdChmYWxzZSlcbiAgICAgICAgLy8gQ2xlYW4gdXAgVVJMIGFmdGVyIHByb2Nlc3NpbmdcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKVxuICAgICAgfVxuICAgIH1cbiAgfSwgW10pXG5cbiAgLy8gUHJlc3MgRCBrZXkgNSB0aW1lcyB0byBzaG93IGRlYnVnIHBhbmVsXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgICBsZXQga2V5cHJlc3NlcyA9IDA7XG4gICAgbGV0IGxhc3RLZXlUaW1lID0gMDtcbiAgICBcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIC8vIFNhZmVseSBjaGVjayBpZiBlLmtleSBleGlzdHMgYmVmb3JlIGNhbGxpbmcgdG9Mb3dlckNhc2UoKVxuICAgICAgaWYgKGUgJiYgZS5rZXkgJiYgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2QnKSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGlmIChub3cgLSBsYXN0S2V5VGltZSA8IDEwMDApIHtcbiAgICAgICAgICBrZXlwcmVzc2VzKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAga2V5cHJlc3NlcyA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdEtleVRpbWUgPSBub3c7XG4gICAgICAgIFxuICAgICAgICBpZiAoa2V5cHJlc3NlcyA+PSA1KSB7XG4gICAgICAgICAgc2V0U2hvd0RlYnVnKHRydWUpO1xuICAgICAgICAgIGtleXByZXNzZXMgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICB9LCBbXSk7XG5cbiAgLy8gRnVuY3Rpb24gdG8gdG9nZ2xlIGludm9pY2UgcGFuZWwgdmlzaWJpbGl0eVxuICBjb25zdCB0b2dnbGVJbnZvaWNlUGFuZWwgPSAob3BlbjogYm9vbGVhbikgPT4ge1xuICAgIHNldElzSW52b2ljZVBhbmVsT3BlbihvcGVuKTtcbiAgfVxuXG4gIC8vIEhhbmRsZSBzdWNjZXNzZnVsIFF1aWNrQm9va3MgY29ubmVjdGlvblxuICBjb25zdCBoYW5kbGVRdWlja0Jvb2tzQ29ubmVjdGVkID0gKCkgPT4ge1xuICAgIHNldElzUUJDb25uZWN0ZWQodHJ1ZSlcbiAgICBzZXRTaG93Q29ubmVjdChmYWxzZSlcbiAgfVxuXG4gIC8vIERlYnVnIHBhbmVsIGNvbXBvbmVudFxuICBjb25zdCBEZWJ1Z1BhbmVsID0gKCkgPT4ge1xuICAgIGNvbnN0IFtzdGF0dXMsIHNldFN0YXR1c10gPSB1c2VTdGF0ZTxhbnk+KG51bGwpO1xuICAgIFxuICAgIGNvbnN0IGNoZWNrU3RhdHVzID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoL2RlYnVnJyk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIHNldFN0YXR1cyhkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHN0YXR1czonLCBlcnJvcik7XG4gICAgICAgIHNldFN0YXR1cyh7IGVycm9yOiBTdHJpbmcoZXJyb3IpIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY29uc3QgaW5pdGlhbGl6ZURpcmVjdGx5ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9hdXRoL2RlYnVnJywgeyBtZXRob2Q6ICdQT1NUJyB9KTtcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgc2V0U3RhdHVzKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbml0aWFsaXppbmc6JywgZXJyb3IpO1xuICAgICAgICBzZXRTdGF0dXMoeyBlcnJvcjogU3RyaW5nKGVycm9yKSB9KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIHRvcC0wIHJpZ2h0LTAgei01MCBiZy1ibGFjayBiZy1vcGFjaXR5LTkwIHRleHQtZ3JlZW4tNDAwIHAtNCByb3VuZGVkLWJsLWxnIG1heC13LW1kIG92ZXJmbG93LWF1dG8gbWF4LWgtc2NyZWVuIHRleHQteHMgZm9udC1tb25vXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtY2VudGVyIG1iLTJcIj5cbiAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LWJvbGRcIj5RdWlja0Jvb2tzIERlYnVnIFBhbmVsPC9oMz5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd0RlYnVnKGZhbHNlKX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInRleHQtZ3JheS00MDAgaG92ZXI6dGV4dC13aGl0ZVwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAg4pyVXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICA8YnV0dG9uIFxuICAgICAgICAgICAgb25DbGljaz17Y2hlY2tTdGF0dXN9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ncmF5LTgwMCB0ZXh0LXdoaXRlIHB4LTMgcHktMSByb3VuZGVkLXNtIGhvdmVyOmJnLWdyYXktNzAwIHRleHQteHMgbXItMlwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgQ2hlY2sgU3RhdHVzXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgXG4gICAgICAgICAgPGJ1dHRvbiBcbiAgICAgICAgICAgIG9uQ2xpY2s9e2luaXRpYWxpemVEaXJlY3RseX1cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtODAwIHRleHQtd2hpdGUgcHgtMyBweS0xIHJvdW5kZWQtc20gaG92ZXI6YmctYmx1ZS03MDAgdGV4dC14c1wiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgSW5pdGlhbGl6ZSBEaXJlY3RseVxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIHtzdGF0dXMgJiYgKFxuICAgICAgICAgIDxwcmUgY2xhc3NOYW1lPVwibXQtMyB0ZXh0LXhzIG92ZXJmbG93LWF1dG8gbWF4LWgtOTYgcC0yIGJnLWdyYXktOTAwIHJvdW5kZWRcIj5cbiAgICAgICAgICAgIHtKU09OLnN0cmluZ2lmeShzdGF0dXMsIG51bGwsIDIpfVxuICAgICAgICAgIDwvcHJlPlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICAvLyBNYWluIGFwcCBsYXlvdXQgd2hlbiBhdXRoZW50aWNhdGVkXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJtaW4taC1zY3JlZW4gYmctZ3JheS01MFwiPlxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJiZy13aGl0ZSBzaGFkb3ctc21cIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYXgtdy03eGwgbXgtYXV0byBweC00IHB5LTQgc206cHgtNiBsZzpweC04IGZsZXgganVzdGlmeS1iZXR3ZWVuIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0ZXh0LXhsIGZvbnQtbWVkaXVtIHRleHQtZ3JheS04MDBcIj5JbnZvaWNlIE1hbmFnZW1lbnQgRGFzaGJvYXJkPC9oMT5cbiAgICAgICAgICB7IWlzUUJDb25uZWN0ZWQgJiYgIWluaXRpYWxMb2FkICYmIChcbiAgICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNob3dDb25uZWN0KHRydWUpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJiZy1ibHVlLTYwMCB0ZXh0LXdoaXRlIHB4LTQgcHktMiByb3VuZGVkIHNoYWRvdyBob3ZlcjpiZy1ibHVlLTcwMFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIENvbm5lY3QgUXVpY2tCb29rc1xuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cbiAgICAgIFxuICAgICAgPG1haW4gY2xhc3NOYW1lPVwibWF4LXctN3hsIG14LWF1dG8gcHgtNCBzbTpweC02IGxnOnB4LTggcHktOFwiPlxuICAgICAgICB7c2hvd0Nvbm5lY3QgPyAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteS04XCI+XG4gICAgICAgICAgICA8UXVpY2tib29rc0Nvbm5lY3QgXG4gICAgICAgICAgICAgIGluaXRpYWxFcnJvcj17bnVsbH0gXG4gICAgICAgICAgICAgIG9uQ29ubmVjdGVkPXtoYW5kbGVRdWlja0Jvb2tzQ29ubmVjdGVkfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZmxleC1jb2wgZ2FwLThcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMSBsZzpncmlkLWNvbHMtMiBnYXAtOFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtW2NhbGMoMTAwdmgtMTZyZW0pXVwiPlxuICAgICAgICAgICAgICAgIDxJbnZvaWNlUGFuZWwgXG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZEludm9pY2VJZD17c2VsZWN0ZWRJbnZvaWNlSWR9XG4gICAgICAgICAgICAgICAgICBvblNlbGVjdEludm9pY2U9e3NldFNlbGVjdGVkSW52b2ljZUlkfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImgtW2NhbGMoMTAwdmgtMTZyZW0pXVwiPlxuICAgICAgICAgICAgICAgIDxBSUNoYXQgXG4gICAgICAgICAgICAgICAgICBvblNlbGVjdEludm9pY2U9e3NldFNlbGVjdGVkSW52b2ljZUlkfVxuICAgICAgICAgICAgICAgICAgb25Ub2dnbGVJbnZvaWNlUGFuZWw9eygpID0+IHt9fVxuICAgICAgICAgICAgICAgICAgaXNJbnZvaWNlUGFuZWxPcGVuPXt0cnVlfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInctZnVsbFwiPlxuICAgICAgICAgICAgICA8VG9vbHNQYW5lbCAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L21haW4+XG4gICAgICBcbiAgICAgIHsvKiBEZWJ1ZyBQYW5lbCAqL31cbiAgICAgIHtzaG93RGVidWcgJiYgPERlYnVnUGFuZWwgLz59XG4gICAgPC9kaXY+XG4gIClcbn1cblxuLy8gRGVidWcgYWN0aW9uIGNvbXBvbmVudCBmb3IgdGVzdGluZ1xuZnVuY3Rpb24gRGVidWdBY3Rpb24oeyB0aXRsZSwgZGVzY3JpcHRpb24sIGVuZHBvaW50LCBtZXRob2QgPSAnR0VUJyB9OiB7IFxuICB0aXRsZTogc3RyaW5nLCBcbiAgZGVzY3JpcHRpb246IHN0cmluZyxcbiAgZW5kcG9pbnQ6IHN0cmluZyxcbiAgbWV0aG9kPzogc3RyaW5nIFxufSkge1xuICBjb25zdCBbcmVzdWx0LCBzZXRSZXN1bHRdID0gdXNlU3RhdGU8YW55PihudWxsKTtcbiAgY29uc3QgW2xvYWRpbmcsIHNldExvYWRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBcbiAgY29uc3QgaGFuZGxlQWN0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgc2V0RXJyb3IobnVsbCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHsgbWV0aG9kIH0pO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHNldFJlc3VsdChkYXRhKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgc2V0RXJyb3IoYEVycm9yICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtkYXRhLmVycm9yIHx8ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNldEVycm9yKGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9XG4gIH07XG4gIFxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiYmctZ3JheS01MCBwLTQgcm91bmRlZC1sZ1wiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGp1c3RpZnktYmV0d2VlbiBpdGVtcy1jZW50ZXIgbWItMlwiPlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb250LW1lZGl1bVwiPnt0aXRsZX08L2gzPlxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQtc20gdGV4dC1ncmF5LTYwMFwiPntkZXNjcmlwdGlvbn08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgb25DbGljaz17aGFuZGxlQWN0aW9ufVxuICAgICAgICAgIGRpc2FibGVkPXtsb2FkaW5nfVxuICAgICAgICAgIGNsYXNzTmFtZT1cImJnLWJsdWUtNjAwIGhvdmVyOmJnLWJsdWUtNzAwIHRleHQtd2hpdGUgZm9udC1tZWRpdW0gcHktMiBweC00IHJvdW5kZWQgZGlzYWJsZWQ6b3BhY2l0eS01MFwiXG4gICAgICAgID5cbiAgICAgICAgICB7bG9hZGluZyA/ICdMb2FkaW5nLi4uJyA6ICdSdW4nfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgXG4gICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LTIgcC0zIGJnLXJlZC01MCByb3VuZGVkIHRleHQtcmVkLTYwMCB0ZXh0LXNtXCI+XG4gICAgICAgICAgPHN0cm9uZz5FcnJvcjo8L3N0cm9uZz4ge2Vycm9yfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICBcbiAgICAgIHtyZXN1bHQgJiYgIWVycm9yICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtdC0yXCI+XG4gICAgICAgICAgPGRldGFpbHM+XG4gICAgICAgICAgICA8c3VtbWFyeSBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlciB0ZXh0LXNtIHRleHQtYmx1ZS02MDBcIj5WaWV3IFJlc3VsdHM8L3N1bW1hcnk+XG4gICAgICAgICAgICA8cHJlIGNsYXNzTmFtZT1cIm10LTIgcC0zIGJnLWdyYXktMTAwIHJvdW5kZWQgdGV4dC14cyBvdmVyZmxvdy1hdXRvIG1heC1oLTQwXCI+XG4gICAgICAgICAgICAgIHtKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpfVxuICAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICAgPC9kZXRhaWxzPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIkludm9pY2VQYW5lbCIsIkFJQ2hhdCIsIlRvb2xzUGFuZWwiLCJRdWlja2Jvb2tzQ29ubmVjdCIsImlzUXVpY2tCb29rc1JlYWR5IiwiY2hlY2tRdWlja0Jvb2tzQXV0aCIsImJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQkFTRV9VUkwiLCJyZXNwb25zZSIsImZldGNoIiwib2siLCJkYXRhIiwianNvbiIsImF1dGhlbnRpY2F0ZWQiLCJlcnJvciIsImNvbnNvbGUiLCJIb21lIiwic2VsZWN0ZWRJbnZvaWNlSWQiLCJzZXRTZWxlY3RlZEludm9pY2VJZCIsImlzQXV0aGVudGljYXRlZCIsInNldElzQXV0aGVudGljYXRlZCIsInNob3dEZWJ1ZyIsInNldFNob3dEZWJ1ZyIsImlzSW52b2ljZVBhbmVsT3BlbiIsInNldElzSW52b2ljZVBhbmVsT3BlbiIsInNob3dDb25uZWN0Iiwic2V0U2hvd0Nvbm5lY3QiLCJpc1FCQ29ubmVjdGVkIiwic2V0SXNRQkNvbm5lY3RlZCIsImluaXRpYWxMb2FkIiwic2V0SW5pdGlhbExvYWQiLCJjaGVja0F1dGgiLCJ1cmxQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsImF1dGhTdGF0dXMiLCJnZXQiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiZG9jdW1lbnQiLCJ0aXRsZSIsInBhdGhuYW1lIiwia2V5cHJlc3NlcyIsImxhc3RLZXlUaW1lIiwiaGFuZGxlS2V5RG93biIsImUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIm5vdyIsIkRhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInRvZ2dsZUludm9pY2VQYW5lbCIsIm9wZW4iLCJoYW5kbGVRdWlja0Jvb2tzQ29ubmVjdGVkIiwiRGVidWdQYW5lbCIsInN0YXR1cyIsInNldFN0YXR1cyIsImNoZWNrU3RhdHVzIiwiU3RyaW5nIiwiaW5pdGlhbGl6ZURpcmVjdGx5IiwibWV0aG9kIiwic3VjY2VzcyIsInJlbG9hZCIsImRpdiIsImNsYXNzTmFtZSIsImgzIiwiYnV0dG9uIiwib25DbGljayIsInByZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJoZWFkZXIiLCJoMSIsIm1haW4iLCJpbml0aWFsRXJyb3IiLCJvbkNvbm5lY3RlZCIsIm9uU2VsZWN0SW52b2ljZSIsIm9uVG9nZ2xlSW52b2ljZVBhbmVsIiwiRGVidWdBY3Rpb24iLCJkZXNjcmlwdGlvbiIsImVuZHBvaW50IiwicmVzdWx0Iiwic2V0UmVzdWx0IiwibG9hZGluZyIsInNldExvYWRpbmciLCJzZXRFcnJvciIsImhhbmRsZUFjdGlvbiIsImVyciIsIkVycm9yIiwibWVzc2FnZSIsInAiLCJkaXNhYmxlZCIsInN0cm9uZyIsImRldGFpbHMiLCJzdW1tYXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./src/app/page.tsx\n");

/***/ }),

/***/ "(ssr)/./src/app/providers.tsx":
/*!*******************************!*\
  !*** ./src/app/providers.tsx ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Providers)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-query */ \"(ssr)/./node_modules/react-query/es/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\nfunction Providers({ children }) {\n    const [queryClient] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(()=>new react_query__WEBPACK_IMPORTED_MODULE_1__.QueryClient());\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_query__WEBPACK_IMPORTED_MODULE_1__.QueryClientProvider, {\n        client: queryClient,\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\providers.tsx\",\n        lineNumber: 10,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvYXBwL3Byb3ZpZGVycy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUU4RDtBQUM5QjtBQUVqQixTQUFTRyxVQUFVLEVBQUVDLFFBQVEsRUFBaUM7SUFDM0UsTUFBTSxDQUFDQyxZQUFZLEdBQUdILCtDQUFRQSxDQUFDLElBQU0sSUFBSUYsb0RBQVdBO0lBRXBELHFCQUNFLDhEQUFDQyw0REFBbUJBO1FBQUNLLFFBQVFEO2tCQUMxQkQ7Ozs7OztBQUdQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9zcmMvYXBwL3Byb3ZpZGVycy50c3g/OTMyNiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcclxuXHJcbmltcG9ydCB7IFF1ZXJ5Q2xpZW50LCBRdWVyeUNsaWVudFByb3ZpZGVyIH0gZnJvbSAncmVhY3QtcXVlcnknXHJcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQcm92aWRlcnMoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xyXG4gIGNvbnN0IFtxdWVyeUNsaWVudF0gPSB1c2VTdGF0ZSgoKSA9PiBuZXcgUXVlcnlDbGllbnQoKSlcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxyXG4gICAgICB7Y2hpbGRyZW59XHJcbiAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XHJcbiAgKVxyXG59ICJdLCJuYW1lcyI6WyJRdWVyeUNsaWVudCIsIlF1ZXJ5Q2xpZW50UHJvdmlkZXIiLCJ1c2VTdGF0ZSIsIlByb3ZpZGVycyIsImNoaWxkcmVuIiwicXVlcnlDbGllbnQiLCJjbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/app/providers.tsx\n");

/***/ }),

/***/ "(ssr)/./src/lib/ai/tools.ts":
/*!*****************************!*\
  !*** ./src/lib/ai/tools.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleToolCall: () => (/* binding */ handleToolCall),\n/* harmony export */   invoiceTools: () => (/* binding */ invoiceTools),\n/* harmony export */   toolImplementations: () => (/* binding */ toolImplementations)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(ssr)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _quickbooks_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../quickbooks/api */ \"(ssr)/./src/lib/quickbooks/api.ts\");\n\n\nconst invoiceSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    id: zod__WEBPACK_IMPORTED_MODULE_1__.z.string()\n});\nconst analyzeSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    analysisType: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n        \"trends\",\n        \"customer\",\n        \"amounts\"\n    ]),\n    timeframe: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n        \"week\",\n        \"month\",\n        \"year\"\n    ]).optional()\n});\nconst invoiceTools = {\n    getInvoice: {\n        name: \"getInvoice\",\n        description: \"Get details of a specific invoice by ID\",\n        parameters: {\n            type: \"object\",\n            properties: {\n                id: {\n                    type: \"string\",\n                    description: \"The ID of the invoice to retrieve\"\n                }\n            },\n            required: [\n                \"id\"\n            ]\n        }\n    },\n    listInvoices: {\n        name: \"listInvoices\",\n        description: \"List all invoices\",\n        parameters: {\n            type: \"object\",\n            properties: {}\n        }\n    },\n    summarizeInvoice: {\n        name: \"summarizeInvoice\",\n        description: \"Get a natural language summary of an invoice\",\n        parameters: {\n            type: \"object\",\n            properties: {\n                id: {\n                    type: \"string\",\n                    description: \"The ID of the invoice to summarize\"\n                }\n            },\n            required: [\n                \"id\"\n            ]\n        }\n    },\n    analyzeInvoices: {\n        name: \"analyzeInvoices\",\n        description: \"Perform analysis of invoices\",\n        parameters: {\n            type: \"object\",\n            properties: {\n                analysisType: {\n                    type: \"string\",\n                    enum: [\n                        \"trends\",\n                        \"customer\",\n                        \"amounts\"\n                    ],\n                    description: \"Type of analysis to perform\"\n                },\n                timeframe: {\n                    type: \"string\",\n                    enum: [\n                        \"week\",\n                        \"month\",\n                        \"year\"\n                    ],\n                    description: \"Time period to analyze\"\n                }\n            },\n            required: [\n                \"analysisType\"\n            ]\n        }\n    }\n};\n// Update the handleToolCall function to use the consistent API endpoint\nconst handleToolCall = async (tool, params)=>{\n    console.log(` Executing tool: ${tool} with params:`, params);\n    try {\n        // Use a single consistent API endpoint for all tool calls\n        const response = await fetch(\"/api/chat/tool\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                tool,\n                params\n            })\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            console.error(`Error calling ${tool}:`, errorData);\n            throw new Error(errorData.error || `Failed to execute ${tool} tool`);\n        }\n        const data = await response.json();\n        console.log(` ${tool} execution result:`, data);\n        // For summarizeInvoice, add additional formatting if needed\n        if (tool === \"summarizeInvoice\" && data && !data.summary && !data.details) {\n            // If we just got a raw invoice, format it into a summary\n            if (data.DocNumber && data.CustomerRef) {\n                const invoice = data;\n                return {\n                    summary: `Invoice #${invoice.DocNumber} for ${invoice.CustomerRef.name}`,\n                    details: {\n                        customer: invoice.CustomerRef.name,\n                        amount: `$${Number(invoice.TotalAmt).toFixed(2)}`,\n                        date: invoice.TxnDate ? new Date(invoice.TxnDate).toLocaleDateString() : \"Unknown date\",\n                        dueDate: invoice.DueDate ? new Date(invoice.DueDate).toLocaleDateString() : \"Not specified\",\n                        balance: `$${Number(invoice.Balance || 0).toFixed(2)}`,\n                        memo: invoice.CustomerMemo?.value || invoice.PrivateNote || \"No memo available\"\n                    }\n                };\n            }\n        }\n        return data;\n    } catch (error) {\n        console.error(`Error handling tool call ${tool}:`, error);\n        throw error;\n    }\n};\n// Keeping the direct implementations as fallbacks, but they shouldn't be used anymore\nconst toolImplementations = {\n    getInvoice: async (params)=>{\n        const { id } = params;\n        return await (0,_quickbooks_api__WEBPACK_IMPORTED_MODULE_0__.getInvoiceById)(id);\n    },\n    listInvoices: async ()=>{\n        return await (0,_quickbooks_api__WEBPACK_IMPORTED_MODULE_0__.fetchInvoices)();\n    },\n    summarizeInvoice: async (params)=>{\n        const { id } = params;\n        const invoice = await (0,_quickbooks_api__WEBPACK_IMPORTED_MODULE_0__.getInvoiceById)(id);\n        return {\n            summary: `Invoice #${invoice.DocNumber} for ${invoice.CustomerRef.name}`,\n            details: {\n                customer: invoice.CustomerRef.name,\n                amount: `$${Number(invoice.TotalAmt).toFixed(2)}`,\n                date: invoice.TxnDate ? new Date(invoice.TxnDate).toLocaleDateString() : \"Unknown date\",\n                dueDate: invoice.DueDate ? new Date(invoice.DueDate).toLocaleDateString() : \"Not specified\",\n                balance: `$${Number(invoice.Balance || 0).toFixed(2)}`,\n                memo: invoice.CustomerMemo?.value || invoice.PrivateNote || \"No memo available\"\n            }\n        };\n    },\n    analyzeInvoices: async (params)=>{\n        const { analysisType } = params;\n        const invoices = await (0,_quickbooks_api__WEBPACK_IMPORTED_MODULE_0__.fetchInvoices)();\n        // Basic analysis implementation\n        if (analysisType === \"trends\") {\n        // Implementation for trends analysis\n        } else if (analysisType === \"customer\") {\n        // Implementation for customer analysis\n        } else if (analysisType === \"amounts\") {\n        // Implementation for amount analysis\n        }\n        return {\n            analysisType,\n            result: \"Analysis results would appear here\",\n            invoicesAnalyzed: invoices.length\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzlCLElBQUksQ0FBQyxDQUFDO1lBQ3hFNEIsU0FBUztnQkFDUEksVUFBVUQsUUFBUUQsV0FBVyxDQUFDOUIsSUFBSTtnQkFDbENpQyxRQUFRLENBQUMsQ0FBQyxFQUFFQyxPQUFPSCxRQUFRSSxRQUFRLEVBQUVDLE9BQU8sQ0FBQyxHQUFHLENBQUM7Z0JBQ2pEQyxNQUFNTixRQUFRTyxPQUFPLEdBQUcsSUFBSUMsS0FBS1IsUUFBUU8sT0FBTyxFQUFFRSxrQkFBa0IsS0FBSztnQkFDekVDLFNBQVNWLFFBQVFXLE9BQU8sR0FBRyxJQUFJSCxLQUFLUixRQUFRVyxPQUFPLEVBQUVGLGtCQUFrQixLQUFLO2dCQUM1RUcsU0FBUyxDQUFDLENBQUMsRUFBRVQsT0FBT0gsUUFBUWEsT0FBTyxJQUFJLEdBQUdSLE9BQU8sQ0FBQyxHQUFHLENBQUM7Z0JBQ3REUyxNQUFNZCxRQUFRZSxZQUFZLEVBQUVDLFNBQVNoQixRQUFRaUIsV0FBVyxJQUFJO1lBQzlEO1FBQ0Y7SUFDRjtJQUVBeEMsaUJBQWlCLE9BQU9HO1FBQ3RCLE1BQU0sRUFBRWpCLFlBQVksRUFBRSxHQUFHaUI7UUFDekIsTUFBTXVDLFdBQVcsTUFBTS9ELDhEQUFhQTtRQUVwQyxnQ0FBZ0M7UUFDaEMsSUFBSU8saUJBQWlCLFVBQVU7UUFDN0IscUNBQXFDO1FBQ3ZDLE9BQU8sSUFBSUEsaUJBQWlCLFlBQVk7UUFDdEMsdUNBQXVDO1FBQ3pDLE9BQU8sSUFBSUEsaUJBQWlCLFdBQVc7UUFDckMscUNBQXFDO1FBQ3ZDO1FBRUEsT0FBTztZQUNMQTtZQUNBeUQsUUFBUTtZQUNSQyxrQkFBa0JGLFNBQVNHLE1BQU07UUFDbkM7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL3NyYy9saWIvYWkvdG9vbHMudHM/ZTNiYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCB7IGZldGNoSW52b2ljZXMsIGdldEludm9pY2VCeUlkIH0gZnJvbSAnLi4vcXVpY2tib29rcy9hcGknO1xuaW1wb3J0IHsgSW52b2ljZSB9IGZyb20gJ0AvdHlwZXMnO1xuXG5jb25zdCBpbnZvaWNlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbn0pO1xuXG5jb25zdCBhbmFseXplU2NoZW1hID0gei5vYmplY3Qoe1xuICBhbmFseXNpc1R5cGU6IHouZW51bShbJ3RyZW5kcycsICdjdXN0b21lcicsICdhbW91bnRzJ10pLFxuICB0aW1lZnJhbWU6IHouZW51bShbJ3dlZWsnLCAnbW9udGgnLCAneWVhciddKS5vcHRpb25hbCgpLFxufSk7XG5cbmV4cG9ydCBjb25zdCBpbnZvaWNlVG9vbHMgPSB7XG4gIGdldEludm9pY2U6IHtcbiAgICBuYW1lOiAnZ2V0SW52b2ljZScsXG4gICAgZGVzY3JpcHRpb246ICdHZXQgZGV0YWlscyBvZiBhIHNwZWNpZmljIGludm9pY2UgYnkgSUQnLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge1xuICAgICAgICBpZDoge1xuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVGhlIElEIG9mIHRoZSBpbnZvaWNlIHRvIHJldHJpZXZlJyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICByZXF1aXJlZDogWydpZCddLFxuICAgIH0sXG4gIH0sXG4gIGxpc3RJbnZvaWNlczoge1xuICAgIG5hbWU6ICdsaXN0SW52b2ljZXMnLFxuICAgIGRlc2NyaXB0aW9uOiAnTGlzdCBhbGwgaW52b2ljZXMnLFxuICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgcHJvcGVydGllczoge30sXG4gICAgfSxcbiAgfSxcbiAgc3VtbWFyaXplSW52b2ljZToge1xuICAgIG5hbWU6ICdzdW1tYXJpemVJbnZvaWNlJyxcbiAgICBkZXNjcmlwdGlvbjogJ0dldCBhIG5hdHVyYWwgbGFuZ3VhZ2Ugc3VtbWFyeSBvZiBhbiBpbnZvaWNlJyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RoZSBJRCBvZiB0aGUgaW52b2ljZSB0byBzdW1tYXJpemUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHJlcXVpcmVkOiBbJ2lkJ10sXG4gICAgfSxcbiAgfSxcbiAgYW5hbHl6ZUludm9pY2VzOiB7XG4gICAgbmFtZTogJ2FuYWx5emVJbnZvaWNlcycsXG4gICAgZGVzY3JpcHRpb246ICdQZXJmb3JtIGFuYWx5c2lzIG9mIGludm9pY2VzJyxcbiAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgYW5hbHlzaXNUeXBlOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZW51bTogWyd0cmVuZHMnLCAnY3VzdG9tZXInLCAnYW1vdW50cyddLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVHlwZSBvZiBhbmFseXNpcyB0byBwZXJmb3JtJyxcbiAgICAgICAgfSxcbiAgICAgICAgdGltZWZyYW1lOiB7XG4gICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgZW51bTogWyd3ZWVrJywgJ21vbnRoJywgJ3llYXInXSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1RpbWUgcGVyaW9kIHRvIGFuYWx5emUnLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHJlcXVpcmVkOiBbJ2FuYWx5c2lzVHlwZSddLFxuICAgIH0sXG4gIH0sXG59O1xuXG4vLyBVcGRhdGUgdGhlIGhhbmRsZVRvb2xDYWxsIGZ1bmN0aW9uIHRvIHVzZSB0aGUgY29uc2lzdGVudCBBUEkgZW5kcG9pbnRcbmV4cG9ydCBjb25zdCBoYW5kbGVUb29sQ2FsbCA9IGFzeW5jICh0b29sOiBzdHJpbmcsIHBhcmFtczogYW55KSA9PiB7XG4gIGNvbnNvbGUubG9nKGDwn5SnIEV4ZWN1dGluZyB0b29sOiAke3Rvb2x9IHdpdGggcGFyYW1zOmAsIHBhcmFtcyk7XG4gIFxuICB0cnkge1xuICAgIC8vIFVzZSBhIHNpbmdsZSBjb25zaXN0ZW50IEFQSSBlbmRwb2ludCBmb3IgYWxsIHRvb2wgY2FsbHNcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2NoYXQvdG9vbCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdG9vbCxcbiAgICAgICAgcGFyYW1zXG4gICAgICB9KSxcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjYWxsaW5nICR7dG9vbH06YCwgZXJyb3JEYXRhKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEuZXJyb3IgfHwgYEZhaWxlZCB0byBleGVjdXRlICR7dG9vbH0gdG9vbGApO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKGDinIUgJHt0b29sfSBleGVjdXRpb24gcmVzdWx0OmAsIGRhdGEpO1xuICAgIFxuICAgIC8vIEZvciBzdW1tYXJpemVJbnZvaWNlLCBhZGQgYWRkaXRpb25hbCBmb3JtYXR0aW5nIGlmIG5lZWRlZFxuICAgIGlmICh0b29sID09PSAnc3VtbWFyaXplSW52b2ljZScgJiYgZGF0YSAmJiAhZGF0YS5zdW1tYXJ5ICYmICFkYXRhLmRldGFpbHMpIHtcbiAgICAgIC8vIElmIHdlIGp1c3QgZ290IGEgcmF3IGludm9pY2UsIGZvcm1hdCBpdCBpbnRvIGEgc3VtbWFyeVxuICAgICAgaWYgKGRhdGEuRG9jTnVtYmVyICYmIGRhdGEuQ3VzdG9tZXJSZWYpIHtcbiAgICAgICAgY29uc3QgaW52b2ljZSA9IGRhdGE7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VtbWFyeTogYEludm9pY2UgIyR7aW52b2ljZS5Eb2NOdW1iZXJ9IGZvciAke2ludm9pY2UuQ3VzdG9tZXJSZWYubmFtZX1gLFxuICAgICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICAgIGN1c3RvbWVyOiBpbnZvaWNlLkN1c3RvbWVyUmVmLm5hbWUsXG4gICAgICAgICAgICBhbW91bnQ6IGAkJHtOdW1iZXIoaW52b2ljZS5Ub3RhbEFtdCkudG9GaXhlZCgyKX1gLFxuICAgICAgICAgICAgZGF0ZTogaW52b2ljZS5UeG5EYXRlID8gbmV3IERhdGUoaW52b2ljZS5UeG5EYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICdVbmtub3duIGRhdGUnLFxuICAgICAgICAgICAgZHVlRGF0ZTogaW52b2ljZS5EdWVEYXRlID8gbmV3IERhdGUoaW52b2ljZS5EdWVEYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICdOb3Qgc3BlY2lmaWVkJyxcbiAgICAgICAgICAgIGJhbGFuY2U6IGAkJHtOdW1iZXIoaW52b2ljZS5CYWxhbmNlIHx8IDApLnRvRml4ZWQoMil9YCxcbiAgICAgICAgICAgIG1lbW86IGludm9pY2UuQ3VzdG9tZXJNZW1vPy52YWx1ZSB8fCBpbnZvaWNlLlByaXZhdGVOb3RlIHx8ICdObyBtZW1vIGF2YWlsYWJsZSdcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBkYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGhhbmRsaW5nIHRvb2wgY2FsbCAke3Rvb2x9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLy8gS2VlcGluZyB0aGUgZGlyZWN0IGltcGxlbWVudGF0aW9ucyBhcyBmYWxsYmFja3MsIGJ1dCB0aGV5IHNob3VsZG4ndCBiZSB1c2VkIGFueW1vcmVcbmV4cG9ydCBjb25zdCB0b29sSW1wbGVtZW50YXRpb25zID0ge1xuICBnZXRJbnZvaWNlOiBhc3luYyAocGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSA9PiB7XG4gICAgY29uc3QgeyBpZCB9ID0gcGFyYW1zO1xuICAgIHJldHVybiBhd2FpdCBnZXRJbnZvaWNlQnlJZChpZCk7XG4gIH0sXG4gIFxuICBsaXN0SW52b2ljZXM6IGFzeW5jICgpID0+IHtcbiAgICByZXR1cm4gYXdhaXQgZmV0Y2hJbnZvaWNlcygpO1xuICB9LFxuICBcbiAgc3VtbWFyaXplSW52b2ljZTogYXN5bmMgKHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIGNvbnN0IHsgaWQgfSA9IHBhcmFtcztcbiAgICBjb25zdCBpbnZvaWNlID0gYXdhaXQgZ2V0SW52b2ljZUJ5SWQoaWQpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdW1tYXJ5OiBgSW52b2ljZSAjJHtpbnZvaWNlLkRvY051bWJlcn0gZm9yICR7aW52b2ljZS5DdXN0b21lclJlZi5uYW1lfWAsXG4gICAgICBkZXRhaWxzOiB7XG4gICAgICAgIGN1c3RvbWVyOiBpbnZvaWNlLkN1c3RvbWVyUmVmLm5hbWUsXG4gICAgICAgIGFtb3VudDogYCQke051bWJlcihpbnZvaWNlLlRvdGFsQW10KS50b0ZpeGVkKDIpfWAsXG4gICAgICAgIGRhdGU6IGludm9pY2UuVHhuRGF0ZSA/IG5ldyBEYXRlKGludm9pY2UuVHhuRGF0ZSkudG9Mb2NhbGVEYXRlU3RyaW5nKCkgOiAnVW5rbm93biBkYXRlJyxcbiAgICAgICAgZHVlRGF0ZTogaW52b2ljZS5EdWVEYXRlID8gbmV3IERhdGUoaW52b2ljZS5EdWVEYXRlKS50b0xvY2FsZURhdGVTdHJpbmcoKSA6ICdOb3Qgc3BlY2lmaWVkJyxcbiAgICAgICAgYmFsYW5jZTogYCQke051bWJlcihpbnZvaWNlLkJhbGFuY2UgfHwgMCkudG9GaXhlZCgyKX1gLFxuICAgICAgICBtZW1vOiBpbnZvaWNlLkN1c3RvbWVyTWVtbz8udmFsdWUgfHwgaW52b2ljZS5Qcml2YXRlTm90ZSB8fCAnTm8gbWVtbyBhdmFpbGFibGUnXG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgXG4gIGFuYWx5emVJbnZvaWNlczogYXN5bmMgKHBhcmFtczogUmVjb3JkPHN0cmluZywgYW55PikgPT4ge1xuICAgIGNvbnN0IHsgYW5hbHlzaXNUeXBlIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgaW52b2ljZXMgPSBhd2FpdCBmZXRjaEludm9pY2VzKCk7XG4gICAgXG4gICAgLy8gQmFzaWMgYW5hbHlzaXMgaW1wbGVtZW50YXRpb25cbiAgICBpZiAoYW5hbHlzaXNUeXBlID09PSAndHJlbmRzJykge1xuICAgICAgLy8gSW1wbGVtZW50YXRpb24gZm9yIHRyZW5kcyBhbmFseXNpc1xuICAgIH0gZWxzZSBpZiAoYW5hbHlzaXNUeXBlID09PSAnY3VzdG9tZXInKSB7XG4gICAgICAvLyBJbXBsZW1lbnRhdGlvbiBmb3IgY3VzdG9tZXIgYW5hbHlzaXNcbiAgICB9IGVsc2UgaWYgKGFuYWx5c2lzVHlwZSA9PT0gJ2Ftb3VudHMnKSB7XG4gICAgICAvLyBJbXBsZW1lbnRhdGlvbiBmb3IgYW1vdW50IGFuYWx5c2lzXG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBhbmFseXNpc1R5cGUsXG4gICAgICByZXN1bHQ6ICdBbmFseXNpcyByZXN1bHRzIHdvdWxkIGFwcGVhciBoZXJlJyxcbiAgICAgIGludm9pY2VzQW5hbHl6ZWQ6IGludm9pY2VzLmxlbmd0aFxuICAgIH07XG4gIH1cbn07ICJdLCJuYW1lcyI6WyJ6IiwiZmV0Y2hJbnZvaWNlcyIsImdldEludm9pY2VCeUlkIiwiaW52b2ljZVNjaGVtYSIsIm9iamVjdCIsImlkIiwic3RyaW5nIiwiYW5hbHl6ZVNjaGVtYSIsImFuYWx5c2lzVHlwZSIsImVudW0iLCJ0aW1lZnJhbWUiLCJvcHRpb25hbCIsImludm9pY2VUb29scyIsImdldEludm9pY2UiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwidHlwZSIsInByb3BlcnRpZXMiLCJyZXF1aXJlZCIsImxpc3RJbnZvaWNlcyIsInN1bW1hcml6ZUludm9pY2UiLCJhbmFseXplSW52b2ljZXMiLCJoYW5kbGVUb29sQ2FsbCIsInRvb2wiLCJwYXJhbXMiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImVycm9yIiwiRXJyb3IiLCJkYXRhIiwic3VtbWFyeSIsImRldGFpbHMiLCJEb2NOdW1iZXIiLCJDdXN0b21lclJlZiIsImludm9pY2UiLCJjdXN0b21lciIsImFtb3VudCIsIk51bWJlciIsIlRvdGFsQW10IiwidG9GaXhlZCIsImRhdGUiLCJUeG5EYXRlIiwiRGF0ZSIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImR1ZURhdGUiLCJEdWVEYXRlIiwiYmFsYW5jZSIsIkJhbGFuY2UiLCJtZW1vIiwiQ3VzdG9tZXJNZW1vIiwidmFsdWUiLCJQcml2YXRlTm90ZSIsInRvb2xJbXBsZW1lbnRhdGlvbnMiLCJpbnZvaWNlcyIsInJlc3VsdCIsImludm9pY2VzQW5hbHl6ZWQiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/ai/tools.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/quickbooks/api.ts":
/*!***********************************!*\
  !*** ./src/lib/quickbooks/api.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   REALM_ID_KEY: () => (/* binding */ REALM_ID_KEY),\n/* harmony export */   REFRESH_TOKEN_KEY: () => (/* binding */ REFRESH_TOKEN_KEY),\n/* harmony export */   TOKEN_EXPIRY_KEY: () => (/* binding */ TOKEN_EXPIRY_KEY),\n/* harmony export */   TOKEN_KEY: () => (/* binding */ TOKEN_KEY),\n/* harmony export */   checkClientInitialized: () => (/* binding */ checkClientInitialized),\n/* harmony export */   fetchInvoices: () => (/* binding */ fetchInvoices),\n/* harmony export */   fetchInvoicesDirectly: () => (/* binding */ fetchInvoicesDirectly),\n/* harmony export */   fetchInvoicesMicroMethod: () => (/* binding */ fetchInvoicesMicroMethod),\n/* harmony export */   getAuthUrl: () => (/* binding */ getAuthUrl),\n/* harmony export */   getInvoiceById: () => (/* binding */ getInvoiceById),\n/* harmony export */   getRedirectUriForDisplay: () => (/* binding */ getRedirectUriForDisplay),\n/* harmony export */   handleCallback: () => (/* binding */ handleCallback),\n/* harmony export */   initializeQBO: () => (/* binding */ initializeQBO),\n/* harmony export */   isQuickBooksReady: () => (/* binding */ isQuickBooksReady),\n/* harmony export */   manuallyInitializeQuickBooks: () => (/* binding */ manuallyInitializeQuickBooks),\n/* harmony export */   qbo: () => (/* binding */ qbo),\n/* harmony export */   refreshQuickBooksToken: () => (/* binding */ refreshQuickBooksToken),\n/* harmony export */   tokenStore: () => (/* binding */ tokenStore),\n/* harmony export */   updateTokenStoreFromValues: () => (/* binding */ updateTokenStoreFromValues)\n/* harmony export */ });\n/* harmony import */ var intuit_oauth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! intuit-oauth */ \"(ssr)/./node_modules/intuit-oauth/src/OAuthClient.js\");\n/* harmony import */ var intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(intuit_oauth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var node_quickbooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! node-quickbooks */ \"(ssr)/./node_modules/node-quickbooks/index.js\");\n/* harmony import */ var node_quickbooks__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(node_quickbooks__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// First, let's verify QuickBooks constructor is available\nconsole.log(\"QuickBooks constructor check:\", {\n    constructorType: typeof (node_quickbooks__WEBPACK_IMPORTED_MODULE_1___default()),\n    isFunction: typeof (node_quickbooks__WEBPACK_IMPORTED_MODULE_1___default()) === \"function\"\n});\n// Token storage keys\nconst TOKEN_KEY = \"qb_token\";\nconst REALM_ID_KEY = \"qb_realm_id\";\nconst REFRESH_TOKEN_KEY = \"qb_refresh_token\";\nconst TOKEN_EXPIRY_KEY = \"qb_token_expiry\";\n// Debug flag\nconst DEBUG = true;\n// Helper function to log debug information\nconst debugLog = (...args)=>{\n    if (DEBUG) {\n        console.log(\"[QuickBooks API Debug]\", ...args);\n    }\n};\n// Ensure we have a properly formatted base URL with protocol\nconst getBaseUrl = ()=>{\n    const baseUrl = \"http://localhost:3000\" || 0;\n    // Make sure URL has a protocol\n    if (!baseUrl.startsWith(\"http://\") && !baseUrl.startsWith(\"https://\")) {\n        return `http://${baseUrl}`;\n    }\n    // Remove trailing slash if present\n    return baseUrl.replace(/\\/$/, \"\");\n};\nconst getRedirectUri = ()=>{\n    const baseUrl = getBaseUrl();\n    return `${baseUrl}/api/auth/callback`;\n};\n// Initialize OAuth client - use createOAuthClient function consistently\nlet oauthClient;\nlet qbo = null;\n\n// Server-side in-memory token store\n// NOTE: This will be reset on server restarts and between serverless function invocations\nlet tokenStore = {};\n// Keep track of initialization status\nlet isInitialized = false;\n// Store token both in memory and in localStorage (if available)\nconst storeToken = (accessToken, realmId, refreshToken, expiresIn)=>{\n    try {\n        debugLog(\"Storing token\");\n        // Store token in memory for server-side use\n        tokenStore.accessToken = accessToken;\n        tokenStore.realmId = realmId;\n        if (refreshToken) {\n            tokenStore.refreshToken = refreshToken;\n        }\n        if (expiresIn) {\n            const expiryTime = Date.now() + expiresIn * 1000;\n            tokenStore.tokenExpiry = expiryTime;\n        }\n        // Try to store in localStorage for persistence if we're in browser\n        if (false) {}\n        debugLog(\"Token stored successfully\");\n        return true;\n    } catch (error) {\n        console.error(\"Failed to store token:\", error);\n        return false;\n    }\n};\n// Retrieve token from memory or localStorage\nconst getStoredToken = ()=>{\n    try {\n        debugLog(\"Retrieving stored token\");\n        // First try memory store for server-side\n        if (tokenStore.accessToken && tokenStore.realmId) {\n            debugLog(\"Token found in memory\");\n            return {\n                accessToken: tokenStore.accessToken,\n                realmId: tokenStore.realmId,\n                refreshToken: tokenStore.refreshToken,\n                tokenExpiry: tokenStore.tokenExpiry\n            };\n        }\n        // If not in memory, try localStorage if we're in browser\n        if (false) {}\n        debugLog(\"No token found\");\n        return null;\n    } catch (error) {\n        console.error(\"Failed to get stored token:\", error);\n        return null;\n    }\n};\n// Clear all stored tokens\nconst clearTokens = ()=>{\n    debugLog(\"Clearing all tokens\");\n    // Clear memory store\n    tokenStore = {};\n    isInitialized = false;\n    qbo = null;\n    // Clear localStorage if in browser\n    if (false) {}\n};\nfunction initializeQBO(accessToken, realmId, refreshToken, expiresIn) {\n    try {\n        console.log(\"BASIC QuickBooks client initialization\", {\n            accessTokenPresent: !!accessToken,\n            realmIdPresent: !!realmId,\n            clientIdPresent: !!process.env.QUICKBOOKS_CLIENT_ID,\n            clientSecretPresent: !!process.env.QUICKBOOKS_CLIENT_SECRET\n        });\n        // Validate requirements\n        if (!accessToken || !realmId) {\n            console.error(\"ERROR: Missing token or realmId for QuickBooks initialization\");\n            return false;\n        }\n        const clientId = process.env.QUICKBOOKS_CLIENT_ID;\n        const clientSecret = process.env.QUICKBOOKS_CLIENT_SECRET;\n        if (!clientId || !clientSecret) {\n            console.error(\"ERROR: Missing QuickBooks credentials\");\n            return false;\n        }\n        // Store the token first\n        storeToken(accessToken, realmId, refreshToken, expiresIn);\n        // ULTRA SIMPLE CLIENT CREATION - FIRST ATTEMPT\n        try {\n            console.log(\"Creating minimal QuickBooks client - attempt 1\");\n            // Create the client with absolute minimal parameters\n            qbo = new (node_quickbooks__WEBPACK_IMPORTED_MODULE_1___default())(clientId, clientSecret, accessToken, false, realmId);\n            if (!qbo) {\n                console.error(\"QuickBooks constructor returned null - attempt 1\");\n            // We'll try fallback approach below\n            } else {\n                // Set these explicitly to ensure they're available\n                qbo.accessToken = accessToken;\n                qbo.realmId = realmId;\n                console.log(\"QuickBooks client created with basic properties:\", {\n                    hasQbo: !!qbo,\n                    hasToken: !!(qbo && qbo.accessToken),\n                    hasRealmId: !!(qbo && qbo.realmId)\n                });\n                // Set initialization flag\n                isInitialized = true;\n                console.log(\"QuickBooks client initialized successfully - attempt 1\");\n                return true;\n            }\n        } catch (clientError) {\n            console.error(\"ERROR creating QuickBooks client instance - attempt 1:\", clientError);\n        // We'll try fallback approach below\n        }\n        // FALLBACK APPROACH - ATTEMPT 2\n        try {\n            console.log(\"Creating fallback QuickBooks client - attempt 2\");\n            // Try with different parameters - some versions need useSandbox parameter\n            qbo = new (node_quickbooks__WEBPACK_IMPORTED_MODULE_1___default())(clientId, clientSecret, accessToken, true, realmId, {\n                useSandbox: true\n            });\n            if (!qbo) {\n                console.error(\"QuickBooks constructor returned null - attempt 2\");\n                return false;\n            }\n            // Set these explicitly to ensure they're available\n            qbo.accessToken = accessToken;\n            qbo.realmId = realmId;\n            console.log(\"QuickBooks client created with fallback approach\");\n            // Set initialization flag\n            isInitialized = true;\n            console.log(\"QuickBooks client initialized successfully - attempt 2\");\n            return true;\n        } catch (fallbackError) {\n            console.error(\"ERROR creating QuickBooks client with fallback approach:\", fallbackError);\n            return false;\n        }\n    } catch (error) {\n        console.error(\"FATAL ERROR in QuickBooks initialization:\", error);\n        return false;\n    }\n}\n// Check if client is initialized or try to initialize from stored token\nconst checkClientInitialized = ()=>{\n    console.log(\"Checking if QuickBooks client is initialized\");\n    try {\n        // If already initialized in this session, verify the client is still valid\n        if (qbo && isInitialized) {\n            console.log(\"QuickBooks client appears to be initialized, validating...\");\n            // Verify the client has all required properties\n            if (!qbo.accessToken || !qbo.realmId) {\n                console.log(\"Client is missing required properties, will attempt to reinitialize\");\n                isInitialized = false;\n                qbo = null;\n            } else {\n                console.log(\"Client appears valid with required properties\");\n                return true;\n            }\n        } else {\n            console.log(\"QuickBooks client is not initialized, will attempt to initialize from stored token\");\n        }\n        // Try to retrieve token - IMPORTANT: Check both server-side tokenStore and cookies\n        console.log(\"Attempting to retrieve stored token\");\n        const storedToken = getServerSideToken();\n        if (!storedToken || !storedToken.accessToken || !storedToken.realmId) {\n            console.log(\"No valid stored token found\");\n            throw new Error(\"QuickBooks client not initialized. Please connect your QuickBooks account first.\");\n        }\n        console.log(\"Found stored token, initializing QuickBooks client with:\", {\n            hasAccessToken: !!storedToken.accessToken,\n            hasRealmId: !!storedToken.realmId,\n            hasRefreshToken: !!storedToken.refreshToken\n        });\n        // Initialize with current token\n        const initResult = initializeQBO(storedToken.accessToken, storedToken.realmId, storedToken.refreshToken, storedToken.tokenExpiry ? Math.floor((storedToken.tokenExpiry - Date.now()) / 1000) : undefined);\n        if (!initResult) {\n            console.error(\"Failed to initialize QuickBooks client with stored token\");\n            throw new Error(\"Failed to initialize QuickBooks client. Please reconnect your QuickBooks account.\");\n        }\n        console.log(\"Successfully initialized QuickBooks client from stored token\");\n        return true;\n    } catch (error) {\n        console.error(\"Error in checkClientInitialized:\", error);\n        throw error;\n    }\n};\n// Enhanced function to get token from server-side sources (tokenStore and cookies)\nfunction getServerSideToken() {\n    console.log(\"Getting server-side token\");\n    try {\n        // First check memory store\n        if (tokenStore.accessToken && tokenStore.realmId) {\n            console.log(\"Token found in server memory store\");\n            return {\n                accessToken: tokenStore.accessToken,\n                realmId: tokenStore.realmId,\n                refreshToken: tokenStore.refreshToken,\n                tokenExpiry: tokenStore.tokenExpiry\n            };\n        }\n        // Next, try localStorage if we're in a browser environment\n        if (false) {}\n        // No dynamic imports - this causes issues in Next.js\n        // The cookies will be passed by the invoices API route directly\n        console.log(\"No server-side token found in memory or localStorage, check cookies in the API route\");\n        return null;\n    } catch (error) {\n        console.error(\"Error getting server-side token:\", error);\n        return null;\n    }\n}\n// Function to check if QuickBooks is ready for client-side components\nconst isQuickBooksReady = ()=>{\n    if (false) {}\n    return false;\n};\n// Helper function to map QuickBooks invoice format to our app format\nfunction mapQuickBooksInvoice(qbInvoice) {\n    try {\n        // Extract customer info if available\n        const customerName = qbInvoice.CustomerRef?.name || \"Unknown Customer\";\n        // Extract line items\n        const lineItems = (qbInvoice.Line || []).map((line)=>{\n            return {\n                id: line.Id || \"\",\n                description: line.Description || \"\",\n                amount: line.Amount || 0,\n                quantity: line.Quantity || 1,\n                unitPrice: line.SalesItemLineDetail?.UnitPrice || 0\n            };\n        });\n        // Map to our invoice format\n        return {\n            id: qbInvoice.Id || \"\",\n            invoiceNumber: qbInvoice.DocNumber || \"\",\n            customerName: customerName,\n            date: qbInvoice.TxnDate || \"\",\n            dueDate: qbInvoice.DueDate || \"\",\n            amount: qbInvoice.TotalAmt || 0,\n            balance: qbInvoice.Balance || 0,\n            status: qbInvoice.status || \"Unknown\",\n            lineItems: lineItems,\n            currency: qbInvoice.CurrencyRef?.name || \"USD\"\n        };\n    } catch (error) {\n        console.error(\"Error mapping QuickBooks invoice:\", error);\n        // Return a minimal valid invoice to avoid errors\n        return {\n            id: qbInvoice.Id || \"\",\n            invoiceNumber: qbInvoice.DocNumber || \"\",\n            customerName: \"Error parsing invoice\",\n            date: qbInvoice.TxnDate || \"\",\n            dueDate: \"\",\n            amount: 0,\n            balance: 0,\n            status: \"Error\",\n            lineItems: [],\n            currency: \"USD\"\n        };\n    }\n}\n// Function to refresh QuickBooks token\nasync function refreshQuickBooksToken(refreshToken) {\n    try {\n        debugLog(\"Attempting to refresh token\");\n        // Create a fresh OAuth client for token refresh\n        const freshOAuthClient = createOAuthClient();\n        if (!freshOAuthClient) {\n            debugLog(\"Failed to create fresh OAuth client\");\n            return false;\n        }\n        debugLog(\"Created fresh OAuth client for token refresh\");\n        // Try to refresh token\n        const refreshResponse = await freshOAuthClient.refreshUsingToken(refreshToken);\n        if (!refreshResponse) {\n            debugLog(\"No response from token refresh\");\n            return false;\n        }\n        const refreshData = refreshResponse.getJson();\n        debugLog(\"Refresh response received\", {\n            hasAccessToken: !!refreshData.access_token,\n            hasRefreshToken: !!refreshData.refresh_token,\n            expiresIn: refreshData.expires_in\n        });\n        if (!refreshData.access_token) {\n            debugLog(\"No access token in refresh response\");\n            return false;\n        }\n        // Store the refreshed token\n        storeToken(refreshData.access_token, tokenStore.realmId || \"\", refreshData.refresh_token, refreshData.expires_in);\n        // Re-initialize QuickBooks client with new token\n        if (tokenStore.realmId) {\n            const initialized = initializeQBO(refreshData.access_token, tokenStore.realmId, refreshData.refresh_token, refreshData.expires_in ? Date.now() + refreshData.expires_in * 1000 : undefined);\n            debugLog(\"QuickBooks client re-initialized after token refresh:\", {\n                success: initialized\n            });\n            return initialized;\n        }\n        debugLog(\"No realmId available to re-initialize client\");\n        return false;\n    } catch (error) {\n        console.error(\"Error refreshing token:\", error);\n        debugLog(\"Token refresh failed with error\");\n        return false;\n    }\n}\nasync function fetchInvoices() {\n    console.error(\" fetchInvoices: Starting invoice fetch process\");\n    try {\n        debugLog(\"Starting fetchInvoices...\");\n        // First, verify we can get stored tokens - any source is fine (memory, localStorage, cookies)\n        const tokens = getStoredToken();\n        console.error(\" fetchInvoices: Token check result:\", {\n            hasToken: !!tokens?.accessToken,\n            hasRealmId: !!tokens?.realmId,\n            hasRefreshToken: !!tokens?.refreshToken,\n            tokenExpiry: tokens?.tokenExpiry ? new Date(tokens.tokenExpiry).toISOString() : \"none\"\n        });\n        if (!tokens || !tokens.accessToken || !tokens.realmId) {\n            console.error(\" fetchInvoices: No valid tokens found for QuickBooks API call\");\n            throw new Error(\"QuickBooks authentication required. Please connect your account.\");\n        }\n        // Check if token is expired and we need to refresh\n        const now = Date.now();\n        const tokenExpired = tokens.tokenExpiry && now >= tokens.tokenExpiry;\n        console.error(\" fetchInvoices: Token expiry check:\", {\n            now: new Date(now).toISOString(),\n            tokenExpiry: tokens.tokenExpiry ? new Date(tokens.tokenExpiry).toISOString() : \"unknown\",\n            isExpired: tokenExpired\n        });\n        // If token is expired and we have refresh token, try to refresh it\n        if (tokenExpired && tokens.refreshToken) {\n            console.error(\" fetchInvoices: Token expired, attempting to refresh\");\n            try {\n                const refreshed = await refreshQuickBooksToken(tokens.refreshToken);\n                console.error(\" fetchInvoices: Token refresh result:\", {\n                    success: !!refreshed\n                });\n                if (!refreshed) {\n                    console.error(\" fetchInvoices: Token refresh failed\");\n                    throw new Error(\"Failed to refresh QuickBooks authentication. Please reconnect your account.\");\n                }\n            } catch (refreshError) {\n                console.error(\" fetchInvoices: Error refreshing token:\", refreshError);\n                throw new Error(\"QuickBooks authentication expired. Please reconnect your account.\");\n            }\n        }\n        // Initialize the client if not already initialized\n        if (!qbo) {\n            console.error(\" fetchInvoices: QuickBooks client not initialized, attempting initialization\");\n            const initialized = initializeQBO(tokens.accessToken, tokens.realmId, tokens.refreshToken, tokens.tokenExpiry);\n            console.error(\" fetchInvoices: Initialization result:\", {\n                success: initialized\n            });\n            if (!initialized || !qbo) {\n                console.error(\" fetchInvoices: Client initialization failed\");\n                throw new Error(\"Failed to initialize QuickBooks client. Please reconnect your account.\");\n            }\n        } else {\n            console.error(\" fetchInvoices: Using existing QuickBooks client\");\n        }\n        // Double-check that qbo is properly initialized with essential properties\n        if (!qbo.accessToken) {\n            console.error(\" fetchInvoices: QB client missing accessToken, updating\");\n            qbo.accessToken = tokens.accessToken;\n        }\n        if (!qbo.realmId) {\n            console.error(\" fetchInvoices: QB client missing realmId, updating\");\n            qbo.realmId = tokens.realmId;\n        }\n        // Print out everything we can about the client state for debugging\n        console.error(\" fetchInvoices: QuickBooks client state:\", {\n            clientExists: !!qbo,\n            hasAccessToken: !!(qbo && qbo.accessToken),\n            hasRealmId: !!(qbo && qbo.realmId),\n            hasTokenSecret: !!(qbo && qbo.tokenSecret),\n            oauthversion: qbo ? qbo.oauthversion : \"none\",\n            hasRefreshToken: !!(qbo && qbo.refreshToken)\n        });\n        // At this point, qbo should be initialized\n        console.error(\" fetchInvoices: Performing QuickBooks API call for invoices\");\n        return new Promise((resolve, reject)=>{\n            if (!qbo) {\n                console.error(\" fetchInvoices: QB client not available at request time\");\n                return reject(new Error(\"QuickBooks client not initialized\"));\n            }\n            console.error(\" fetchInvoices: Making findInvoices API call\");\n            // Try-catch block around the API call\n            try {\n                // First try: Use a simpler approach with no filters\n                // Many QuickBooks API failures happen due to complex queries\n                console.error(\" fetchInvoices: Trying simple query with no filters\");\n                qbo.findInvoices(\"\", (err, data)=>{\n                    if (err) {\n                        console.error(\" fetchInvoices: Error in simple findInvoices call:\", err);\n                        console.error(\" Error details:\", JSON.stringify(err, null, 2));\n                        // If the simple approach fails, try a backup approach\n                        console.error(\" fetchInvoices: Trying alternative query approach\");\n                        try {\n                            // Try with the older query approach\n                            qbo.findInvoices([\n                                {\n                                    field: \"MetaData.LastUpdatedTime\",\n                                    value: \"2010-01-01T00:00:00\",\n                                    operator: \">\"\n                                }\n                            ], (err2, data2)=>{\n                                if (err2) {\n                                    console.error(\" fetchInvoices: Both query approaches failed:\", err2);\n                                    console.error(\" Error details:\", JSON.stringify(err2, null, 2));\n                                    return reject(err2);\n                                }\n                                processInvoiceResult(data2, resolve, reject);\n                            });\n                        } catch (backupError) {\n                            console.error(\" fetchInvoices: Exception in backup approach:\", backupError);\n                            return reject(backupError);\n                        }\n                    } else {\n                        processInvoiceResult(data, resolve, reject);\n                    }\n                });\n            } catch (apiCallError) {\n                console.error(\" fetchInvoices: Exception during API call execution:\", apiCallError);\n                return reject(new Error(`QuickBooks API call failed: ${apiCallError instanceof Error ? apiCallError.message : \"Unknown error\"}`));\n            }\n        });\n    } catch (error) {\n        console.error(\" fetchInvoices: Error in fetchInvoices:\", error);\n        throw error;\n    }\n}\n// Helper function to process invoice results\nfunction processInvoiceResult(data, resolve, reject) {\n    // Check if data has QueryResponse property with Invoice array\n    if (data && data.QueryResponse && Array.isArray(data.QueryResponse.Invoice)) {\n        const invoices = data.QueryResponse.Invoice;\n        console.error(` fetchInvoices: Successfully found ${invoices.length} invoices`);\n        // If no invoices were found, return empty array rather than error\n        if (invoices.length === 0) {\n            console.error(\" fetchInvoices: No invoices found in QuickBooks account\");\n            return resolve([]);\n        }\n        return resolve(invoices);\n    } else {\n        console.error(\" fetchInvoices: Invalid data structure received from QB API:\", typeof data, data ? Object.keys(data) : \"null\");\n        console.error(\" fetchInvoices: Data dump:\", JSON.stringify(data, null, 2));\n        return reject(new Error(\"Invalid response from QuickBooks API\"));\n    }\n}\nconst getInvoiceById = async (id)=>{\n    try {\n        debugLog(`Fetching invoice by ID: ${id}`);\n        checkClientInitialized();\n        if (!qbo) {\n            debugLog(\"QBO client is null after initialization check\");\n            throw new Error(\"QuickBooks client is not available. Please reconnect your QuickBooks account.\");\n        }\n        const cleanId = id.replace(/^(?:inv-)?#?\\s*/i, \"\").trim();\n        return new Promise((resolve, reject)=>{\n            debugLog(`Calling QuickBooks getInvoice API for ID: ${cleanId}`);\n            qbo.getInvoice(cleanId, (err, invoice)=>{\n                if (err) {\n                    console.error(\"Error fetching invoice from QuickBooks API:\", err);\n                    if (err.code === \"80040408\") {\n                        debugLog(\"QuickBooks initialization error (80040408). Clearing tokens.\");\n                        clearTokens();\n                        reject(new Error(\"QuickBooks connection error. Please reconnect your QuickBooks account.\"));\n                    } else if (err.code === \"270\" || err.message?.includes(\"Token invalid\")) {\n                        debugLog(\"Invalid token error. Clearing tokens.\");\n                        clearTokens();\n                        reject(new Error(\"QuickBooks authentication has expired. Please reconnect your QuickBooks account.\"));\n                    } else if (err.statusCode === 404) {\n                        reject(new Error(`Invoice #${id} not found. Please check the invoice number and try again.`));\n                    } else {\n                        reject(new Error(\"Failed to fetch invoice from QuickBooks. Please check your connection.\"));\n                    }\n                } else {\n                    debugLog(\"Successfully fetched invoice from QuickBooks\");\n                    resolve(mapQuickBooksInvoice(invoice));\n                }\n            });\n        });\n    } catch (error) {\n        console.error(\"Error in getInvoiceById:\", error);\n        throw error;\n    }\n};\n// Initialize the OAuth client\ninitializeOAuthClient();\n// Update the getAuthUrl function to use the new createOAuthClient function\nconst getAuthUrl = ()=>{\n    try {\n        // Log environment variables for debugging (redacting sensitive info)\n        console.log(\"Environment check:\", {\n            hasClientId: !!process.env.QUICKBOOKS_CLIENT_ID,\n            hasClientSecret: !!process.env.QUICKBOOKS_CLIENT_SECRET,\n            redirectUri: getRedirectUri(),\n            baseUrl: \"http://localhost:3000\"\n        });\n        // Create a fresh OAuth client for this request\n        const freshOAuthClient = createOAuthClient();\n        // Generate and log the auth URL\n        const authUrl = freshOAuthClient.authorizeUri({\n            scope: [\n                (intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default().scopes).Accounting,\n                (intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default().scopes).OpenId,\n                (intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default().scopes).Profile,\n                (intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default().scopes).Email\n            ],\n            state: \"teststate\"\n        });\n        console.log(\"Generated auth URL:\", authUrl);\n        return authUrl;\n    } catch (error) {\n        console.error(\"Error in getAuthUrl:\", error);\n        throw error;\n    }\n};\nconst getRedirectUriForDisplay = ()=>{\n    return getRedirectUri();\n};\n// Create a function to get a fresh OAuth client\nfunction getOAuthClient() {\n    // Ensure the OAuth client is initialized\n    if (!oauthClient) {\n        console.log(\"OAuth client not initialized, initializing now\");\n        if (!initializeOAuthClient()) {\n            throw new Error(\"Failed to initialize OAuth client\");\n        }\n    }\n    // Return the initialized client\n    return oauthClient;\n}\nasync function handleCallback(url) {\n    try {\n        // Clear any existing tokens and client\n        clearTokens();\n        qbo = null;\n        isInitialized = false;\n        // Always create a fresh OAuth client for token exchange\n        // This ensures the tokenSecret is properly set for this specific request\n        const freshOAuthClient = createOAuthClient();\n        // Parse the URL to get the realmId from query parameters\n        const urlParams = new URL(url).searchParams;\n        const realmIdFromUrl = urlParams.get(\"realmId\");\n        const code = urlParams.get(\"code\");\n        if (!code) {\n            throw new Error(\"No authorization code received from QuickBooks\");\n        }\n        console.log(\"Creating token with fresh OAuth client\", {\n            code: code,\n            hasRealmId: !!realmIdFromUrl,\n            redirectUri: getRedirectUri(),\n            hasClientId: !!process.env.QUICKBOOKS_CLIENT_ID,\n            hasClientSecret: !!process.env.QUICKBOOKS_CLIENT_SECRET\n        });\n        // Create token with the fresh client\n        if (!process.env.QUICKBOOKS_CLIENT_SECRET) {\n            throw new Error(\"QuickBooks client secret is not configured\");\n        }\n        // Configure token creation options with the tokenSecret explicitly\n        const tokenConfig = {\n            code: code,\n            realmId: realmIdFromUrl,\n            redirectUri: getRedirectUri(),\n            tokenSecret: process.env.QUICKBOOKS_CLIENT_SECRET // Pass tokenSecret explicitly here\n        };\n        console.log(\"Creating token with config:\", {\n            hasCode: !!tokenConfig.code,\n            hasRealmId: !!tokenConfig.realmId,\n            hasRedirectUri: !!tokenConfig.redirectUri,\n            hasTokenSecret: !!tokenConfig.tokenSecret\n        });\n        // Create token with explicit params\n        const authResponse = await freshOAuthClient.createToken(url, tokenConfig);\n        const tokenData = authResponse.getJson();\n        if (!tokenData.access_token) {\n            throw new Error(\"No access token received from QuickBooks\");\n        }\n        // Use realmId from token data if available, otherwise use from URL\n        const realmId = tokenData.realmId || realmIdFromUrl;\n        if (!realmId) {\n            throw new Error(\"No realmId found in response or URL parameters\");\n        }\n        // Store token first\n        const storeResult = storeToken(tokenData.access_token, realmId, tokenData.refresh_token, tokenData.expires_in);\n        if (!storeResult) {\n            throw new Error(\"Failed to store QuickBooks token\");\n        }\n        // Get client ID and secret\n        const clientId = process.env.QUICKBOOKS_CLIENT_ID;\n        const clientSecret = process.env.QUICKBOOKS_CLIENT_SECRET;\n        if (!clientId || !clientSecret) {\n            throw new Error(\"QuickBooks client credentials are not configured\");\n        }\n        // Create the client directly with needed parameters\n        qbo = new (node_quickbooks__WEBPACK_IMPORTED_MODULE_1___default())(clientId, clientSecret, tokenData.access_token, false, realmId, {\n            minorversion: \"65\",\n            debug: true,\n            useSandbox: true,\n            oauthversion: \"2.0\",\n            requestTimeout: 30000\n        });\n        // Explicitly set required properties if they're not set by constructor\n        if (qbo) {\n            // Make sure accessToken is set\n            if (!qbo.accessToken && tokenData.access_token) {\n                qbo.accessToken = tokenData.access_token;\n            }\n            // Make sure realmId is set\n            if (!qbo.realmId && realmId) {\n                qbo.realmId = realmId;\n            }\n        }\n        // Verify client was created and has required properties\n        if (!qbo || !qbo.accessToken || !qbo.realmId) {\n            qbo = null;\n            isInitialized = false;\n            throw new Error(\"QuickBooks client initialization failed - missing required properties\");\n        }\n        // Set initialization status\n        isInitialized = true;\n        console.log(\"QuickBooks client initialized successfully\");\n        return {\n            access_token: tokenData.access_token,\n            realmId: realmId,\n            refresh_token: tokenData.refresh_token,\n            expires_in: tokenData.expires_in\n        };\n    } catch (error) {\n        console.error(\"Error in handleCallback:\", error);\n        // Clear any partial state\n        clearTokens();\n        qbo = null;\n        isInitialized = false;\n        throw error;\n    }\n}\n// Add this function to the api.ts file to directly set tokens\nconst manuallyInitializeQuickBooks = ()=>{\n    try {\n        console.log(\"Manually initializing QuickBooks client\");\n        // Create and store a long-lasting token (30 days)\n        const accessToken = \"MANUAL_TOKEN_\" + Date.now();\n        const realmId = \"MANUAL_REALM_\" + Date.now();\n        const expiresIn = 30 * 24 * 60 * 60; // 30 days in seconds\n        // Call the existing initializeQBO function\n        const result = initializeQBO(accessToken, realmId, accessToken, expiresIn);\n        console.log(\"Manual QuickBooks initialization result:\", result);\n        return result;\n    } catch (error) {\n        console.error(\"Failed to manually initialize QuickBooks:\", error);\n        return false;\n    }\n};\n// Add this function to create a properly configured OAuth client\nfunction createOAuthClient() {\n    try {\n        const clientId = process.env.QUICKBOOKS_CLIENT_ID;\n        const clientSecret = process.env.QUICKBOOKS_CLIENT_SECRET;\n        if (!clientId || !clientSecret) {\n            throw new Error(\"QuickBooks client credentials are not configured\");\n        }\n        // SIMPLIFIED: Create OAuth client with minimal configuration\n        return new (intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default())({\n            clientId,\n            clientSecret,\n            environment: \"sandbox\",\n            redirectUri: getRedirectUri(),\n            tokenSecret: clientSecret // Essential for OAuth flow\n        });\n    } catch (error) {\n        console.error(\"Error creating OAuth client:\", error);\n        throw error;\n    }\n}\n// Initialize the client after the function is defined\nfunction initializeOAuthClient() {\n    try {\n        if (!oauthClient) {\n            console.log(\"Initializing OAuth client\");\n            oauthClient = createOAuthClient();\n            console.log(\"OAuth client initialized successfully\");\n        }\n        return true;\n    } catch (error) {\n        console.error(\"Error initializing OAuth client:\", error);\n        return false;\n    }\n}\n// Add this function to update token store directly from values\nfunction updateTokenStoreFromValues(accessToken, realmId, refreshToken, tokenExpiry) {\n    try {\n        debugLog(\"Directly updating token store with provided values\");\n        // Update the token store directly\n        tokenStore.accessToken = accessToken;\n        tokenStore.realmId = realmId;\n        if (refreshToken) {\n            tokenStore.refreshToken = refreshToken;\n        }\n        if (tokenExpiry) {\n            tokenStore.tokenExpiry = tokenExpiry;\n        }\n        debugLog(\"Token store updated with values:\", {\n            hasToken: !!tokenStore.accessToken,\n            hasRealmId: !!tokenStore.realmId,\n            hasRefreshToken: !!tokenStore.refreshToken,\n            tokenExpiry: tokenStore.tokenExpiry ? new Date(tokenStore.tokenExpiry).toISOString() : \"none\"\n        });\n        return true;\n    } catch (error) {\n        console.error(\"Error updating token store from values:\", error);\n        return false;\n    }\n}\n// Alternative method to fetch invoices with a more direct approach\nasync function fetchInvoicesDirectly() {\n    console.error(\" Starting direct invoice fetch with alternative method\");\n    try {\n        // First, verify we can get stored tokens\n        const tokens = getStoredToken();\n        if (!tokens || !tokens.accessToken || !tokens.realmId) {\n            console.error(\" No valid tokens for direct invoice fetch\");\n            throw new Error(\"QuickBooks authentication required. Please connect your account.\");\n        }\n        // We'll set up a fresh OAuthClient instance specifically for this request\n        const oauthClientForRequest = new (intuit_oauth__WEBPACK_IMPORTED_MODULE_0___default())({\n            clientId: process.env.QUICKBOOKS_CLIENT_ID,\n            clientSecret: process.env.QUICKBOOKS_CLIENT_SECRET,\n            environment: \"sandbox\",\n            redirectUri: getRedirectUri(),\n            logging: true\n        });\n        // Set the tokens on the client\n        oauthClientForRequest.setToken({\n            realmId: tokens.realmId,\n            token_type: \"bearer\",\n            access_token: tokens.accessToken,\n            refresh_token: tokens.refreshToken || \"\",\n            expires_in: tokens.tokenExpiry ? Math.floor((tokens.tokenExpiry - Date.now()) / 1000) : 3600\n        });\n        console.error(\" Attempting direct invoice API call\");\n        // Make a direct API call (not using node-quickbooks)\n        return new Promise((resolve, reject)=>{\n            try {\n                const url = `https://sandbox-quickbooks.api.intuit.com/v3/company/${tokens.realmId}/query`;\n                const headers = {\n                    \"Authorization\": `Bearer ${tokens.accessToken}`,\n                    \"Accept\": \"application/json\",\n                    \"Content-Type\": \"application/text\"\n                };\n                // Use a simpler query to minimize possible format issues\n                const query = \"SELECT * FROM Invoice\";\n                // Make the API call\n                oauthClientForRequest.makeApiCall({\n                    url: url,\n                    method: \"POST\",\n                    headers: headers,\n                    body: query\n                }, (err, response)=>{\n                    if (err) {\n                        console.error(\" Direct API call error:\", err);\n                        return reject(err);\n                    }\n                    try {\n                        // Log the entire response for debugging\n                        console.error(\" Direct API call response:\", response);\n                        if (typeof response === \"string\") {\n                            response = JSON.parse(response);\n                        }\n                        // Extract invoices data\n                        if (response && response.QueryResponse && Array.isArray(response.QueryResponse.Invoice)) {\n                            console.error(` Successfully found ${response.QueryResponse.Invoice.length} invoices directly`);\n                            return resolve(response.QueryResponse.Invoice);\n                        } else {\n                            // If the response doesn't match expected format, try to extract useful data\n                            console.error(\" Unexpected response format:\", response);\n                            // If there's any data that can be used, return it\n                            if (response && typeof response === \"object\") {\n                                if (Array.isArray(response)) {\n                                    return resolve(response);\n                                } else if (response.QueryResponse) {\n                                    return resolve([\n                                        response.QueryResponse\n                                    ]);\n                                }\n                            }\n                            return reject(new Error(\"Invalid response format from QuickBooks API\"));\n                        }\n                    } catch (parseError) {\n                        console.error(\" Error parsing direct API response:\", parseError);\n                        return reject(parseError);\n                    }\n                });\n            } catch (apiError) {\n                console.error(\" Error making direct API call:\", apiError);\n                return reject(apiError);\n            }\n        });\n    } catch (error) {\n        console.error(\" Top-level error in direct invoice fetch:\", error);\n        throw error;\n    }\n}\n// Ultra minimal API call for QuickBooks invoices (third approach)\nasync function fetchInvoicesMicroMethod() {\n    console.error(\" Starting MICRO invoice fetch with bare minimum approach\");\n    try {\n        // Get tokens directly from memory store first for speed\n        const tokens = tokenStore.accessToken && tokenStore.realmId ? {\n            accessToken: tokenStore.accessToken,\n            realmId: tokenStore.realmId\n        } : getStoredToken();\n        if (!tokens || !tokens.accessToken || !tokens.realmId) {\n            console.error(\" No valid tokens for micro invoice fetch\");\n            throw new Error(\"Authentication required\");\n        }\n        console.error(\" Micro method: Using minimal axios-like fetch with bare API call\");\n        // Create a promise with a short timeout\n        return new Promise((resolve, reject)=>{\n            // Create a timeout that's much shorter (15 seconds)\n            const timeoutId = setTimeout(()=>{\n                console.error(\" Micro method: Request timed out after 15 seconds\");\n                reject(new Error(\"Micro method request timed out after 15 seconds\"));\n            }, 15000);\n            try {\n                // Using the fetch API directly instead of the OAuthClient or node-quickbooks\n                const url = `https://sandbox-quickbooks.api.intuit.com/v3/company/${tokens.realmId}/query?query=select%20%2A%20from%20Invoice%20MAXRESULTS%205`;\n                console.error(\" Micro method: Calling API directly at URL:\", url);\n                fetch(url, {\n                    method: \"GET\",\n                    headers: {\n                        \"Authorization\": `Bearer ${tokens.accessToken}`,\n                        \"Accept\": \"application/json\",\n                        \"Content-Type\": \"application/json\"\n                    }\n                }).then((response)=>{\n                    console.error(\" Micro method: Received response with status:\", response.status);\n                    if (!response.ok) {\n                        throw new Error(`API responded with status: ${response.status}`);\n                    }\n                    return response.json();\n                }).then((data)=>{\n                    console.error(\" Micro method: Successfully parsed response JSON\");\n                    clearTimeout(timeoutId);\n                    // Extract invoice data from response\n                    if (data && data.QueryResponse && Array.isArray(data.QueryResponse.Invoice)) {\n                        console.error(` Micro method: Found ${data.QueryResponse.Invoice.length} invoices`);\n                        resolve(data.QueryResponse.Invoice);\n                    } else {\n                        console.error(\" Micro method: Response does not contain invoice array:\", data);\n                        // If we at least got data but not in the expected format, return an empty array\n                        // rather than failing - this helps the UI handle the case better\n                        resolve([]);\n                    }\n                }).catch((error)=>{\n                    console.error(\" Micro method: Fetch error:\", error);\n                    clearTimeout(timeoutId);\n                    reject(error);\n                });\n            } catch (error) {\n                console.error(\" Micro method: Exception during fetch setup:\", error);\n                clearTimeout(timeoutId);\n                reject(error);\n            }\n        });\n    } catch (error) {\n        console.error(\" Micro method: Top-level error:\", error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL3F1aWNrYm9va3MvYXBpLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ3NDO0FBQ0U7QUFFeEMsMERBQTBEO0FBQzFERSxRQUFRQyxHQUFHLENBQUMsaUNBQWlDO0lBQzNDQyxpQkFBaUIsT0FBT0gsd0RBQVVBO0lBQ2xDSSxZQUFZLE9BQU9KLHdEQUFVQSxLQUFLO0FBQ3BDO0FBRUEscUJBQXFCO0FBQ2QsTUFBTUssWUFBWSxXQUFVO0FBQzVCLE1BQU1DLGVBQWUsY0FBYTtBQUNsQyxNQUFNQyxvQkFBb0IsbUJBQWtCO0FBQzVDLE1BQU1DLG1CQUFtQixrQkFBaUI7QUFFakQsYUFBYTtBQUNiLE1BQU1DLFFBQVE7QUFFZCwyQ0FBMkM7QUFDM0MsTUFBTUMsV0FBVyxDQUFDLEdBQUdDO0lBQ25CLElBQUlGLE9BQU87UUFDVFIsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QlM7SUFDM0M7QUFDRjtBQUVBLDZEQUE2RDtBQUM3RCxNQUFNQyxhQUFhO0lBQ2pCLE1BQU1DLFVBQVVDLHVCQUFnQyxJQUFJO0lBRXBELCtCQUErQjtJQUMvQixJQUFJLENBQUNELFFBQVFJLFVBQVUsQ0FBQyxjQUFjLENBQUNKLFFBQVFJLFVBQVUsQ0FBQyxhQUFhO1FBQ3JFLE9BQU8sQ0FBQyxPQUFPLEVBQUVKLFFBQVEsQ0FBQztJQUM1QjtJQUVBLG1DQUFtQztJQUNuQyxPQUFPQSxRQUFRSyxPQUFPLENBQUMsT0FBTztBQUNoQztBQUVBLE1BQU1DLGlCQUFpQjtJQUNyQixNQUFNTixVQUFVRDtJQUNoQixPQUFPLENBQUMsRUFBRUMsUUFBUSxrQkFBa0IsQ0FBQztBQUN2QztBQUVBLHdFQUF3RTtBQUN4RSxJQUFJTztBQUVKLElBQUlDLE1BQXlCO0FBQ2Q7QUFFZixvQ0FBb0M7QUFDcEMsMEZBQTBGO0FBQ25GLElBQUlDLGFBS1AsQ0FBQyxFQUFFO0FBRVAsc0NBQXNDO0FBQ3RDLElBQUlDLGdCQUFnQjtBQUVwQixnRUFBZ0U7QUFDaEUsTUFBTUMsYUFBYSxDQUFDQyxhQUFxQkMsU0FBaUJDLGNBQXVCQztJQUMvRSxJQUFJO1FBQ0ZsQixTQUFTO1FBRVQsNENBQTRDO1FBQzVDWSxXQUFXRyxXQUFXLEdBQUdBO1FBQ3pCSCxXQUFXSSxPQUFPLEdBQUdBO1FBRXJCLElBQUlDLGNBQWM7WUFDaEJMLFdBQVdLLFlBQVksR0FBR0E7UUFDNUI7UUFFQSxJQUFJQyxXQUFXO1lBQ2IsTUFBTUMsYUFBYUMsS0FBS0MsR0FBRyxLQUFNSCxZQUFZO1lBQzdDTixXQUFXVSxXQUFXLEdBQUdIO1FBQzNCO1FBRUEsbUVBQW1FO1FBQ25FLElBQUksS0FBa0IsRUFBYSxFQWdCbEM7UUFFRG5CLFNBQVM7UUFDVCxPQUFPO0lBQ1QsRUFBRSxPQUFPMkIsT0FBTztRQUNkcEMsUUFBUW9DLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU87SUFDVDtBQUNGO0FBRUEsNkNBQTZDO0FBQzdDLE1BQU1DLGlCQUFpQjtJQUNyQixJQUFJO1FBQ0Y1QixTQUFTO1FBRVQseUNBQXlDO1FBQ3pDLElBQUlZLFdBQVdHLFdBQVcsSUFBSUgsV0FBV0ksT0FBTyxFQUFFO1lBQ2hEaEIsU0FBUztZQUNULE9BQU87Z0JBQ0xlLGFBQWFILFdBQVdHLFdBQVc7Z0JBQ25DQyxTQUFTSixXQUFXSSxPQUFPO2dCQUMzQkMsY0FBY0wsV0FBV0ssWUFBWTtnQkFDckNLLGFBQWFWLFdBQVdVLFdBQVc7WUFDckM7UUFDRjtRQUVBLHlEQUF5RDtRQUN6RCxJQUFJLEtBQWtCLEVBQWEsRUE0QmxDO1FBRUR0QixTQUFTO1FBQ1QsT0FBTztJQUNULEVBQUUsT0FBTzJCLE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsK0JBQStCQTtRQUM3QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBLDBCQUEwQjtBQUMxQixNQUFNTSxjQUFjO0lBQ2xCakMsU0FBUztJQUVULHFCQUFxQjtJQUNyQlksYUFBYSxDQUFDO0lBQ2RDLGdCQUFnQjtJQUNoQkYsTUFBTTtJQUVOLG1DQUFtQztJQUNuQyxJQUFJLEtBQWtCLEVBQWEsRUFTbEM7QUFDSDtBQUVPLFNBQVN3QixjQUFjcEIsV0FBbUIsRUFBRUMsT0FBZSxFQUFFQyxZQUFxQixFQUFFQyxTQUFrQjtJQUMzRyxJQUFJO1FBQ0YzQixRQUFRQyxHQUFHLENBQUMsMENBQTBDO1lBQ3BENEMsb0JBQW9CLENBQUMsQ0FBQ3JCO1lBQ3RCc0IsZ0JBQWdCLENBQUMsQ0FBQ3JCO1lBQ2xCc0IsaUJBQWlCLENBQUMsQ0FBQ2xDLFFBQVFDLEdBQUcsQ0FBQ2tDLG9CQUFvQjtZQUNuREMscUJBQXFCLENBQUMsQ0FBQ3BDLFFBQVFDLEdBQUcsQ0FBQ29DLHdCQUF3QjtRQUM3RDtRQUVBLHdCQUF3QjtRQUN4QixJQUFJLENBQUMxQixlQUFlLENBQUNDLFNBQVM7WUFDNUJ6QixRQUFRb0MsS0FBSyxDQUFDO1lBQ2QsT0FBTztRQUNUO1FBRUEsTUFBTWUsV0FBV3RDLFFBQVFDLEdBQUcsQ0FBQ2tDLG9CQUFvQjtRQUNqRCxNQUFNSSxlQUFldkMsUUFBUUMsR0FBRyxDQUFDb0Msd0JBQXdCO1FBRXpELElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxjQUFjO1lBQzlCcEQsUUFBUW9DLEtBQUssQ0FBQztZQUNkLE9BQU87UUFDVDtRQUVBLHdCQUF3QjtRQUN4QmIsV0FBV0MsYUFBYUMsU0FBU0MsY0FBY0M7UUFFL0MsK0NBQStDO1FBQy9DLElBQUk7WUFDRjNCLFFBQVFDLEdBQUcsQ0FBQztZQUVaLHFEQUFxRDtZQUN2RG1CLE1BQU0sSUFBSXJCLHdEQUFVQSxDQUNoQm9ELFVBQ0FDLGNBQ0Y1QixhQUNFLE9BQ0ZDO1lBR0EsSUFBSSxDQUFDTCxLQUFLO2dCQUNScEIsUUFBUW9DLEtBQUssQ0FBQztZQUNkLG9DQUFvQztZQUN0QyxPQUFPO2dCQUNMLG1EQUFtRDtnQkFDbkRoQixJQUFJSSxXQUFXLEdBQUdBO2dCQUNsQkosSUFBSUssT0FBTyxHQUFHQTtnQkFFZHpCLFFBQVFDLEdBQUcsQ0FBQyxvREFBb0Q7b0JBQzlEb0QsUUFBUSxDQUFDLENBQUNqQztvQkFDVmtDLFVBQVUsQ0FBQyxDQUFFbEMsQ0FBQUEsT0FBT0EsSUFBSUksV0FBVztvQkFDbkMrQixZQUFZLENBQUMsQ0FBRW5DLENBQUFBLE9BQU9BLElBQUlLLE9BQU87Z0JBQ25DO2dCQUVBLDBCQUEwQjtnQkFDMUJILGdCQUFnQjtnQkFDaEJ0QixRQUFRQyxHQUFHLENBQUM7Z0JBQ1osT0FBTztZQUNUO1FBQ0YsRUFDQSxPQUFPdUQsYUFBYTtZQUNsQnhELFFBQVFvQyxLQUFLLENBQUMsMERBQTBEb0I7UUFDeEUsb0NBQW9DO1FBQ3RDO1FBRUEsZ0NBQWdDO1FBQ2hDLElBQUk7WUFDRnhELFFBQVFDLEdBQUcsQ0FBQztZQUVaLDBFQUEwRTtZQUMxRW1CLE1BQU0sSUFBSXJCLHdEQUFVQSxDQUNsQm9ELFVBQ0FDLGNBQ0E1QixhQUNBLE1BQ0FDLFNBQ0E7Z0JBQ0VnQyxZQUFZO1lBQ2Q7WUFHRixJQUFJLENBQUNyQyxLQUFLO2dCQUNScEIsUUFBUW9DLEtBQUssQ0FBQztnQkFDZCxPQUFPO1lBQ1Q7WUFFQSxtREFBbUQ7WUFDbkRoQixJQUFJSSxXQUFXLEdBQUdBO1lBQ2xCSixJQUFJSyxPQUFPLEdBQUdBO1lBRWR6QixRQUFRQyxHQUFHLENBQUM7WUFFWiwwQkFBMEI7WUFDNUJxQixnQkFBZ0I7WUFDZHRCLFFBQVFDLEdBQUcsQ0FBQztZQUNkLE9BQU87UUFDUCxFQUNBLE9BQU95RCxlQUFlO1lBQ3BCMUQsUUFBUW9DLEtBQUssQ0FBQyw0REFBNERzQjtZQUMxRSxPQUFPO1FBQ1Q7SUFDRixFQUNBLE9BQU90QixPQUFPO1FBQ1pwQyxRQUFRb0MsS0FBSyxDQUFDLDZDQUE2Q0E7UUFDM0QsT0FBTztJQUNUO0FBQ0Y7QUFFQSx3RUFBd0U7QUFDakUsTUFBTXVCLHlCQUF5QjtJQUNwQzNELFFBQVFDLEdBQUcsQ0FBQztJQUVaLElBQUk7UUFDRiwyRUFBMkU7UUFDM0UsSUFBSW1CLE9BQU9FLGVBQWU7WUFDeEJ0QixRQUFRQyxHQUFHLENBQUM7WUFFWixnREFBZ0Q7WUFDaEQsSUFBSSxDQUFDbUIsSUFBSUksV0FBVyxJQUFJLENBQUNKLElBQUlLLE9BQU8sRUFBRTtnQkFDcEN6QixRQUFRQyxHQUFHLENBQUM7Z0JBQ1pxQixnQkFBZ0I7Z0JBQ2hCRixNQUFNO1lBQ1IsT0FBTztnQkFDTHBCLFFBQVFDLEdBQUcsQ0FBQztnQkFDZCxPQUFPO1lBQ1A7UUFDRixPQUFPO1lBQ0xELFFBQVFDLEdBQUcsQ0FBQztRQUNkO1FBRUEsbUZBQW1GO1FBQ25GRCxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNMkQsY0FBY0M7UUFFcEIsSUFBSSxDQUFDRCxlQUFlLENBQUNBLFlBQVlwQyxXQUFXLElBQUksQ0FBQ29DLFlBQVluQyxPQUFPLEVBQUU7WUFDcEV6QixRQUFRQyxHQUFHLENBQUM7WUFDWixNQUFNLElBQUk2RCxNQUFNO1FBQ2xCO1FBRUE5RCxRQUFRQyxHQUFHLENBQUMsNERBQTREO1lBQ3RFOEQsZ0JBQWdCLENBQUMsQ0FBQ0gsWUFBWXBDLFdBQVc7WUFDekMrQixZQUFZLENBQUMsQ0FBQ0ssWUFBWW5DLE9BQU87WUFDakN1QyxpQkFBaUIsQ0FBQyxDQUFDSixZQUFZbEMsWUFBWTtRQUM3QztRQUVBLGdDQUFnQztRQUNoQyxNQUFNdUMsYUFBYXJCLGNBQ2pCZ0IsWUFBWXBDLFdBQVcsRUFDdkJvQyxZQUFZbkMsT0FBTyxFQUNuQm1DLFlBQVlsQyxZQUFZLEVBQ3hCa0MsWUFBWTdCLFdBQVcsR0FBR21DLEtBQUtDLEtBQUssQ0FBQyxDQUFDUCxZQUFZN0IsV0FBVyxHQUFHRixLQUFLQyxHQUFHLEVBQUMsSUFBSyxRQUFRVztRQUd4RixJQUFJLENBQUN3QixZQUFZO1lBQ2ZqRSxRQUFRb0MsS0FBSyxDQUFDO1lBQ2QsTUFBTSxJQUFJMEIsTUFBTTtRQUNsQjtRQUVBOUQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osT0FBTztJQUNULEVBQUUsT0FBT21DLE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxNQUFNQTtJQUNSO0FBQ0YsRUFBRTtBQUVGLG1GQUFtRjtBQUNuRixTQUFTeUI7SUFDUDdELFFBQVFDLEdBQUcsQ0FBQztJQUVaLElBQUk7UUFDRiwyQkFBMkI7UUFDM0IsSUFBSW9CLFdBQVdHLFdBQVcsSUFBSUgsV0FBV0ksT0FBTyxFQUFFO1lBQ2hEekIsUUFBUUMsR0FBRyxDQUFDO1lBQ1osT0FBTztnQkFDTHVCLGFBQWFILFdBQVdHLFdBQVc7Z0JBQ25DQyxTQUFTSixXQUFXSSxPQUFPO2dCQUMzQkMsY0FBY0wsV0FBV0ssWUFBWTtnQkFDckNLLGFBQWFWLFdBQVdVLFdBQVc7WUFDckM7UUFDRjtRQUVBLDJEQUEyRDtRQUMzRCxJQUFJLEtBQWtCLEVBQWEsRUE2QmxDO1FBRUQscURBQXFEO1FBQ3JELGdFQUFnRTtRQUNoRS9CLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU87SUFDVCxFQUFFLE9BQU9tQyxPQUFPO1FBQ2RwQyxRQUFRb0MsS0FBSyxDQUFDLG9DQUFvQ0E7UUFDbEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxzRUFBc0U7QUFDL0QsTUFBTWdDLG9CQUFvQjtJQUMvQixJQUFJLEtBQWtCLEVBQWEsRUFpQmxDO0lBQ0QsT0FBTztBQUNULEVBQUU7QUFFRixxRUFBcUU7QUFDckUsU0FBU0UscUJBQXFCQyxTQUFjO0lBQzFDLElBQUk7UUFDRixxQ0FBcUM7UUFDckMsTUFBTUMsZUFBZUQsVUFBVUUsV0FBVyxFQUFFQyxRQUFRO1FBRXBELHFCQUFxQjtRQUNyQixNQUFNQyxZQUFZLENBQUNKLFVBQVVLLElBQUksSUFBSSxFQUFFLEVBQUVDLEdBQUcsQ0FBQyxDQUFDQztZQUM1QyxPQUFPO2dCQUNMQyxJQUFJRCxLQUFLRSxFQUFFLElBQUk7Z0JBQ2ZDLGFBQWFILEtBQUtJLFdBQVcsSUFBSTtnQkFDakNDLFFBQVFMLEtBQUtNLE1BQU0sSUFBSTtnQkFDdkJDLFVBQVVQLEtBQUtRLFFBQVEsSUFBSTtnQkFDM0JDLFdBQVdULEtBQUtVLG1CQUFtQixFQUFFQyxhQUFhO1lBQ3BEO1FBQ0Y7UUFFQSw0QkFBNEI7UUFDOUIsT0FBTztZQUNIVixJQUFJUixVQUFVUyxFQUFFLElBQUk7WUFDcEJVLGVBQWVuQixVQUFVb0IsU0FBUyxJQUFJO1lBQ3RDbkIsY0FBY0E7WUFDZG9CLE1BQU1yQixVQUFVc0IsT0FBTyxJQUFJO1lBQzNCQyxTQUFTdkIsVUFBVXdCLE9BQU8sSUFBSTtZQUM5QlosUUFBUVosVUFBVXlCLFFBQVEsSUFBSTtZQUM5QkMsU0FBUzFCLFVBQVUyQixPQUFPLElBQUk7WUFDOUJDLFFBQVE1QixVQUFVNEIsTUFBTSxJQUFJO1lBQzVCeEIsV0FBV0E7WUFDWHlCLFVBQVU3QixVQUFVOEIsV0FBVyxFQUFFM0IsUUFBUTtRQUMzQztJQUNGLEVBQUUsT0FBT3RDLE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMscUNBQXFDQTtRQUNuRCxpREFBaUQ7UUFDakQsT0FBTztZQUNMMkMsSUFBSVIsVUFBVVMsRUFBRSxJQUFJO1lBQ3BCVSxlQUFlbkIsVUFBVW9CLFNBQVMsSUFBSTtZQUN0Q25CLGNBQWM7WUFDZG9CLE1BQU1yQixVQUFVc0IsT0FBTyxJQUFJO1lBQzNCQyxTQUFTO1lBQ1RYLFFBQVE7WUFDUmMsU0FBUztZQUNURSxRQUFRO1lBQ1J4QixXQUFXLEVBQUU7WUFDYnlCLFVBQVU7UUFDWjtJQUNGO0FBQ0Y7QUFFQSx1Q0FBdUM7QUFDaEMsZUFBZUUsdUJBQXVCNUUsWUFBb0I7SUFDL0QsSUFBSTtRQUNGakIsU0FBUztRQUVULGdEQUFnRDtRQUNoRCxNQUFNOEYsbUJBQW1CQztRQUV6QixJQUFJLENBQUNELGtCQUFrQjtZQUNyQjlGLFNBQVM7WUFDVCxPQUFPO1FBQ1Q7UUFFQUEsU0FBUztRQUVULHVCQUF1QjtRQUN2QixNQUFNZ0csa0JBQWtCLE1BQU1GLGlCQUFpQkcsaUJBQWlCLENBQUNoRjtRQUVqRSxJQUFJLENBQUMrRSxpQkFBaUI7WUFDcEJoRyxTQUFTO1lBQ1QsT0FBTztRQUNUO1FBRUEsTUFBTWtHLGNBQWNGLGdCQUFnQkcsT0FBTztRQUMzQ25HLFNBQVMsNkJBQTZCO1lBQ3BDc0QsZ0JBQWdCLENBQUMsQ0FBQzRDLFlBQVlFLFlBQVk7WUFDMUM3QyxpQkFBaUIsQ0FBQyxDQUFDMkMsWUFBWUcsYUFBYTtZQUM1Q25GLFdBQVdnRixZQUFZSSxVQUFVO1FBQ25DO1FBRUEsSUFBSSxDQUFDSixZQUFZRSxZQUFZLEVBQUU7WUFDN0JwRyxTQUFTO1lBQ1QsT0FBTztRQUNUO1FBRUEsNEJBQTRCO1FBQzVCYyxXQUNFb0YsWUFBWUUsWUFBWSxFQUN4QnhGLFdBQVdJLE9BQU8sSUFBSSxJQUN0QmtGLFlBQVlHLGFBQWEsRUFDekJILFlBQVlJLFVBQVU7UUFHeEIsaURBQWlEO1FBQ2pELElBQUkxRixXQUFXSSxPQUFPLEVBQUU7WUFDdEIsTUFBTXVGLGNBQWNwRSxjQUNsQitELFlBQVlFLFlBQVksRUFDeEJ4RixXQUFXSSxPQUFPLEVBQ2xCa0YsWUFBWUcsYUFBYSxFQUN6QkgsWUFBWUksVUFBVSxHQUFHbEYsS0FBS0MsR0FBRyxLQUFNNkUsWUFBWUksVUFBVSxHQUFHLE9BQVF0RTtZQUcxRWhDLFNBQVMseURBQXlEO2dCQUFFd0csU0FBU0Q7WUFBWTtZQUN6RixPQUFPQTtRQUNUO1FBRUF2RyxTQUFTO1FBQ1QsT0FBTztJQUNULEVBQUUsT0FBTzJCLE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QzNCLFNBQVM7UUFDVCxPQUFPO0lBQ1Q7QUFDRjtBQUVPLGVBQWV5RztJQUNwQmxILFFBQVFvQyxLQUFLLENBQUM7SUFDZCxJQUFJO1FBQ0YzQixTQUFTO1FBRVQsOEZBQThGO1FBQzlGLE1BQU0wRyxTQUFTOUU7UUFFZnJDLFFBQVFvQyxLQUFLLENBQUMsd0NBQXdDO1lBQ3BEa0IsVUFBVSxDQUFDLENBQUM2RCxRQUFRM0Y7WUFDcEIrQixZQUFZLENBQUMsQ0FBQzRELFFBQVExRjtZQUN0QnVDLGlCQUFpQixDQUFDLENBQUNtRCxRQUFRekY7WUFDM0JLLGFBQWFvRixRQUFRcEYsY0FBYyxJQUFJRixLQUFLc0YsT0FBT3BGLFdBQVcsRUFBRXFGLFdBQVcsS0FBSztRQUNsRjtRQUVBLElBQUksQ0FBQ0QsVUFBVSxDQUFDQSxPQUFPM0YsV0FBVyxJQUFJLENBQUMyRixPQUFPMUYsT0FBTyxFQUFFO1lBQ3JEekIsUUFBUW9DLEtBQUssQ0FBQztZQUNkLE1BQU0sSUFBSTBCLE1BQU07UUFDbEI7UUFFQSxtREFBbUQ7UUFDbkQsTUFBTWhDLE1BQU1ELEtBQUtDLEdBQUc7UUFDcEIsTUFBTXVGLGVBQWVGLE9BQU9wRixXQUFXLElBQUlELE9BQU9xRixPQUFPcEYsV0FBVztRQUVwRS9CLFFBQVFvQyxLQUFLLENBQUMsd0NBQXdDO1lBQ3BETixLQUFLLElBQUlELEtBQUtDLEtBQUtzRixXQUFXO1lBQzlCckYsYUFBYW9GLE9BQU9wRixXQUFXLEdBQUcsSUFBSUYsS0FBS3NGLE9BQU9wRixXQUFXLEVBQUVxRixXQUFXLEtBQUs7WUFDL0VFLFdBQVdEO1FBQ2I7UUFFQSxtRUFBbUU7UUFDbkUsSUFBSUEsZ0JBQWdCRixPQUFPekYsWUFBWSxFQUFFO1lBQ3ZDMUIsUUFBUW9DLEtBQUssQ0FBQztZQUVkLElBQUk7Z0JBQ0YsTUFBTW1GLFlBQVksTUFBTWpCLHVCQUF1QmEsT0FBT3pGLFlBQVk7Z0JBQ2xFMUIsUUFBUW9DLEtBQUssQ0FBQywwQ0FBMEM7b0JBQUU2RSxTQUFTLENBQUMsQ0FBQ007Z0JBQVU7Z0JBRS9FLElBQUksQ0FBQ0EsV0FBVztvQkFDZHZILFFBQVFvQyxLQUFLLENBQUM7b0JBQ2QsTUFBTSxJQUFJMEIsTUFBTTtnQkFDbEI7WUFDRixFQUFFLE9BQU8wRCxjQUFjO2dCQUNyQnhILFFBQVFvQyxLQUFLLENBQUMsNENBQTRDb0Y7Z0JBQzFELE1BQU0sSUFBSTFELE1BQU07WUFDbEI7UUFDRjtRQUVBLG1EQUFtRDtRQUNuRCxJQUFJLENBQUMxQyxLQUFLO1lBQ1JwQixRQUFRb0MsS0FBSyxDQUFDO1lBQ2QsTUFBTTRFLGNBQWNwRSxjQUFjdUUsT0FBTzNGLFdBQVcsRUFBRTJGLE9BQU8xRixPQUFPLEVBQUUwRixPQUFPekYsWUFBWSxFQUFFeUYsT0FBT3BGLFdBQVc7WUFFN0cvQixRQUFRb0MsS0FBSyxDQUFDLDJDQUEyQztnQkFBRTZFLFNBQVNEO1lBQVk7WUFFaEYsSUFBSSxDQUFDQSxlQUFlLENBQUM1RixLQUFLO2dCQUN4QnBCLFFBQVFvQyxLQUFLLENBQUM7Z0JBQ2QsTUFBTSxJQUFJMEIsTUFBTTtZQUNsQjtRQUNGLE9BQU87WUFDTDlELFFBQVFvQyxLQUFLLENBQUM7UUFDaEI7UUFFQSwwRUFBMEU7UUFDMUUsSUFBSSxDQUFDaEIsSUFBSUksV0FBVyxFQUFFO1lBQ3BCeEIsUUFBUW9DLEtBQUssQ0FBQztZQUNkaEIsSUFBSUksV0FBVyxHQUFHMkYsT0FBTzNGLFdBQVc7UUFDdEM7UUFFQSxJQUFJLENBQUNKLElBQUlLLE9BQU8sRUFBRTtZQUNoQnpCLFFBQVFvQyxLQUFLLENBQUM7WUFDZGhCLElBQUlLLE9BQU8sR0FBRzBGLE9BQU8xRixPQUFPO1FBQzlCO1FBRUEsbUVBQW1FO1FBQ25FekIsUUFBUW9DLEtBQUssQ0FBQyw2Q0FBNkM7WUFDekRxRixjQUFjLENBQUMsQ0FBQ3JHO1lBQ2hCMkMsZ0JBQWdCLENBQUMsQ0FBRTNDLENBQUFBLE9BQU9BLElBQUlJLFdBQVc7WUFDekMrQixZQUFZLENBQUMsQ0FBRW5DLENBQUFBLE9BQU9BLElBQUlLLE9BQU87WUFDakNpRyxnQkFBZ0IsQ0FBQyxDQUFFdEcsQ0FBQUEsT0FBTyxJQUFhdUcsV0FBVztZQUNsREMsY0FBY3hHLE1BQU0sSUFBYXdHLFlBQVksR0FBRztZQUNoRDVELGlCQUFpQixDQUFDLENBQUU1QyxDQUFBQSxPQUFPLElBQWFNLFlBQVk7UUFDdEQ7UUFFQSwyQ0FBMkM7UUFDM0MxQixRQUFRb0MsS0FBSyxDQUFDO1FBRWQsT0FBTyxJQUFJeUYsUUFBUSxDQUFDQyxTQUFTQztZQUMzQixJQUFJLENBQUMzRyxLQUFLO2dCQUNScEIsUUFBUW9DLEtBQUssQ0FBQztnQkFDZCxPQUFPMkYsT0FBTyxJQUFJakUsTUFBTTtZQUMxQjtZQUVBOUQsUUFBUW9DLEtBQUssQ0FBQztZQUVkLHNDQUFzQztZQUN0QyxJQUFJO2dCQUNGLG9EQUFvRDtnQkFDcEQsNkRBQTZEO2dCQUM3RHBDLFFBQVFvQyxLQUFLLENBQUM7Z0JBRWRoQixJQUFJNEcsWUFBWSxDQUFDLElBQUksQ0FBQ0MsS0FBVUM7b0JBQ2hDLElBQUlELEtBQUs7d0JBQ0xqSSxRQUFRb0MsS0FBSyxDQUFDLHVEQUF1RDZGO3dCQUNyRWpJLFFBQVFvQyxLQUFLLENBQUMsb0JBQW9CK0YsS0FBS0MsU0FBUyxDQUFDSCxLQUFLLE1BQU07d0JBRTVELHNEQUFzRDt3QkFDdERqSSxRQUFRb0MsS0FBSyxDQUFDO3dCQUNkLElBQUk7NEJBQ0Ysb0NBQW9DOzRCQUNwQ2hCLElBQUk0RyxZQUFZLENBQUM7Z0NBQ2Y7b0NBQUVLLE9BQU87b0NBQTRCQyxPQUFPO29DQUF1QkMsVUFBVTtnQ0FBSTs2QkFDbEYsRUFBRSxDQUFDQyxNQUFXQztnQ0FDYixJQUFJRCxNQUFNO29DQUNSeEksUUFBUW9DLEtBQUssQ0FBQyxrREFBa0RvRztvQ0FDaEV4SSxRQUFRb0MsS0FBSyxDQUFDLG9CQUFvQitGLEtBQUtDLFNBQVMsQ0FBQ0ksTUFBTSxNQUFNO29DQUM3RCxPQUFPVCxPQUFPUztnQ0FDaEI7Z0NBRUFFLHFCQUFxQkQsT0FBT1gsU0FBU0M7NEJBQ3ZDO3dCQUNGLEVBQUUsT0FBT1ksYUFBYTs0QkFDcEIzSSxRQUFRb0MsS0FBSyxDQUFDLGtEQUFrRHVHOzRCQUNoRSxPQUFPWixPQUFPWTt3QkFDaEI7b0JBQ0YsT0FBTzt3QkFDTEQscUJBQXFCUixNQUFNSixTQUFTQztvQkFDdEM7Z0JBQ0Y7WUFDRixFQUFFLE9BQU9hLGNBQWM7Z0JBQ3JCNUksUUFBUW9DLEtBQUssQ0FBQyx5REFBeUR3RztnQkFDdkUsT0FBT2IsT0FBTyxJQUFJakUsTUFBTSxDQUFDLDRCQUE0QixFQUFFOEUsd0JBQXdCOUUsUUFBUThFLGFBQWFDLE9BQU8sR0FBRyxnQkFBZ0IsQ0FBQztZQUNqSTtRQUNGO0lBQ0YsRUFBRSxPQUFPekcsT0FBTztRQUNkcEMsUUFBUW9DLEtBQUssQ0FBQyw0Q0FBNENBO1FBQzFELE1BQU1BO0lBQ1I7QUFDRjtBQUVBLDZDQUE2QztBQUM3QyxTQUFTc0cscUJBQXFCUixJQUFTLEVBQUVKLE9BQWlCLEVBQUVDLE1BQWdCO0lBQzFFLDhEQUE4RDtJQUM5RCxJQUFJRyxRQUFRQSxLQUFLWSxhQUFhLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ2QsS0FBS1ksYUFBYSxDQUFDRyxPQUFPLEdBQUc7UUFDM0UsTUFBTUMsV0FBV2hCLEtBQUtZLGFBQWEsQ0FBQ0csT0FBTztRQUMzQ2pKLFFBQVFvQyxLQUFLLENBQUMsQ0FBQyxvQ0FBb0MsRUFBRThHLFNBQVNDLE1BQU0sQ0FBQyxTQUFTLENBQUM7UUFFL0Usa0VBQWtFO1FBQ2xFLElBQUlELFNBQVNDLE1BQU0sS0FBSyxHQUFHO1lBQ3pCbkosUUFBUW9DLEtBQUssQ0FBQztZQUNkLE9BQU8wRixRQUFRLEVBQUU7UUFDbkI7UUFFQSxPQUFPQSxRQUFRb0I7SUFDakIsT0FBTztRQUNMbEosUUFBUW9DLEtBQUssQ0FBQyxpRUFBaUUsT0FBTzhGLE1BQU1BLE9BQU9rQixPQUFPQyxJQUFJLENBQUNuQixRQUFRO1FBQ3ZIbEksUUFBUW9DLEtBQUssQ0FBQywrQkFBK0IrRixLQUFLQyxTQUFTLENBQUNGLE1BQU0sTUFBTTtRQUN4RSxPQUFPSCxPQUFPLElBQUlqRSxNQUFNO0lBQzFCO0FBQ0Y7QUFFTyxNQUFNd0YsaUJBQWlCLE9BQU92RTtJQUNuQyxJQUFJO1FBQ0Z0RSxTQUFTLENBQUMsd0JBQXdCLEVBQUVzRSxHQUFHLENBQUM7UUFDeENwQjtRQUVBLElBQUksQ0FBQ3ZDLEtBQUs7WUFDUlgsU0FBUztZQUNULE1BQU0sSUFBSXFELE1BQU07UUFDbEI7UUFFQSxNQUFNeUYsVUFBVXhFLEdBQUc5RCxPQUFPLENBQUMsb0JBQW9CLElBQUl1SSxJQUFJO1FBRXZELE9BQU8sSUFBSTNCLFFBQVEsQ0FBQ0MsU0FBU0M7WUFDM0J0SCxTQUFTLENBQUMsMENBQTBDLEVBQUU4SSxRQUFRLENBQUM7WUFDL0RuSSxJQUFLcUksVUFBVSxDQUFDRixTQUFTLENBQUN0QixLQUFVeUI7Z0JBQ2xDLElBQUl6QixLQUFLO29CQUNQakksUUFBUW9DLEtBQUssQ0FBQywrQ0FBK0M2RjtvQkFFN0QsSUFBSUEsSUFBSTBCLElBQUksS0FBSyxZQUFZO3dCQUMzQmxKLFNBQVM7d0JBQ1RpQzt3QkFDQXFGLE9BQU8sSUFBSWpFLE1BQU07b0JBQ25CLE9BQU8sSUFBSW1FLElBQUkwQixJQUFJLEtBQUssU0FBUzFCLElBQUlZLE9BQU8sRUFBRWUsU0FBUyxrQkFBa0I7d0JBQ3ZFbkosU0FBUzt3QkFDVGlDO3dCQUNBcUYsT0FBTyxJQUFJakUsTUFBTTtvQkFDbkIsT0FBTyxJQUFJbUUsSUFBSTRCLFVBQVUsS0FBSyxLQUFLO3dCQUNqQzlCLE9BQU8sSUFBSWpFLE1BQU0sQ0FBQyxTQUFTLEVBQUVpQixHQUFHLDBEQUEwRCxDQUFDO29CQUM3RixPQUFPO3dCQUNMZ0QsT0FBTyxJQUFJakUsTUFBTTtvQkFDbkI7Z0JBQ0YsT0FBTztvQkFDTHJELFNBQVM7b0JBQ1RxSCxRQUFReEQscUJBQXFCb0Y7Z0JBQy9CO1lBQ0Y7UUFDRjtJQUNGLEVBQUUsT0FBT3RILE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxNQUFNQTtJQUNSO0FBQ0YsRUFBRTtBQUVGLDhCQUE4QjtBQUM5QjBIO0FBRUEsMkVBQTJFO0FBQ3BFLE1BQU1DLGFBQWE7SUFDeEIsSUFBSTtRQUNGLHFFQUFxRTtRQUNyRS9KLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0I7WUFDaEMrSixhQUFhLENBQUMsQ0FBQ25KLFFBQVFDLEdBQUcsQ0FBQ2tDLG9CQUFvQjtZQUMvQ2lILGlCQUFpQixDQUFDLENBQUNwSixRQUFRQyxHQUFHLENBQUNvQyx3QkFBd0I7WUFDdkRnSCxhQUFhaEo7WUFDYk4sU0FBU0MsdUJBQWdDO1FBQzNDO1FBRUEsK0NBQStDO1FBQy9DLE1BQU0wRixtQkFBbUJDO1FBRXpCLGdDQUFnQztRQUNoQyxNQUFNMkQsVUFBVTVELGlCQUFpQjZELFlBQVksQ0FBQztZQUM1Q0MsT0FBTztnQkFDTHZLLDREQUFrQixDQUFDeUssVUFBVTtnQkFDN0J6Syw0REFBa0IsQ0FBQzBLLE1BQU07Z0JBQ3pCMUssNERBQWtCLENBQUMySyxPQUFPO2dCQUMxQjNLLDREQUFrQixDQUFDNEssS0FBSzthQUN6QjtZQUNEQyxPQUFPO1FBQ1Q7UUFFQTNLLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJrSztRQUNuQyxPQUFPQTtJQUNULEVBQUUsT0FBTy9ILE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxNQUFNQTtJQUNSO0FBQ0YsRUFBRTtBQUVLLE1BQU13SSwyQkFBMkI7SUFDdEMsT0FBTzFKO0FBQ1QsRUFBRTtBQUVGLGdEQUFnRDtBQUNoRCxTQUFTMko7SUFDUCx5Q0FBeUM7SUFDekMsSUFBSSxDQUFDMUosYUFBYTtRQUNoQm5CLFFBQVFDLEdBQUcsQ0FBQztRQUNaLElBQUksQ0FBQzZKLHlCQUF5QjtZQUM1QixNQUFNLElBQUloRyxNQUFNO1FBQ2xCO0lBQ0Y7SUFFQSxnQ0FBZ0M7SUFDaEMsT0FBTzNDO0FBQ1Q7QUFFTyxlQUFlMkosZUFBZUMsR0FBVztJQUM5QyxJQUFJO1FBQ0YsdUNBQXVDO1FBQ3ZDckk7UUFDQXRCLE1BQU07UUFDTkUsZ0JBQWdCO1FBRWhCLHdEQUF3RDtRQUN4RCx5RUFBeUU7UUFDekUsTUFBTWlGLG1CQUFtQkM7UUFFekIseURBQXlEO1FBQ3pELE1BQU13RSxZQUFZLElBQUlDLElBQUlGLEtBQUtHLFlBQVk7UUFDM0MsTUFBTUMsaUJBQWlCSCxVQUFVSSxHQUFHLENBQUM7UUFDckMsTUFBTXpCLE9BQU9xQixVQUFVSSxHQUFHLENBQUM7UUFFM0IsSUFBSSxDQUFDekIsTUFBTTtZQUNULE1BQU0sSUFBSTdGLE1BQU07UUFDbEI7UUFFQTlELFFBQVFDLEdBQUcsQ0FBQywwQ0FBMEM7WUFDcEQwSixNQUFNQTtZQUNOcEcsWUFBWSxDQUFDLENBQUM0SDtZQUNkakIsYUFBYWhKO1lBQ2I4SSxhQUFhLENBQUMsQ0FBQ25KLFFBQVFDLEdBQUcsQ0FBQ2tDLG9CQUFvQjtZQUMvQ2lILGlCQUFpQixDQUFDLENBQUNwSixRQUFRQyxHQUFHLENBQUNvQyx3QkFBd0I7UUFDekQ7UUFFQSxxQ0FBcUM7UUFDckMsSUFBSSxDQUFDckMsUUFBUUMsR0FBRyxDQUFDb0Msd0JBQXdCLEVBQUU7WUFDekMsTUFBTSxJQUFJWSxNQUFNO1FBQ2xCO1FBRUEsbUVBQW1FO1FBQ25FLE1BQU11SCxjQUFjO1lBQ2xCMUIsTUFBTUE7WUFDTmxJLFNBQVMwSjtZQUNUakIsYUFBYWhKO1lBQ2J5RyxhQUFhOUcsUUFBUUMsR0FBRyxDQUFDb0Msd0JBQXdCLENBQUMsbUNBQW1DO1FBQ3ZGO1FBRUFsRCxRQUFRQyxHQUFHLENBQUMsK0JBQStCO1lBQ3pDcUwsU0FBUyxDQUFDLENBQUNELFlBQVkxQixJQUFJO1lBQzNCcEcsWUFBWSxDQUFDLENBQUM4SCxZQUFZNUosT0FBTztZQUNqQzhKLGdCQUFnQixDQUFDLENBQUNGLFlBQVluQixXQUFXO1lBQ3pDeEMsZ0JBQWdCLENBQUMsQ0FBQzJELFlBQVkxRCxXQUFXO1FBQzNDO1FBRUEsb0NBQW9DO1FBQ3BDLE1BQU02RCxlQUFlLE1BQU1qRixpQkFBaUJrRixXQUFXLENBQUNWLEtBQUtNO1FBQzdELE1BQU1LLFlBQVlGLGFBQWE1RSxPQUFPO1FBRXRDLElBQUksQ0FBQzhFLFVBQVU3RSxZQUFZLEVBQUU7WUFDM0IsTUFBTSxJQUFJL0MsTUFBTTtRQUNsQjtRQUVBLG1FQUFtRTtRQUNuRSxNQUFNckMsVUFBVWlLLFVBQVVqSyxPQUFPLElBQUkwSjtRQUVyQyxJQUFJLENBQUMxSixTQUFTO1lBQ1osTUFBTSxJQUFJcUMsTUFBTTtRQUNsQjtRQUVBLG9CQUFvQjtRQUNwQixNQUFNNkgsY0FBY3BLLFdBQ2xCbUssVUFBVTdFLFlBQVksRUFDdEJwRixTQUNBaUssVUFBVTVFLGFBQWEsRUFDdkI0RSxVQUFVM0UsVUFBVTtRQUd0QixJQUFJLENBQUM0RSxhQUFhO1lBQ2hCLE1BQU0sSUFBSTdILE1BQU07UUFDbEI7UUFFQSwyQkFBMkI7UUFDM0IsTUFBTVgsV0FBV3RDLFFBQVFDLEdBQUcsQ0FBQ2tDLG9CQUFvQjtRQUNqRCxNQUFNSSxlQUFldkMsUUFBUUMsR0FBRyxDQUFDb0Msd0JBQXdCO1FBRXpELElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxjQUFjO1lBQzlCLE1BQU0sSUFBSVUsTUFBTTtRQUNsQjtRQUVBLG9EQUFvRDtRQUNwRDFDLE1BQU0sSUFBSXJCLHdEQUFVQSxDQUNsQm9ELFVBQ0FDLGNBQ0FzSSxVQUFVN0UsWUFBWSxFQUN0QixPQUNBcEYsU0FDQTtZQUNFbUssY0FBYztZQUNkQyxPQUFPO1lBQ1BwSSxZQUFZO1lBQ1ptRSxjQUFjO1lBQ2RrRSxnQkFBZ0I7UUFDbEI7UUFHRix1RUFBdUU7UUFDdkUsSUFBSTFLLEtBQUs7WUFDUCwrQkFBK0I7WUFDL0IsSUFBSSxDQUFDQSxJQUFJSSxXQUFXLElBQUlrSyxVQUFVN0UsWUFBWSxFQUFFO2dCQUM5Q3pGLElBQUlJLFdBQVcsR0FBR2tLLFVBQVU3RSxZQUFZO1lBQzFDO1lBRUEsMkJBQTJCO1lBQzNCLElBQUksQ0FBQ3pGLElBQUlLLE9BQU8sSUFBSUEsU0FBUztnQkFDM0JMLElBQUlLLE9BQU8sR0FBR0E7WUFDaEI7UUFDRjtRQUVBLHdEQUF3RDtRQUN4RCxJQUFJLENBQUNMLE9BQU8sQ0FBQ0EsSUFBSUksV0FBVyxJQUFJLENBQUNKLElBQUlLLE9BQU8sRUFBRTtZQUM1Q0wsTUFBTTtZQUNORSxnQkFBZ0I7WUFDaEIsTUFBTSxJQUFJd0MsTUFBTTtRQUNsQjtRQUVBLDRCQUE0QjtRQUM1QnhDLGdCQUFnQjtRQUNoQnRCLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE9BQU87WUFDTDRHLGNBQWM2RSxVQUFVN0UsWUFBWTtZQUNwQ3BGLFNBQVNBO1lBQ1RxRixlQUFlNEUsVUFBVTVFLGFBQWE7WUFDdENDLFlBQVkyRSxVQUFVM0UsVUFBVTtRQUNsQztJQUNGLEVBQUUsT0FBTzNFLE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQywwQkFBMEI7UUFDMUJNO1FBQ0F0QixNQUFNO1FBQ05FLGdCQUFnQjtRQUNoQixNQUFNYztJQUNSO0FBQ0Y7QUFFQSw4REFBOEQ7QUFDdkQsTUFBTTJKLCtCQUErQjtJQUMxQyxJQUFJO1FBQ0YvTCxRQUFRQyxHQUFHLENBQUM7UUFFWixrREFBa0Q7UUFDbEQsTUFBTXVCLGNBQWMsa0JBQWtCSyxLQUFLQyxHQUFHO1FBQzlDLE1BQU1MLFVBQVUsa0JBQWtCSSxLQUFLQyxHQUFHO1FBQzFDLE1BQU1ILFlBQVksS0FBSyxLQUFLLEtBQUssSUFBSSxxQkFBcUI7UUFFMUQsMkNBQTJDO1FBQzNDLE1BQU1xSyxTQUFTcEosY0FBY3BCLGFBQWFDLFNBQVNELGFBQWFHO1FBRWhFM0IsUUFBUUMsR0FBRyxDQUFDLDRDQUE0QytMO1FBQ3hELE9BQU9BO0lBQ1QsRUFBRSxPQUFPNUosT0FBTztRQUNkcEMsUUFBUW9DLEtBQUssQ0FBQyw2Q0FBNkNBO1FBQzNELE9BQU87SUFDVDtBQUNGLEVBQUU7QUFFRixpRUFBaUU7QUFDakUsU0FBU29FO0lBQ1AsSUFBSTtRQUNGLE1BQU1yRCxXQUFXdEMsUUFBUUMsR0FBRyxDQUFDa0Msb0JBQW9CO1FBQ2pELE1BQU1JLGVBQWV2QyxRQUFRQyxHQUFHLENBQUNvQyx3QkFBd0I7UUFFekQsSUFBSSxDQUFDQyxZQUFZLENBQUNDLGNBQWM7WUFDOUIsTUFBTSxJQUFJVSxNQUFNO1FBQ2xCO1FBRUEsNkRBQTZEO1FBQzdELE9BQU8sSUFBSWhFLHFEQUFXQSxDQUFDO1lBQ3JCcUQ7WUFDQUM7WUFDQTZJLGFBQWE7WUFDYi9CLGFBQWFoSjtZQUNieUcsYUFBYXZFLGFBQWEsMkJBQTJCO1FBQ3ZEO0lBQ0YsRUFBRSxPQUFPaEIsT0FBTztRQUNkcEMsUUFBUW9DLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLHNEQUFzRDtBQUN0RCxTQUFTMEg7SUFDUCxJQUFJO1FBQ0YsSUFBSSxDQUFDM0ksYUFBYTtZQUNoQm5CLFFBQVFDLEdBQUcsQ0FBQztZQUNaa0IsY0FBY3FGO1lBQ2R4RyxRQUFRQyxHQUFHLENBQUM7UUFDZDtRQUNBLE9BQU87SUFDVCxFQUFFLE9BQU9tQyxPQUFPO1FBQ2RwQyxRQUFRb0MsS0FBSyxDQUFDLG9DQUFvQ0E7UUFDbEQsT0FBTztJQUNUO0FBQ0Y7QUFFQSwrREFBK0Q7QUFDeEQsU0FBUzhKLDJCQUNkMUssV0FBbUIsRUFDbkJDLE9BQWUsRUFDZkMsWUFBcUIsRUFDckJLLFdBQW9CO0lBRXBCLElBQUk7UUFDRnRCLFNBQVM7UUFFVCxrQ0FBa0M7UUFDbENZLFdBQVdHLFdBQVcsR0FBR0E7UUFDekJILFdBQVdJLE9BQU8sR0FBR0E7UUFFckIsSUFBSUMsY0FBYztZQUNoQkwsV0FBV0ssWUFBWSxHQUFHQTtRQUM1QjtRQUVBLElBQUlLLGFBQWE7WUFDZlYsV0FBV1UsV0FBVyxHQUFHQTtRQUMzQjtRQUVBdEIsU0FBUyxvQ0FBb0M7WUFDM0M2QyxVQUFVLENBQUMsQ0FBQ2pDLFdBQVdHLFdBQVc7WUFDbEMrQixZQUFZLENBQUMsQ0FBQ2xDLFdBQVdJLE9BQU87WUFDaEN1QyxpQkFBaUIsQ0FBQyxDQUFDM0MsV0FBV0ssWUFBWTtZQUMxQ0ssYUFBYVYsV0FBV1UsV0FBVyxHQUFHLElBQUlGLEtBQUtSLFdBQVdVLFdBQVcsRUFBRXFGLFdBQVcsS0FBSztRQUN6RjtRQUVBLE9BQU87SUFDVCxFQUFFLE9BQU9oRixPQUFPO1FBQ2RwQyxRQUFRb0MsS0FBSyxDQUFDLDJDQUEyQ0E7UUFDekQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxtRUFBbUU7QUFDNUQsZUFBZStKO0lBQ3BCbk0sUUFBUW9DLEtBQUssQ0FBQztJQUVkLElBQUk7UUFDRix5Q0FBeUM7UUFDekMsTUFBTStFLFNBQVM5RTtRQUVmLElBQUksQ0FBQzhFLFVBQVUsQ0FBQ0EsT0FBTzNGLFdBQVcsSUFBSSxDQUFDMkYsT0FBTzFGLE9BQU8sRUFBRTtZQUNyRHpCLFFBQVFvQyxLQUFLLENBQUM7WUFDZCxNQUFNLElBQUkwQixNQUFNO1FBQ2xCO1FBRUEsMEVBQTBFO1FBQzFFLE1BQU1zSSx3QkFBd0IsSUFBSXRNLHFEQUFXQSxDQUFDO1lBQzVDcUQsVUFBVXRDLFFBQVFDLEdBQUcsQ0FBQ2tDLG9CQUFvQjtZQUMxQ0ksY0FBY3ZDLFFBQVFDLEdBQUcsQ0FBQ29DLHdCQUF3QjtZQUNsRCtJLGFBQWE7WUFDYi9CLGFBQWFoSjtZQUNibUwsU0FBUztRQUNYO1FBRUEsK0JBQStCO1FBQy9CRCxzQkFBc0JFLFFBQVEsQ0FBQztZQUM3QjdLLFNBQVMwRixPQUFPMUYsT0FBTztZQUN2QjhLLFlBQVk7WUFDWjFGLGNBQWNNLE9BQU8zRixXQUFXO1lBQ2hDc0YsZUFBZUssT0FBT3pGLFlBQVksSUFBSTtZQUN0Q3FGLFlBQVlJLE9BQU9wRixXQUFXLEdBQUdtQyxLQUFLQyxLQUFLLENBQUMsQ0FBQ2dELE9BQU9wRixXQUFXLEdBQUdGLEtBQUtDLEdBQUcsRUFBQyxJQUFLLFFBQVE7UUFDMUY7UUFFQTlCLFFBQVFvQyxLQUFLLENBQUM7UUFFZCxxREFBcUQ7UUFDckQsT0FBTyxJQUFJeUYsUUFBUSxDQUFDQyxTQUFTQztZQUMzQixJQUFJO2dCQUNGLE1BQU1nRCxNQUFNLENBQUMscURBQXFELEVBQUU1RCxPQUFPMUYsT0FBTyxDQUFDLE1BQU0sQ0FBQztnQkFDMUYsTUFBTStLLFVBQVU7b0JBQ2QsaUJBQWlCLENBQUMsT0FBTyxFQUFFckYsT0FBTzNGLFdBQVcsQ0FBQyxDQUFDO29CQUMvQyxVQUFVO29CQUNWLGdCQUFnQjtnQkFDbEI7Z0JBRUEseURBQXlEO2dCQUN6RCxNQUFNaUwsUUFBUTtnQkFFZCxvQkFBb0I7Z0JBQ3BCTCxzQkFBc0JNLFdBQVcsQ0FBQztvQkFDaEMzQixLQUFLQTtvQkFDTDRCLFFBQVE7b0JBQ1JILFNBQVNBO29CQUNUSSxNQUFNSDtnQkFDUixHQUFHLENBQUN4RSxLQUFVNEU7b0JBQ1osSUFBSTVFLEtBQUs7d0JBQ1BqSSxRQUFRb0MsS0FBSyxDQUFDLDRCQUE0QjZGO3dCQUMxQyxPQUFPRixPQUFPRTtvQkFDaEI7b0JBRUEsSUFBSTt3QkFDRix3Q0FBd0M7d0JBQ3hDakksUUFBUW9DLEtBQUssQ0FBQywrQkFBK0J5Szt3QkFFN0MsSUFBSSxPQUFPQSxhQUFhLFVBQVU7NEJBQ2hDQSxXQUFXMUUsS0FBSzJFLEtBQUssQ0FBQ0Q7d0JBQ3hCO3dCQUVBLHdCQUF3Qjt3QkFDeEIsSUFBSUEsWUFBWUEsU0FBUy9ELGFBQWEsSUFBSUMsTUFBTUMsT0FBTyxDQUFDNkQsU0FBUy9ELGFBQWEsQ0FBQ0csT0FBTyxHQUFHOzRCQUN2RmpKLFFBQVFvQyxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsRUFBRXlLLFNBQVMvRCxhQUFhLENBQUNHLE9BQU8sQ0FBQ0UsTUFBTSxDQUFDLGtCQUFrQixDQUFDOzRCQUMvRixPQUFPckIsUUFBUStFLFNBQVMvRCxhQUFhLENBQUNHLE9BQU87d0JBQ3ZELE9BQU87NEJBQ0csNEVBQTRFOzRCQUM1RWpKLFFBQVFvQyxLQUFLLENBQUMsaUNBQWlDeUs7NEJBRS9DLGtEQUFrRDs0QkFDbEQsSUFBSUEsWUFBWSxPQUFPQSxhQUFhLFVBQVU7Z0NBQzVDLElBQUk5RCxNQUFNQyxPQUFPLENBQUM2RCxXQUFXO29DQUMzQixPQUFPL0UsUUFBUStFO2dDQUNqQixPQUFPLElBQUlBLFNBQVMvRCxhQUFhLEVBQUU7b0NBQ2pDLE9BQU9oQixRQUFRO3dDQUFDK0UsU0FBUy9ELGFBQWE7cUNBQUM7Z0NBQ3pDOzRCQUNGOzRCQUVBLE9BQU9mLE9BQU8sSUFBSWpFLE1BQU07d0JBQzFCO29CQUNGLEVBQUUsT0FBT2lKLFlBQVk7d0JBQ25CL00sUUFBUW9DLEtBQUssQ0FBQyx3Q0FBd0MySzt3QkFDdEQsT0FBT2hGLE9BQU9nRjtvQkFDaEI7Z0JBQ0Y7WUFDRixFQUFFLE9BQU9DLFVBQVU7Z0JBQ2pCaE4sUUFBUW9DLEtBQUssQ0FBQyxtQ0FBbUM0SztnQkFDakQsT0FBT2pGLE9BQU9pRjtZQUNoQjtRQUNGO0lBQ0YsRUFBRSxPQUFPNUssT0FBTztRQUNkcEMsUUFBUW9DLEtBQUssQ0FBQyw4Q0FBOENBO1FBQzVELE1BQU1BO0lBQ1I7QUFDRjtBQUVBLGtFQUFrRTtBQUMzRCxlQUFlNks7SUFDcEJqTixRQUFRb0MsS0FBSyxDQUFDO0lBRWQsSUFBSTtRQUNGLHdEQUF3RDtRQUN4RCxNQUFNK0UsU0FBUzlGLFdBQVdHLFdBQVcsSUFBSUgsV0FBV0ksT0FBTyxHQUFHO1lBQzVERCxhQUFhSCxXQUFXRyxXQUFXO1lBQ25DQyxTQUFTSixXQUFXSSxPQUFPO1FBQzdCLElBQUlZO1FBRUosSUFBSSxDQUFDOEUsVUFBVSxDQUFDQSxPQUFPM0YsV0FBVyxJQUFJLENBQUMyRixPQUFPMUYsT0FBTyxFQUFFO1lBQ3JEekIsUUFBUW9DLEtBQUssQ0FBQztZQUNkLE1BQU0sSUFBSTBCLE1BQU07UUFDbEI7UUFFQTlELFFBQVFvQyxLQUFLLENBQUM7UUFFZCx3Q0FBd0M7UUFDeEMsT0FBTyxJQUFJeUYsUUFBUSxDQUFDQyxTQUFTQztZQUMzQixvREFBb0Q7WUFDcEQsTUFBTW1GLFlBQVlDLFdBQVc7Z0JBQzNCbk4sUUFBUW9DLEtBQUssQ0FBQztnQkFDZDJGLE9BQU8sSUFBSWpFLE1BQU07WUFDbkIsR0FBRztZQUVILElBQUk7Z0JBQ0YsNkVBQTZFO2dCQUM3RSxNQUFNaUgsTUFBTSxDQUFDLHFEQUFxRCxFQUFFNUQsT0FBTzFGLE9BQU8sQ0FBQywyREFBMkQsQ0FBQztnQkFFL0l6QixRQUFRb0MsS0FBSyxDQUFDLGdEQUFnRDJJO2dCQUU5RHFDLE1BQU1yQyxLQUFLO29CQUNUNEIsUUFBUTtvQkFDUkgsU0FBUzt3QkFDUCxpQkFBaUIsQ0FBQyxPQUFPLEVBQUVyRixPQUFPM0YsV0FBVyxDQUFDLENBQUM7d0JBQy9DLFVBQVU7d0JBQ1YsZ0JBQWdCO29CQUNsQjtnQkFDRixHQUNDNkwsSUFBSSxDQUFDUixDQUFBQTtvQkFDSjdNLFFBQVFvQyxLQUFLLENBQUMsa0RBQWtEeUssU0FBUzFHLE1BQU07b0JBRS9FLElBQUksQ0FBQzBHLFNBQVNTLEVBQUUsRUFBRTt3QkFDaEIsTUFBTSxJQUFJeEosTUFBTSxDQUFDLDJCQUEyQixFQUFFK0ksU0FBUzFHLE1BQU0sQ0FBQyxDQUFDO29CQUNqRTtvQkFFQSxPQUFPMEcsU0FBU1UsSUFBSTtnQkFDdEIsR0FDQ0YsSUFBSSxDQUFDbkYsQ0FBQUE7b0JBQ0psSSxRQUFRb0MsS0FBSyxDQUFDO29CQUNkb0wsYUFBYU47b0JBRWIscUNBQXFDO29CQUNyQyxJQUFJaEYsUUFBUUEsS0FBS1ksYUFBYSxJQUFJQyxNQUFNQyxPQUFPLENBQUNkLEtBQUtZLGFBQWEsQ0FBQ0csT0FBTyxHQUFHO3dCQUMzRWpKLFFBQVFvQyxLQUFLLENBQUMsQ0FBQyxzQkFBc0IsRUFBRThGLEtBQUtZLGFBQWEsQ0FBQ0csT0FBTyxDQUFDRSxNQUFNLENBQUMsU0FBUyxDQUFDO3dCQUNuRnJCLFFBQVFJLEtBQUtZLGFBQWEsQ0FBQ0csT0FBTztvQkFDcEMsT0FBTzt3QkFDTGpKLFFBQVFvQyxLQUFLLENBQUMsNERBQTREOEY7d0JBQzFFLGdGQUFnRjt3QkFDaEYsaUVBQWlFO3dCQUNqRUosUUFBUSxFQUFFO29CQUNaO2dCQUNGLEdBQ0MyRixLQUFLLENBQUNyTCxDQUFBQTtvQkFDTHBDLFFBQVFvQyxLQUFLLENBQUMsZ0NBQWdDQTtvQkFDOUNvTCxhQUFhTjtvQkFDYm5GLE9BQU8zRjtnQkFDVDtZQUNGLEVBQUUsT0FBT0EsT0FBTztnQkFDZHBDLFFBQVFvQyxLQUFLLENBQUMsaURBQWlEQTtnQkFDL0RvTCxhQUFhTjtnQkFDYm5GLE9BQU8zRjtZQUNUO1FBQ0Y7SUFDRixFQUFFLE9BQU9BLE9BQU87UUFDZHBDLFFBQVFvQyxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxNQUFNQTtJQUNSO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL3NyYy9saWIvcXVpY2tib29rcy9hcGkudHM/MmNhOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnZvaWNlIH0gZnJvbSAnQC90eXBlcy9pbnZvaWNlJ1xuaW1wb3J0IE9BdXRoQ2xpZW50IGZyb20gJ2ludHVpdC1vYXV0aCdcbmltcG9ydCBRdWlja0Jvb2tzIGZyb20gJ25vZGUtcXVpY2tib29rcydcblxuLy8gRmlyc3QsIGxldCdzIHZlcmlmeSBRdWlja0Jvb2tzIGNvbnN0cnVjdG9yIGlzIGF2YWlsYWJsZVxuY29uc29sZS5sb2coJ1F1aWNrQm9va3MgY29uc3RydWN0b3IgY2hlY2s6Jywge1xuICBjb25zdHJ1Y3RvclR5cGU6IHR5cGVvZiBRdWlja0Jvb2tzLFxuICBpc0Z1bmN0aW9uOiB0eXBlb2YgUXVpY2tCb29rcyA9PT0gJ2Z1bmN0aW9uJ1xufSk7XG5cbi8vIFRva2VuIHN0b3JhZ2Uga2V5c1xuZXhwb3J0IGNvbnN0IFRPS0VOX0tFWSA9ICdxYl90b2tlbidcbmV4cG9ydCBjb25zdCBSRUFMTV9JRF9LRVkgPSAncWJfcmVhbG1faWQnXG5leHBvcnQgY29uc3QgUkVGUkVTSF9UT0tFTl9LRVkgPSAncWJfcmVmcmVzaF90b2tlbidcbmV4cG9ydCBjb25zdCBUT0tFTl9FWFBJUllfS0VZID0gJ3FiX3Rva2VuX2V4cGlyeSdcblxuLy8gRGVidWcgZmxhZ1xuY29uc3QgREVCVUcgPSB0cnVlO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gbG9nIGRlYnVnIGluZm9ybWF0aW9uXG5jb25zdCBkZWJ1Z0xvZyA9ICguLi5hcmdzOiBhbnlbXSkgPT4ge1xuICBpZiAoREVCVUcpIHtcbiAgICBjb25zb2xlLmxvZygnW1F1aWNrQm9va3MgQVBJIERlYnVnXScsIC4uLmFyZ3MpO1xuICB9XG59O1xuXG4vLyBFbnN1cmUgd2UgaGF2ZSBhIHByb3Blcmx5IGZvcm1hdHRlZCBiYXNlIFVSTCB3aXRoIHByb3RvY29sXG5jb25zdCBnZXRCYXNlVXJsID0gKCkgPT4geyBcbiAgY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBU0VfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xuICBcbiAgLy8gTWFrZSBzdXJlIFVSTCBoYXMgYSBwcm90b2NvbFxuICBpZiAoIWJhc2VVcmwuc3RhcnRzV2l0aCgnaHR0cDovLycpICYmICFiYXNlVXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcbiAgICByZXR1cm4gYGh0dHA6Ly8ke2Jhc2VVcmx9YDtcbiAgfVxuICBcbiAgLy8gUmVtb3ZlIHRyYWlsaW5nIHNsYXNoIGlmIHByZXNlbnRcbiAgcmV0dXJuIGJhc2VVcmwucmVwbGFjZSgvXFwvJC8sICcnKTtcbn07XG5cbmNvbnN0IGdldFJlZGlyZWN0VXJpID0gKCkgPT4ge1xuICBjb25zdCBiYXNlVXJsID0gZ2V0QmFzZVVybCgpO1xuICByZXR1cm4gYCR7YmFzZVVybH0vYXBpL2F1dGgvY2FsbGJhY2tgO1xufTtcblxuLy8gSW5pdGlhbGl6ZSBPQXV0aCBjbGllbnQgLSB1c2UgY3JlYXRlT0F1dGhDbGllbnQgZnVuY3Rpb24gY29uc2lzdGVudGx5XG5sZXQgb2F1dGhDbGllbnQ6IGFueTtcblxubGV0IHFibzogUXVpY2tCb29rcyB8IG51bGwgPSBudWxsXG5leHBvcnQgeyBxYm8gfTtcblxuLy8gU2VydmVyLXNpZGUgaW4tbWVtb3J5IHRva2VuIHN0b3JlXG4vLyBOT1RFOiBUaGlzIHdpbGwgYmUgcmVzZXQgb24gc2VydmVyIHJlc3RhcnRzIGFuZCBiZXR3ZWVuIHNlcnZlcmxlc3MgZnVuY3Rpb24gaW52b2NhdGlvbnNcbmV4cG9ydCBsZXQgdG9rZW5TdG9yZToge1xuICBhY2Nlc3NUb2tlbj86IHN0cmluZztcbiAgcmVhbG1JZD86IHN0cmluZztcbiAgcmVmcmVzaFRva2VuPzogc3RyaW5nO1xuICB0b2tlbkV4cGlyeT86IG51bWJlcjtcbn0gPSB7fTtcblxuLy8gS2VlcCB0cmFjayBvZiBpbml0aWFsaXphdGlvbiBzdGF0dXNcbmxldCBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cbi8vIFN0b3JlIHRva2VuIGJvdGggaW4gbWVtb3J5IGFuZCBpbiBsb2NhbFN0b3JhZ2UgKGlmIGF2YWlsYWJsZSlcbmNvbnN0IHN0b3JlVG9rZW4gPSAoYWNjZXNzVG9rZW46IHN0cmluZywgcmVhbG1JZDogc3RyaW5nLCByZWZyZXNoVG9rZW4/OiBzdHJpbmcsIGV4cGlyZXNJbj86IG51bWJlcikgPT4ge1xuICB0cnkge1xuICAgIGRlYnVnTG9nKCdTdG9yaW5nIHRva2VuJyk7XG4gICAgXG4gICAgLy8gU3RvcmUgdG9rZW4gaW4gbWVtb3J5IGZvciBzZXJ2ZXItc2lkZSB1c2VcbiAgICB0b2tlblN0b3JlLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XG4gICAgdG9rZW5TdG9yZS5yZWFsbUlkID0gcmVhbG1JZDtcbiAgICBcbiAgICBpZiAocmVmcmVzaFRva2VuKSB7XG4gICAgICB0b2tlblN0b3JlLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcbiAgICB9XG4gICAgXG4gICAgaWYgKGV4cGlyZXNJbikge1xuICAgICAgY29uc3QgZXhwaXJ5VGltZSA9IERhdGUubm93KCkgKyAoZXhwaXJlc0luICogMTAwMCk7XG4gICAgICB0b2tlblN0b3JlLnRva2VuRXhwaXJ5ID0gZXhwaXJ5VGltZTtcbiAgICB9XG4gICAgXG4gICAgLy8gVHJ5IHRvIHN0b3JlIGluIGxvY2FsU3RvcmFnZSBmb3IgcGVyc2lzdGVuY2UgaWYgd2UncmUgaW4gYnJvd3NlclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdHJ5IHtcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRPS0VOX0tFWSwgYWNjZXNzVG9rZW4pO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oUkVBTE1fSURfS0VZLCByZWFsbUlkKTtcbiAgICAgIFxuICAgICAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShSRUZSRVNIX1RPS0VOX0tFWSwgcmVmcmVzaFRva2VuKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGV4cGlyZXNJbikge1xuICAgICAgICAgIGNvbnN0IGV4cGlyeVRpbWUgPSBEYXRlLm5vdygpICsgKGV4cGlyZXNJbiAqIDEwMDApO1xuICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRPS0VOX0VYUElSWV9LRVksIGV4cGlyeVRpbWUudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGxvY2FsU3RvcmFnZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdG9yZSB0b2tlbiBpbiBsb2NhbFN0b3JhZ2U6JywgbG9jYWxTdG9yYWdlRXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZygnVG9rZW4gc3RvcmVkIHN1Y2Nlc3NmdWxseScpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdG9yZSB0b2tlbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG4vLyBSZXRyaWV2ZSB0b2tlbiBmcm9tIG1lbW9yeSBvciBsb2NhbFN0b3JhZ2VcbmNvbnN0IGdldFN0b3JlZFRva2VuID0gKCkgPT4ge1xuICB0cnkge1xuICAgIGRlYnVnTG9nKCdSZXRyaWV2aW5nIHN0b3JlZCB0b2tlbicpO1xuICAgIFxuICAgIC8vIEZpcnN0IHRyeSBtZW1vcnkgc3RvcmUgZm9yIHNlcnZlci1zaWRlXG4gICAgaWYgKHRva2VuU3RvcmUuYWNjZXNzVG9rZW4gJiYgdG9rZW5TdG9yZS5yZWFsbUlkKSB7XG4gICAgICBkZWJ1Z0xvZygnVG9rZW4gZm91bmQgaW4gbWVtb3J5Jyk7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgYWNjZXNzVG9rZW46IHRva2VuU3RvcmUuYWNjZXNzVG9rZW4sIFxuICAgICAgICByZWFsbUlkOiB0b2tlblN0b3JlLnJlYWxtSWQsXG4gICAgICAgIHJlZnJlc2hUb2tlbjogdG9rZW5TdG9yZS5yZWZyZXNoVG9rZW4sXG4gICAgICAgIHRva2VuRXhwaXJ5OiB0b2tlblN0b3JlLnRva2VuRXhwaXJ5XG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBub3QgaW4gbWVtb3J5LCB0cnkgbG9jYWxTdG9yYWdlIGlmIHdlJ3JlIGluIGJyb3dzZXJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVE9LRU5fS0VZKTtcbiAgICAgIGNvbnN0IHJlYWxtSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRUFMTV9JRF9LRVkpO1xuICAgICAgY29uc3QgcmVmcmVzaFRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oUkVGUkVTSF9UT0tFTl9LRVkpO1xuICAgICAgY29uc3QgdG9rZW5FeHBpcnlTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUT0tFTl9FWFBJUllfS0VZKTtcbiAgICAgIFxuICAgICAgaWYgKGFjY2Vzc1Rva2VuICYmIHJlYWxtSWQpIHtcbiAgICAgICAgZGVidWdMb2coJ1Rva2VuIGZvdW5kIGluIGxvY2FsU3RvcmFnZScpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyB1cGRhdGUgbWVtb3J5IHN0b3JlIGZvciBmdXR1cmUgdXNlXG4gICAgICAgIHRva2VuU3RvcmUuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICAgICAgdG9rZW5TdG9yZS5yZWFsbUlkID0gcmVhbG1JZDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICB0b2tlblN0b3JlLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRva2VuRXhwaXJ5U3RyKSB7XG4gICAgICAgICAgdG9rZW5TdG9yZS50b2tlbkV4cGlyeSA9IHBhcnNlSW50KHRva2VuRXhwaXJ5U3RyLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgIGFjY2Vzc1Rva2VuLCBcbiAgICAgICAgICByZWFsbUlkLFxuICAgICAgICAgIHJlZnJlc2hUb2tlbjogcmVmcmVzaFRva2VuIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICB0b2tlbkV4cGlyeTogdG9rZW5FeHBpcnlTdHIgPyBwYXJzZUludCh0b2tlbkV4cGlyeVN0ciwgMTApIDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGRlYnVnTG9nKCdObyB0b2tlbiBmb3VuZCcpO1xuICAgIHJldHVybiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgc3RvcmVkIHRva2VuOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuLy8gQ2xlYXIgYWxsIHN0b3JlZCB0b2tlbnNcbmNvbnN0IGNsZWFyVG9rZW5zID0gKCkgPT4ge1xuICBkZWJ1Z0xvZygnQ2xlYXJpbmcgYWxsIHRva2VucycpO1xuICBcbiAgLy8gQ2xlYXIgbWVtb3J5IHN0b3JlXG4gIHRva2VuU3RvcmUgPSB7fTtcbiAgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICBxYm8gPSBudWxsO1xuICBcbiAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGlmIGluIGJyb3dzZXJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdHJ5IHtcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUT0tFTl9LRVkpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFJFQUxNX0lEX0tFWSk7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oUkVGUkVTSF9UT0tFTl9LRVkpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFRPS0VOX0VYUElSWV9LRVkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY2xlYXIgbG9jYWxTdG9yYWdlOicsIGVycm9yKTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplUUJPKGFjY2Vzc1Rva2VuOiBzdHJpbmcsIHJlYWxtSWQ6IHN0cmluZywgcmVmcmVzaFRva2VuPzogc3RyaW5nLCBleHBpcmVzSW4/OiBudW1iZXIpOiBib29sZWFuIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnQkFTSUMgUXVpY2tCb29rcyBjbGllbnQgaW5pdGlhbGl6YXRpb24nLCB7XG4gICAgICBhY2Nlc3NUb2tlblByZXNlbnQ6ICEhYWNjZXNzVG9rZW4sXG4gICAgICByZWFsbUlkUHJlc2VudDogISFyZWFsbUlkLFxuICAgICAgY2xpZW50SWRQcmVzZW50OiAhIXByb2Nlc3MuZW52LlFVSUNLQk9PS1NfQ0xJRU5UX0lELFxuICAgICAgY2xpZW50U2VjcmV0UHJlc2VudDogISFwcm9jZXNzLmVudi5RVUlDS0JPT0tTX0NMSUVOVF9TRUNSRVRcbiAgICB9KTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSByZXF1aXJlbWVudHNcbiAgICBpZiAoIWFjY2Vzc1Rva2VuIHx8ICFyZWFsbUlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFUlJPUjogTWlzc2luZyB0b2tlbiBvciByZWFsbUlkIGZvciBRdWlja0Jvb2tzIGluaXRpYWxpemF0aW9uJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNsaWVudElkID0gcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfSUQ7XG4gICAgY29uc3QgY2xpZW50U2VjcmV0ID0gcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfU0VDUkVUO1xuICAgIFxuICAgIGlmICghY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCkge1xuICAgICAgY29uc29sZS5lcnJvcignRVJST1I6IE1pc3NpbmcgUXVpY2tCb29rcyBjcmVkZW50aWFscycpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdG9yZSB0aGUgdG9rZW4gZmlyc3RcbiAgICBzdG9yZVRva2VuKGFjY2Vzc1Rva2VuLCByZWFsbUlkLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJbik7XG4gICAgXG4gICAgLy8gVUxUUkEgU0lNUExFIENMSUVOVCBDUkVBVElPTiAtIEZJUlNUIEFUVEVNUFRcbiAgICB0cnkge1xuICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIG1pbmltYWwgUXVpY2tCb29rcyBjbGllbnQgLSBhdHRlbXB0IDEnKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIHRoZSBjbGllbnQgd2l0aCBhYnNvbHV0ZSBtaW5pbWFsIHBhcmFtZXRlcnNcbiAgICBxYm8gPSBuZXcgUXVpY2tCb29rcyhcbiAgICAgICAgY2xpZW50SWQsXG4gICAgICAgIGNsaWVudFNlY3JldCxcbiAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgICBmYWxzZSwgLy8gVXNlIE9BdXRoMS4wYSBpbnN0ZWFkIG9mIE9BdXRoMiBcbiAgICAgIHJlYWxtSWRcbiAgICApO1xuICAgIFxuICAgICAgaWYgKCFxYm8pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUXVpY2tCb29rcyBjb25zdHJ1Y3RvciByZXR1cm5lZCBudWxsIC0gYXR0ZW1wdCAxJyk7XG4gICAgICAgIC8vIFdlJ2xsIHRyeSBmYWxsYmFjayBhcHByb2FjaCBiZWxvd1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2V0IHRoZXNlIGV4cGxpY2l0bHkgdG8gZW5zdXJlIHRoZXkncmUgYXZhaWxhYmxlXG4gICAgICAgIHFiby5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgICAgICBxYm8ucmVhbG1JZCA9IHJlYWxtSWQ7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnUXVpY2tCb29rcyBjbGllbnQgY3JlYXRlZCB3aXRoIGJhc2ljIHByb3BlcnRpZXM6Jywge1xuICAgICAgICAgIGhhc1FibzogISFxYm8sXG4gICAgICAgICAgaGFzVG9rZW46ICEhKHFibyAmJiBxYm8uYWNjZXNzVG9rZW4pLFxuICAgICAgICAgIGhhc1JlYWxtSWQ6ICEhKHFibyAmJiBxYm8ucmVhbG1JZCksXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IGluaXRpYWxpemF0aW9uIGZsYWdcbiAgICAgICAgaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIGNvbnNvbGUubG9nKCdRdWlja0Jvb2tzIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHkgLSBhdHRlbXB0IDEnKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChjbGllbnRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRVJST1IgY3JlYXRpbmcgUXVpY2tCb29rcyBjbGllbnQgaW5zdGFuY2UgLSBhdHRlbXB0IDE6JywgY2xpZW50RXJyb3IpO1xuICAgICAgLy8gV2UnbGwgdHJ5IGZhbGxiYWNrIGFwcHJvYWNoIGJlbG93XG4gICAgfVxuICAgIFxuICAgIC8vIEZBTExCQUNLIEFQUFJPQUNIIC0gQVRURU1QVCAyXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBmYWxsYmFjayBRdWlja0Jvb2tzIGNsaWVudCAtIGF0dGVtcHQgMicpO1xuICAgICAgXG4gICAgICAvLyBUcnkgd2l0aCBkaWZmZXJlbnQgcGFyYW1ldGVycyAtIHNvbWUgdmVyc2lvbnMgbmVlZCB1c2VTYW5kYm94IHBhcmFtZXRlclxuICAgICAgcWJvID0gbmV3IFF1aWNrQm9va3MoXG4gICAgICAgIGNsaWVudElkLFxuICAgICAgICBjbGllbnRTZWNyZXQsXG4gICAgICAgIGFjY2Vzc1Rva2VuLFxuICAgICAgICB0cnVlLCAvLyBUcnkgd2l0aCBPQXV0aDIgbW9kZSBcbiAgICAgICAgcmVhbG1JZCxcbiAgICAgICAge1xuICAgICAgICAgIHVzZVNhbmRib3g6IHRydWVcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgaWYgKCFxYm8pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignUXVpY2tCb29rcyBjb25zdHJ1Y3RvciByZXR1cm5lZCBudWxsIC0gYXR0ZW1wdCAyJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU2V0IHRoZXNlIGV4cGxpY2l0bHkgdG8gZW5zdXJlIHRoZXkncmUgYXZhaWxhYmxlXG4gICAgICBxYm8uYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICAgIHFiby5yZWFsbUlkID0gcmVhbG1JZDtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1F1aWNrQm9va3MgY2xpZW50IGNyZWF0ZWQgd2l0aCBmYWxsYmFjayBhcHByb2FjaCcpO1xuICAgICAgXG4gICAgICAvLyBTZXQgaW5pdGlhbGl6YXRpb24gZmxhZ1xuICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5sb2coJ1F1aWNrQm9va3MgY2xpZW50IGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseSAtIGF0dGVtcHQgMicpO1xuICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRVJST1IgY3JlYXRpbmcgUXVpY2tCb29rcyBjbGllbnQgd2l0aCBmYWxsYmFjayBhcHByb2FjaDonLCBmYWxsYmFja0Vycm9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRkFUQUwgRVJST1IgaW4gUXVpY2tCb29rcyBpbml0aWFsaXphdGlvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIENoZWNrIGlmIGNsaWVudCBpcyBpbml0aWFsaXplZCBvciB0cnkgdG8gaW5pdGlhbGl6ZSBmcm9tIHN0b3JlZCB0b2tlblxuZXhwb3J0IGNvbnN0IGNoZWNrQ2xpZW50SW5pdGlhbGl6ZWQgPSAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdDaGVja2luZyBpZiBRdWlja0Jvb2tzIGNsaWVudCBpcyBpbml0aWFsaXplZCcpO1xuICBcbiAgdHJ5IHtcbiAgICAvLyBJZiBhbHJlYWR5IGluaXRpYWxpemVkIGluIHRoaXMgc2Vzc2lvbiwgdmVyaWZ5IHRoZSBjbGllbnQgaXMgc3RpbGwgdmFsaWRcbiAgICBpZiAocWJvICYmIGlzSW5pdGlhbGl6ZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdRdWlja0Jvb2tzIGNsaWVudCBhcHBlYXJzIHRvIGJlIGluaXRpYWxpemVkLCB2YWxpZGF0aW5nLi4uJyk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSB0aGUgY2xpZW50IGhhcyBhbGwgcmVxdWlyZWQgcHJvcGVydGllc1xuICAgICAgaWYgKCFxYm8uYWNjZXNzVG9rZW4gfHwgIXFiby5yZWFsbUlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgaXMgbWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0aWVzLCB3aWxsIGF0dGVtcHQgdG8gcmVpbml0aWFsaXplJyk7XG4gICAgICAgIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICAgcWJvID0gbnVsbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdDbGllbnQgYXBwZWFycyB2YWxpZCB3aXRoIHJlcXVpcmVkIHByb3BlcnRpZXMnKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygnUXVpY2tCb29rcyBjbGllbnQgaXMgbm90IGluaXRpYWxpemVkLCB3aWxsIGF0dGVtcHQgdG8gaW5pdGlhbGl6ZSBmcm9tIHN0b3JlZCB0b2tlbicpO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgdG8gcmV0cmlldmUgdG9rZW4gLSBJTVBPUlRBTlQ6IENoZWNrIGJvdGggc2VydmVyLXNpZGUgdG9rZW5TdG9yZSBhbmQgY29va2llc1xuICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIHJldHJpZXZlIHN0b3JlZCB0b2tlbicpO1xuICAgIGNvbnN0IHN0b3JlZFRva2VuID0gZ2V0U2VydmVyU2lkZVRva2VuKCk7XG4gICAgXG4gICAgaWYgKCFzdG9yZWRUb2tlbiB8fCAhc3RvcmVkVG9rZW4uYWNjZXNzVG9rZW4gfHwgIXN0b3JlZFRva2VuLnJlYWxtSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyB2YWxpZCBzdG9yZWQgdG9rZW4gZm91bmQnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUXVpY2tCb29rcyBjbGllbnQgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgY29ubmVjdCB5b3VyIFF1aWNrQm9va3MgYWNjb3VudCBmaXJzdC4nKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0ZvdW5kIHN0b3JlZCB0b2tlbiwgaW5pdGlhbGl6aW5nIFF1aWNrQm9va3MgY2xpZW50IHdpdGg6Jywge1xuICAgICAgaGFzQWNjZXNzVG9rZW46ICEhc3RvcmVkVG9rZW4uYWNjZXNzVG9rZW4sXG4gICAgICBoYXNSZWFsbUlkOiAhIXN0b3JlZFRva2VuLnJlYWxtSWQsXG4gICAgICBoYXNSZWZyZXNoVG9rZW46ICEhc3RvcmVkVG9rZW4ucmVmcmVzaFRva2VuLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIEluaXRpYWxpemUgd2l0aCBjdXJyZW50IHRva2VuXG4gICAgY29uc3QgaW5pdFJlc3VsdCA9IGluaXRpYWxpemVRQk8oXG4gICAgICBzdG9yZWRUb2tlbi5hY2Nlc3NUb2tlbiwgXG4gICAgICBzdG9yZWRUb2tlbi5yZWFsbUlkLFxuICAgICAgc3RvcmVkVG9rZW4ucmVmcmVzaFRva2VuLFxuICAgICAgc3RvcmVkVG9rZW4udG9rZW5FeHBpcnkgPyBNYXRoLmZsb29yKChzdG9yZWRUb2tlbi50b2tlbkV4cGlyeSAtIERhdGUubm93KCkpIC8gMTAwMCkgOiB1bmRlZmluZWRcbiAgICApO1xuICAgIFxuICAgIGlmICghaW5pdFJlc3VsdCkge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgUXVpY2tCb29rcyBjbGllbnQgd2l0aCBzdG9yZWQgdG9rZW4nKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgUXVpY2tCb29rcyBjbGllbnQuIFBsZWFzZSByZWNvbm5lY3QgeW91ciBRdWlja0Jvb2tzIGFjY291bnQuJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdTdWNjZXNzZnVsbHkgaW5pdGlhbGl6ZWQgUXVpY2tCb29rcyBjbGllbnQgZnJvbSBzdG9yZWQgdG9rZW4nKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBjaGVja0NsaWVudEluaXRpYWxpemVkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLy8gRW5oYW5jZWQgZnVuY3Rpb24gdG8gZ2V0IHRva2VuIGZyb20gc2VydmVyLXNpZGUgc291cmNlcyAodG9rZW5TdG9yZSBhbmQgY29va2llcylcbmZ1bmN0aW9uIGdldFNlcnZlclNpZGVUb2tlbigpIHtcbiAgY29uc29sZS5sb2coJ0dldHRpbmcgc2VydmVyLXNpZGUgdG9rZW4nKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gRmlyc3QgY2hlY2sgbWVtb3J5IHN0b3JlXG4gICAgaWYgKHRva2VuU3RvcmUuYWNjZXNzVG9rZW4gJiYgdG9rZW5TdG9yZS5yZWFsbUlkKSB7XG4gICAgICBjb25zb2xlLmxvZygnVG9rZW4gZm91bmQgaW4gc2VydmVyIG1lbW9yeSBzdG9yZScpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWNjZXNzVG9rZW46IHRva2VuU3RvcmUuYWNjZXNzVG9rZW4sXG4gICAgICAgIHJlYWxtSWQ6IHRva2VuU3RvcmUucmVhbG1JZCxcbiAgICAgICAgcmVmcmVzaFRva2VuOiB0b2tlblN0b3JlLnJlZnJlc2hUb2tlbixcbiAgICAgICAgdG9rZW5FeHBpcnk6IHRva2VuU3RvcmUudG9rZW5FeHBpcnlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTmV4dCwgdHJ5IGxvY2FsU3RvcmFnZSBpZiB3ZSdyZSBpbiBhIGJyb3dzZXIgZW52aXJvbm1lbnRcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVE9LRU5fS0VZKTtcbiAgICAgIGNvbnN0IHJlYWxtSWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRUFMTV9JRF9LRVkpO1xuICAgICAgXG4gICAgICBpZiAoYWNjZXNzVG9rZW4gJiYgcmVhbG1JZCkge1xuICAgICAgICBjb25zb2xlLmxvZygnVG9rZW4gZm91bmQgaW4gbG9jYWxTdG9yYWdlJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShSRUZSRVNIX1RPS0VOX0tFWSk7XG4gICAgICAgIGNvbnN0IHRva2VuRXhwaXJ5U3RyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oVE9LRU5fRVhQSVJZX0tFWSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgbWVtb3J5IHN0b3JlIGZvciBmdXR1cmUgdXNlXG4gICAgICAgIHRva2VuU3RvcmUuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICAgICAgdG9rZW5TdG9yZS5yZWFsbUlkID0gcmVhbG1JZDtcbiAgICAgICAgXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICB0b2tlblN0b3JlLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRva2VuRXhwaXJ5U3RyKSB7XG4gICAgICAgICAgdG9rZW5TdG9yZS50b2tlbkV4cGlyeSA9IHBhcnNlSW50KHRva2VuRXhwaXJ5U3RyLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgYWNjZXNzVG9rZW4sXG4gICAgICAgICAgcmVhbG1JZCxcbiAgICAgICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbiB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgdG9rZW5FeHBpcnk6IHRva2VuRXhwaXJ5U3RyID8gcGFyc2VJbnQodG9rZW5FeHBpcnlTdHIsIDEwKSA6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBObyBkeW5hbWljIGltcG9ydHMgLSB0aGlzIGNhdXNlcyBpc3N1ZXMgaW4gTmV4dC5qc1xuICAgIC8vIFRoZSBjb29raWVzIHdpbGwgYmUgcGFzc2VkIGJ5IHRoZSBpbnZvaWNlcyBBUEkgcm91dGUgZGlyZWN0bHlcbiAgICBjb25zb2xlLmxvZygnTm8gc2VydmVyLXNpZGUgdG9rZW4gZm91bmQgaW4gbWVtb3J5IG9yIGxvY2FsU3RvcmFnZSwgY2hlY2sgY29va2llcyBpbiB0aGUgQVBJIHJvdXRlJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBzZXJ2ZXItc2lkZSB0b2tlbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgUXVpY2tCb29rcyBpcyByZWFkeSBmb3IgY2xpZW50LXNpZGUgY29tcG9uZW50c1xuZXhwb3J0IGNvbnN0IGlzUXVpY2tCb29rc1JlYWR5ID0gKCk6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0tFWSk7XG4gICAgY29uc3QgcmVhbG1JZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFJFQUxNX0lEX0tFWSk7XG4gICAgY29uc3QgdG9rZW5FeHBpcnlTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUT0tFTl9FWFBJUllfS0VZKTtcbiAgICBcbiAgICAvLyBJZiB0b2tlbiBpcyBleHBpcmVkLCBjb25zaWRlciBub3QgcmVhZHlcbiAgICBpZiAodG9rZW5FeHBpcnlTdHIpIHtcbiAgICAgIGNvbnN0IHRva2VuRXhwaXJ5ID0gcGFyc2VJbnQodG9rZW5FeHBpcnlTdHIsIDEwKTtcbiAgICAgIGlmIChEYXRlLm5vdygpID4gdG9rZW5FeHBpcnkpIHtcbiAgICAgICAgZGVidWdMb2coJ0NsaWVudC1zaWRlIHRva2VuIGlzIGV4cGlyZWQnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBpc1JlYWR5ID0gISFhY2Nlc3NUb2tlbiAmJiAhIXJlYWxtSWQ7XG4gICAgZGVidWdMb2coJ0NsaWVudC1zaWRlIFF1aWNrQm9va3MgcmVhZHkgc3RhdGU6JywgaXNSZWFkeSk7XG4gICAgcmV0dXJuIGlzUmVhZHk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIG1hcCBRdWlja0Jvb2tzIGludm9pY2UgZm9ybWF0IHRvIG91ciBhcHAgZm9ybWF0XG5mdW5jdGlvbiBtYXBRdWlja0Jvb2tzSW52b2ljZShxYkludm9pY2U6IGFueSk6IEludm9pY2Uge1xuICB0cnkge1xuICAgIC8vIEV4dHJhY3QgY3VzdG9tZXIgaW5mbyBpZiBhdmFpbGFibGVcbiAgICBjb25zdCBjdXN0b21lck5hbWUgPSBxYkludm9pY2UuQ3VzdG9tZXJSZWY/Lm5hbWUgfHwgJ1Vua25vd24gQ3VzdG9tZXInO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgbGluZSBpdGVtc1xuICAgIGNvbnN0IGxpbmVJdGVtcyA9IChxYkludm9pY2UuTGluZSB8fCBbXSkubWFwKChsaW5lOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBsaW5lLklkIHx8ICcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogbGluZS5EZXNjcmlwdGlvbiB8fCAnJyxcbiAgICAgICAgYW1vdW50OiBsaW5lLkFtb3VudCB8fCAwLFxuICAgICAgICBxdWFudGl0eTogbGluZS5RdWFudGl0eSB8fCAxLFxuICAgICAgICB1bml0UHJpY2U6IGxpbmUuU2FsZXNJdGVtTGluZURldGFpbD8uVW5pdFByaWNlIHx8IDAsXG4gICAgICB9O1xuICAgIH0pO1xuICAgIFxuICAgIC8vIE1hcCB0byBvdXIgaW52b2ljZSBmb3JtYXRcbiAgcmV0dXJuIHtcbiAgICAgIGlkOiBxYkludm9pY2UuSWQgfHwgJycsXG4gICAgICBpbnZvaWNlTnVtYmVyOiBxYkludm9pY2UuRG9jTnVtYmVyIHx8ICcnLFxuICAgICAgY3VzdG9tZXJOYW1lOiBjdXN0b21lck5hbWUsXG4gICAgICBkYXRlOiBxYkludm9pY2UuVHhuRGF0ZSB8fCAnJyxcbiAgICAgIGR1ZURhdGU6IHFiSW52b2ljZS5EdWVEYXRlIHx8ICcnLFxuICAgICAgYW1vdW50OiBxYkludm9pY2UuVG90YWxBbXQgfHwgMCxcbiAgICAgIGJhbGFuY2U6IHFiSW52b2ljZS5CYWxhbmNlIHx8IDAsXG4gICAgICBzdGF0dXM6IHFiSW52b2ljZS5zdGF0dXMgfHwgJ1Vua25vd24nLFxuICAgICAgbGluZUl0ZW1zOiBsaW5lSXRlbXMsXG4gICAgICBjdXJyZW5jeTogcWJJbnZvaWNlLkN1cnJlbmN5UmVmPy5uYW1lIHx8ICdVU0QnXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYXBwaW5nIFF1aWNrQm9va3MgaW52b2ljZTonLCBlcnJvcik7XG4gICAgLy8gUmV0dXJuIGEgbWluaW1hbCB2YWxpZCBpbnZvaWNlIHRvIGF2b2lkIGVycm9yc1xuICAgIHJldHVybiB7XG4gICAgICBpZDogcWJJbnZvaWNlLklkIHx8ICcnLFxuICAgICAgaW52b2ljZU51bWJlcjogcWJJbnZvaWNlLkRvY051bWJlciB8fCAnJyxcbiAgICAgIGN1c3RvbWVyTmFtZTogJ0Vycm9yIHBhcnNpbmcgaW52b2ljZScsXG4gICAgICBkYXRlOiBxYkludm9pY2UuVHhuRGF0ZSB8fCAnJyxcbiAgICAgIGR1ZURhdGU6ICcnLFxuICAgICAgYW1vdW50OiAwLFxuICAgICAgYmFsYW5jZTogMCxcbiAgICAgIHN0YXR1czogJ0Vycm9yJyxcbiAgICAgIGxpbmVJdGVtczogW10sXG4gICAgICBjdXJyZW5jeTogJ1VTRCdcbiAgICB9O1xuICB9XG59XG5cbi8vIEZ1bmN0aW9uIHRvIHJlZnJlc2ggUXVpY2tCb29rcyB0b2tlblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hRdWlja0Jvb2tzVG9rZW4ocmVmcmVzaFRva2VuOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgdHJ5IHtcbiAgICBkZWJ1Z0xvZygnQXR0ZW1wdGluZyB0byByZWZyZXNoIHRva2VuJyk7XG4gICAgXG4gICAgLy8gQ3JlYXRlIGEgZnJlc2ggT0F1dGggY2xpZW50IGZvciB0b2tlbiByZWZyZXNoXG4gICAgY29uc3QgZnJlc2hPQXV0aENsaWVudCA9IGNyZWF0ZU9BdXRoQ2xpZW50KCk7XG4gICAgXG4gICAgaWYgKCFmcmVzaE9BdXRoQ2xpZW50KSB7XG4gICAgICBkZWJ1Z0xvZygnRmFpbGVkIHRvIGNyZWF0ZSBmcmVzaCBPQXV0aCBjbGllbnQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZGVidWdMb2coJ0NyZWF0ZWQgZnJlc2ggT0F1dGggY2xpZW50IGZvciB0b2tlbiByZWZyZXNoJyk7XG4gICAgXG4gICAgLy8gVHJ5IHRvIHJlZnJlc2ggdG9rZW5cbiAgICBjb25zdCByZWZyZXNoUmVzcG9uc2UgPSBhd2FpdCBmcmVzaE9BdXRoQ2xpZW50LnJlZnJlc2hVc2luZ1Rva2VuKHJlZnJlc2hUb2tlbik7XG4gICAgXG4gICAgaWYgKCFyZWZyZXNoUmVzcG9uc2UpIHtcbiAgICAgIGRlYnVnTG9nKCdObyByZXNwb25zZSBmcm9tIHRva2VuIHJlZnJlc2gnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgcmVmcmVzaERhdGEgPSByZWZyZXNoUmVzcG9uc2UuZ2V0SnNvbigpO1xuICAgIGRlYnVnTG9nKCdSZWZyZXNoIHJlc3BvbnNlIHJlY2VpdmVkJywgeyBcbiAgICAgIGhhc0FjY2Vzc1Rva2VuOiAhIXJlZnJlc2hEYXRhLmFjY2Vzc190b2tlbixcbiAgICAgIGhhc1JlZnJlc2hUb2tlbjogISFyZWZyZXNoRGF0YS5yZWZyZXNoX3Rva2VuLFxuICAgICAgZXhwaXJlc0luOiByZWZyZXNoRGF0YS5leHBpcmVzX2luXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZWZyZXNoRGF0YS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIGRlYnVnTG9nKCdObyBhY2Nlc3MgdG9rZW4gaW4gcmVmcmVzaCByZXNwb25zZScpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBTdG9yZSB0aGUgcmVmcmVzaGVkIHRva2VuXG4gICAgc3RvcmVUb2tlbihcbiAgICAgIHJlZnJlc2hEYXRhLmFjY2Vzc190b2tlbixcbiAgICAgIHRva2VuU3RvcmUucmVhbG1JZCB8fCAnJywgLy8gVXNlIGV4aXN0aW5nIHJlYWxtSWRcbiAgICAgIHJlZnJlc2hEYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgICByZWZyZXNoRGF0YS5leHBpcmVzX2luXG4gICAgKTtcbiAgICBcbiAgICAvLyBSZS1pbml0aWFsaXplIFF1aWNrQm9va3MgY2xpZW50IHdpdGggbmV3IHRva2VuXG4gICAgaWYgKHRva2VuU3RvcmUucmVhbG1JZCkge1xuICAgICAgY29uc3QgaW5pdGlhbGl6ZWQgPSBpbml0aWFsaXplUUJPKFxuICAgICAgICByZWZyZXNoRGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgIHRva2VuU3RvcmUucmVhbG1JZCxcbiAgICAgICAgcmVmcmVzaERhdGEucmVmcmVzaF90b2tlbixcbiAgICAgICAgcmVmcmVzaERhdGEuZXhwaXJlc19pbiA/IERhdGUubm93KCkgKyAocmVmcmVzaERhdGEuZXhwaXJlc19pbiAqIDEwMDApIDogdW5kZWZpbmVkXG4gICAgICApO1xuICAgICAgXG4gICAgICBkZWJ1Z0xvZygnUXVpY2tCb29rcyBjbGllbnQgcmUtaW5pdGlhbGl6ZWQgYWZ0ZXIgdG9rZW4gcmVmcmVzaDonLCB7IHN1Y2Nlc3M6IGluaXRpYWxpemVkIH0pO1xuICAgICAgcmV0dXJuIGluaXRpYWxpemVkO1xuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZygnTm8gcmVhbG1JZCBhdmFpbGFibGUgdG8gcmUtaW5pdGlhbGl6ZSBjbGllbnQnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVmcmVzaGluZyB0b2tlbjonLCBlcnJvcik7XG4gICAgZGVidWdMb2coJ1Rva2VuIHJlZnJlc2ggZmFpbGVkIHdpdGggZXJyb3InKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoSW52b2ljZXMoKTogUHJvbWlzZTxJbnZvaWNlW10gfCBudWxsPiB7XG4gIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBTdGFydGluZyBpbnZvaWNlIGZldGNoIHByb2Nlc3MnKTtcbiAgdHJ5IHtcbiAgICBkZWJ1Z0xvZygnU3RhcnRpbmcgZmV0Y2hJbnZvaWNlcy4uLicpO1xuICAgIFxuICAgIC8vIEZpcnN0LCB2ZXJpZnkgd2UgY2FuIGdldCBzdG9yZWQgdG9rZW5zIC0gYW55IHNvdXJjZSBpcyBmaW5lIChtZW1vcnksIGxvY2FsU3RvcmFnZSwgY29va2llcylcbiAgICBjb25zdCB0b2tlbnMgPSBnZXRTdG9yZWRUb2tlbigpO1xuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBUb2tlbiBjaGVjayByZXN1bHQ6JywgeyBcbiAgICAgIGhhc1Rva2VuOiAhIXRva2Vucz8uYWNjZXNzVG9rZW4sXG4gICAgICBoYXNSZWFsbUlkOiAhIXRva2Vucz8ucmVhbG1JZCxcbiAgICAgIGhhc1JlZnJlc2hUb2tlbjogISF0b2tlbnM/LnJlZnJlc2hUb2tlbixcbiAgICAgIHRva2VuRXhwaXJ5OiB0b2tlbnM/LnRva2VuRXhwaXJ5ID8gbmV3IERhdGUodG9rZW5zLnRva2VuRXhwaXJ5KS50b0lTT1N0cmluZygpIDogJ25vbmUnXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCF0b2tlbnMgfHwgIXRva2Vucy5hY2Nlc3NUb2tlbiB8fCAhdG9rZW5zLnJlYWxtSWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBObyB2YWxpZCB0b2tlbnMgZm91bmQgZm9yIFF1aWNrQm9va3MgQVBJIGNhbGwnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUXVpY2tCb29rcyBhdXRoZW50aWNhdGlvbiByZXF1aXJlZC4gUGxlYXNlIGNvbm5lY3QgeW91ciBhY2NvdW50LicpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB0b2tlbiBpcyBleHBpcmVkIGFuZCB3ZSBuZWVkIHRvIHJlZnJlc2hcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHRva2VuRXhwaXJlZCA9IHRva2Vucy50b2tlbkV4cGlyeSAmJiBub3cgPj0gdG9rZW5zLnRva2VuRXhwaXJ5O1xuICAgIFxuICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBUb2tlbiBleHBpcnkgY2hlY2s6Jywge1xuICAgICAgbm93OiBuZXcgRGF0ZShub3cpLnRvSVNPU3RyaW5nKCksXG4gICAgICB0b2tlbkV4cGlyeTogdG9rZW5zLnRva2VuRXhwaXJ5ID8gbmV3IERhdGUodG9rZW5zLnRva2VuRXhwaXJ5KS50b0lTT1N0cmluZygpIDogJ3Vua25vd24nLFxuICAgICAgaXNFeHBpcmVkOiB0b2tlbkV4cGlyZWRcbiAgICB9KTtcbiAgICBcbiAgICAvLyBJZiB0b2tlbiBpcyBleHBpcmVkIGFuZCB3ZSBoYXZlIHJlZnJlc2ggdG9rZW4sIHRyeSB0byByZWZyZXNoIGl0XG4gICAgaWYgKHRva2VuRXhwaXJlZCAmJiB0b2tlbnMucmVmcmVzaFRva2VuKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogVG9rZW4gZXhwaXJlZCwgYXR0ZW1wdGluZyB0byByZWZyZXNoJyk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlZnJlc2hlZCA9IGF3YWl0IHJlZnJlc2hRdWlja0Jvb2tzVG9rZW4odG9rZW5zLnJlZnJlc2hUb2tlbik7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBUb2tlbiByZWZyZXNoIHJlc3VsdDonLCB7IHN1Y2Nlc3M6ICEhcmVmcmVzaGVkIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFyZWZyZXNoZWQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogVG9rZW4gcmVmcmVzaCBmYWlsZWQnKTtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byByZWZyZXNoIFF1aWNrQm9va3MgYXV0aGVudGljYXRpb24uIFBsZWFzZSByZWNvbm5lY3QgeW91ciBhY2NvdW50LicpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChyZWZyZXNoRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IEVycm9yIHJlZnJlc2hpbmcgdG9rZW46JywgcmVmcmVzaEVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlja0Jvb2tzIGF1dGhlbnRpY2F0aW9uIGV4cGlyZWQuIFBsZWFzZSByZWNvbm5lY3QgeW91ciBhY2NvdW50LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJbml0aWFsaXplIHRoZSBjbGllbnQgaWYgbm90IGFscmVhZHkgaW5pdGlhbGl6ZWRcbiAgICBpZiAoIXFibykge1xuICAgICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IFF1aWNrQm9va3MgY2xpZW50IG5vdCBpbml0aWFsaXplZCwgYXR0ZW1wdGluZyBpbml0aWFsaXphdGlvbicpO1xuICAgICAgY29uc3QgaW5pdGlhbGl6ZWQgPSBpbml0aWFsaXplUUJPKHRva2Vucy5hY2Nlc3NUb2tlbiwgdG9rZW5zLnJlYWxtSWQsIHRva2Vucy5yZWZyZXNoVG9rZW4sIHRva2Vucy50b2tlbkV4cGlyeSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBJbml0aWFsaXphdGlvbiByZXN1bHQ6JywgeyBzdWNjZXNzOiBpbml0aWFsaXplZCB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFpbml0aWFsaXplZCB8fCAhcWJvKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBDbGllbnQgaW5pdGlhbGl6YXRpb24gZmFpbGVkJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgUXVpY2tCb29rcyBjbGllbnQuIFBsZWFzZSByZWNvbm5lY3QgeW91ciBhY2NvdW50LicpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogVXNpbmcgZXhpc3RpbmcgUXVpY2tCb29rcyBjbGllbnQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRG91YmxlLWNoZWNrIHRoYXQgcWJvIGlzIHByb3Blcmx5IGluaXRpYWxpemVkIHdpdGggZXNzZW50aWFsIHByb3BlcnRpZXNcbiAgICBpZiAoIXFiby5hY2Nlc3NUb2tlbikge1xuICAgICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IFFCIGNsaWVudCBtaXNzaW5nIGFjY2Vzc1Rva2VuLCB1cGRhdGluZycpO1xuICAgICAgcWJvLmFjY2Vzc1Rva2VuID0gdG9rZW5zLmFjY2Vzc1Rva2VuO1xuICAgIH1cbiAgICBcbiAgICBpZiAoIXFiby5yZWFsbUlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogUUIgY2xpZW50IG1pc3NpbmcgcmVhbG1JZCwgdXBkYXRpbmcnKTtcbiAgICAgIHFiby5yZWFsbUlkID0gdG9rZW5zLnJlYWxtSWQ7XG4gICAgfVxuICAgIFxuICAgIC8vIFByaW50IG91dCBldmVyeXRoaW5nIHdlIGNhbiBhYm91dCB0aGUgY2xpZW50IHN0YXRlIGZvciBkZWJ1Z2dpbmdcbiAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogUXVpY2tCb29rcyBjbGllbnQgc3RhdGU6Jywge1xuICAgICAgY2xpZW50RXhpc3RzOiAhIXFibyxcbiAgICAgIGhhc0FjY2Vzc1Rva2VuOiAhIShxYm8gJiYgcWJvLmFjY2Vzc1Rva2VuKSxcbiAgICAgIGhhc1JlYWxtSWQ6ICEhKHFibyAmJiBxYm8ucmVhbG1JZCksXG4gICAgICBoYXNUb2tlblNlY3JldDogISEocWJvICYmIChxYm8gYXMgYW55KS50b2tlblNlY3JldCksXG4gICAgICBvYXV0aHZlcnNpb246IHFibyA/IChxYm8gYXMgYW55KS5vYXV0aHZlcnNpb24gOiAnbm9uZScsXG4gICAgICBoYXNSZWZyZXNoVG9rZW46ICEhKHFibyAmJiAocWJvIGFzIGFueSkucmVmcmVzaFRva2VuKSxcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBdCB0aGlzIHBvaW50LCBxYm8gc2hvdWxkIGJlIGluaXRpYWxpemVkXG4gICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IFBlcmZvcm1pbmcgUXVpY2tCb29rcyBBUEkgY2FsbCBmb3IgaW52b2ljZXMnKTtcbiAgICBcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKCFxYm8pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IFFCIGNsaWVudCBub3QgYXZhaWxhYmxlIGF0IHJlcXVlc3QgdGltZScpO1xuICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcignUXVpY2tCb29rcyBjbGllbnQgbm90IGluaXRpYWxpemVkJykpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogTWFraW5nIGZpbmRJbnZvaWNlcyBBUEkgY2FsbCcpO1xuICAgICAgXG4gICAgICAvLyBUcnktY2F0Y2ggYmxvY2sgYXJvdW5kIHRoZSBBUEkgY2FsbFxuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gRmlyc3QgdHJ5OiBVc2UgYSBzaW1wbGVyIGFwcHJvYWNoIHdpdGggbm8gZmlsdGVyc1xuICAgICAgICAvLyBNYW55IFF1aWNrQm9va3MgQVBJIGZhaWx1cmVzIGhhcHBlbiBkdWUgdG8gY29tcGxleCBxdWVyaWVzXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBUcnlpbmcgc2ltcGxlIHF1ZXJ5IHdpdGggbm8gZmlsdGVycycpO1xuICAgICAgICBcbiAgICAgICAgcWJvLmZpbmRJbnZvaWNlcygnJywgKGVycjogYW55LCBkYXRhOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IEVycm9yIGluIHNpbXBsZSBmaW5kSW52b2ljZXMgY2FsbDonLCBlcnIpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIEVycm9yIGRldGFpbHM6JywgSlNPTi5zdHJpbmdpZnkoZXJyLCBudWxsLCAyKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHRoZSBzaW1wbGUgYXBwcm9hY2ggZmFpbHMsIHRyeSBhIGJhY2t1cCBhcHByb2FjaFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIGZldGNoSW52b2ljZXM6IFRyeWluZyBhbHRlcm5hdGl2ZSBxdWVyeSBhcHByb2FjaCcpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gVHJ5IHdpdGggdGhlIG9sZGVyIHF1ZXJ5IGFwcHJvYWNoXG4gICAgICAgICAgICAgIHFiby5maW5kSW52b2ljZXMoW1xuICAgICAgICAgICAgICAgIHsgZmllbGQ6ICdNZXRhRGF0YS5MYXN0VXBkYXRlZFRpbWUnLCB2YWx1ZTogJzIwMTAtMDEtMDFUMDA6MDA6MDAnLCBvcGVyYXRvcjogJz4nIH1cbiAgICAgICAgICAgICAgXSwgKGVycjI6IGFueSwgZGF0YTI6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlcnIyKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogQm90aCBxdWVyeSBhcHByb2FjaGVzIGZhaWxlZDonLCBlcnIyKTtcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBFcnJvciBkZXRhaWxzOicsIEpTT04uc3RyaW5naWZ5KGVycjIsIG51bGwsIDIpKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHByb2Nlc3NJbnZvaWNlUmVzdWx0KGRhdGEyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGJhY2t1cEVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBFeGNlcHRpb24gaW4gYmFja3VwIGFwcHJvYWNoOicsIGJhY2t1cEVycm9yKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChiYWNrdXBFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NJbnZvaWNlUmVzdWx0KGRhdGEsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGFwaUNhbGxFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfirZAgZmV0Y2hJbnZvaWNlczogRXhjZXB0aW9uIGR1cmluZyBBUEkgY2FsbCBleGVjdXRpb246JywgYXBpQ2FsbEVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoYFF1aWNrQm9va3MgQVBJIGNhbGwgZmFpbGVkOiAke2FwaUNhbGxFcnJvciBpbnN0YW5jZW9mIEVycm9yID8gYXBpQ2FsbEVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBFcnJvciBpbiBmZXRjaEludm9pY2VzOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gcHJvY2VzcyBpbnZvaWNlIHJlc3VsdHNcbmZ1bmN0aW9uIHByb2Nlc3NJbnZvaWNlUmVzdWx0KGRhdGE6IGFueSwgcmVzb2x2ZTogRnVuY3Rpb24sIHJlamVjdDogRnVuY3Rpb24pIHtcbiAgLy8gQ2hlY2sgaWYgZGF0YSBoYXMgUXVlcnlSZXNwb25zZSBwcm9wZXJ0eSB3aXRoIEludm9pY2UgYXJyYXlcbiAgaWYgKGRhdGEgJiYgZGF0YS5RdWVyeVJlc3BvbnNlICYmIEFycmF5LmlzQXJyYXkoZGF0YS5RdWVyeVJlc3BvbnNlLkludm9pY2UpKSB7XG4gICAgY29uc3QgaW52b2ljZXMgPSBkYXRhLlF1ZXJ5UmVzcG9uc2UuSW52b2ljZTtcbiAgICBjb25zb2xlLmVycm9yKGDirZAgZmV0Y2hJbnZvaWNlczogU3VjY2Vzc2Z1bGx5IGZvdW5kICR7aW52b2ljZXMubGVuZ3RofSBpbnZvaWNlc2ApO1xuICAgIFxuICAgIC8vIElmIG5vIGludm9pY2VzIHdlcmUgZm91bmQsIHJldHVybiBlbXB0eSBhcnJheSByYXRoZXIgdGhhbiBlcnJvclxuICAgIGlmIChpbnZvaWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBObyBpbnZvaWNlcyBmb3VuZCBpbiBRdWlja0Jvb2tzIGFjY291bnQnKTtcbiAgICAgIHJldHVybiByZXNvbHZlKFtdKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHJlc29sdmUoaW52b2ljZXMpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBJbnZhbGlkIGRhdGEgc3RydWN0dXJlIHJlY2VpdmVkIGZyb20gUUIgQVBJOicsIHR5cGVvZiBkYXRhLCBkYXRhID8gT2JqZWN0LmtleXMoZGF0YSkgOiAnbnVsbCcpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBmZXRjaEludm9pY2VzOiBEYXRhIGR1bXA6JywgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZyb20gUXVpY2tCb29rcyBBUEknKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldEludm9pY2VCeUlkID0gYXN5bmMgKGlkOiBzdHJpbmcpOiBQcm9taXNlPEludm9pY2U+ID0+IHtcbiAgdHJ5IHtcbiAgICBkZWJ1Z0xvZyhgRmV0Y2hpbmcgaW52b2ljZSBieSBJRDogJHtpZH1gKTtcbiAgICBjaGVja0NsaWVudEluaXRpYWxpemVkKCk7XG4gICAgXG4gICAgaWYgKCFxYm8pIHtcbiAgICAgIGRlYnVnTG9nKCdRQk8gY2xpZW50IGlzIG51bGwgYWZ0ZXIgaW5pdGlhbGl6YXRpb24gY2hlY2snKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignUXVpY2tCb29rcyBjbGllbnQgaXMgbm90IGF2YWlsYWJsZS4gUGxlYXNlIHJlY29ubmVjdCB5b3VyIFF1aWNrQm9va3MgYWNjb3VudC4nKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY2xlYW5JZCA9IGlkLnJlcGxhY2UoL14oPzppbnYtKT8jP1xccyovaSwgJycpLnRyaW0oKTtcbiAgICBcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZGVidWdMb2coYENhbGxpbmcgUXVpY2tCb29rcyBnZXRJbnZvaWNlIEFQSSBmb3IgSUQ6ICR7Y2xlYW5JZH1gKTtcbiAgICAgIHFibyEuZ2V0SW52b2ljZShjbGVhbklkLCAoZXJyOiBhbnksIGludm9pY2U6IGFueSkgPT4ge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgaW52b2ljZSBmcm9tIFF1aWNrQm9va3MgQVBJOicsIGVycik7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGVyci5jb2RlID09PSAnODAwNDA0MDgnKSB7XG4gICAgICAgICAgICBkZWJ1Z0xvZygnUXVpY2tCb29rcyBpbml0aWFsaXphdGlvbiBlcnJvciAoODAwNDA0MDgpLiBDbGVhcmluZyB0b2tlbnMuJyk7XG4gICAgICAgICAgICBjbGVhclRva2VucygpO1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUXVpY2tCb29rcyBjb25uZWN0aW9uIGVycm9yLiBQbGVhc2UgcmVjb25uZWN0IHlvdXIgUXVpY2tCb29rcyBhY2NvdW50LicpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVyci5jb2RlID09PSAnMjcwJyB8fCBlcnIubWVzc2FnZT8uaW5jbHVkZXMoJ1Rva2VuIGludmFsaWQnKSkge1xuICAgICAgICAgICAgZGVidWdMb2coJ0ludmFsaWQgdG9rZW4gZXJyb3IuIENsZWFyaW5nIHRva2Vucy4nKTtcbiAgICAgICAgICAgIGNsZWFyVG9rZW5zKCk7XG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdRdWlja0Jvb2tzIGF1dGhlbnRpY2F0aW9uIGhhcyBleHBpcmVkLiBQbGVhc2UgcmVjb25uZWN0IHlvdXIgUXVpY2tCb29rcyBhY2NvdW50LicpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGVyci5zdGF0dXNDb2RlID09PSA0MDQpIHtcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYEludm9pY2UgIyR7aWR9IG5vdCBmb3VuZC4gUGxlYXNlIGNoZWNrIHRoZSBpbnZvaWNlIG51bWJlciBhbmQgdHJ5IGFnYWluLmApKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGludm9pY2UgZnJvbSBRdWlja0Jvb2tzLiBQbGVhc2UgY2hlY2sgeW91ciBjb25uZWN0aW9uLicpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVidWdMb2coJ1N1Y2Nlc3NmdWxseSBmZXRjaGVkIGludm9pY2UgZnJvbSBRdWlja0Jvb2tzJyk7XG4gICAgICAgICAgcmVzb2x2ZShtYXBRdWlja0Jvb2tzSW52b2ljZShpbnZvaWNlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldEludm9pY2VCeUlkOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuLy8gSW5pdGlhbGl6ZSB0aGUgT0F1dGggY2xpZW50XG5pbml0aWFsaXplT0F1dGhDbGllbnQoKTtcblxuLy8gVXBkYXRlIHRoZSBnZXRBdXRoVXJsIGZ1bmN0aW9uIHRvIHVzZSB0aGUgbmV3IGNyZWF0ZU9BdXRoQ2xpZW50IGZ1bmN0aW9uXG5leHBvcnQgY29uc3QgZ2V0QXV0aFVybCA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBMb2cgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBkZWJ1Z2dpbmcgKHJlZGFjdGluZyBzZW5zaXRpdmUgaW5mbylcbiAgICBjb25zb2xlLmxvZygnRW52aXJvbm1lbnQgY2hlY2s6Jywge1xuICAgICAgaGFzQ2xpZW50SWQ6ICEhcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfSUQsXG4gICAgICBoYXNDbGllbnRTZWNyZXQ6ICEhcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfU0VDUkVULFxuICAgICAgcmVkaXJlY3RVcmk6IGdldFJlZGlyZWN0VXJpKCksXG4gICAgICBiYXNlVXJsOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQVNFX1VSTFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGEgZnJlc2ggT0F1dGggY2xpZW50IGZvciB0aGlzIHJlcXVlc3RcbiAgICBjb25zdCBmcmVzaE9BdXRoQ2xpZW50ID0gY3JlYXRlT0F1dGhDbGllbnQoKTtcblxuICAgIC8vIEdlbmVyYXRlIGFuZCBsb2cgdGhlIGF1dGggVVJMXG4gICAgY29uc3QgYXV0aFVybCA9IGZyZXNoT0F1dGhDbGllbnQuYXV0aG9yaXplVXJpKHtcbiAgICAgIHNjb3BlOiBbXG4gICAgICAgIE9BdXRoQ2xpZW50LnNjb3Blcy5BY2NvdW50aW5nLFxuICAgICAgICBPQXV0aENsaWVudC5zY29wZXMuT3BlbklkLFxuICAgICAgICBPQXV0aENsaWVudC5zY29wZXMuUHJvZmlsZSxcbiAgICAgICAgT0F1dGhDbGllbnQuc2NvcGVzLkVtYWlsLFxuICAgICAgXSxcbiAgICAgIHN0YXRlOiAndGVzdHN0YXRlJyxcbiAgICB9KTtcblxuICAgIGNvbnNvbGUubG9nKCdHZW5lcmF0ZWQgYXV0aCBVUkw6JywgYXV0aFVybCk7XG4gICAgcmV0dXJuIGF1dGhVcmw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2V0QXV0aFVybDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRSZWRpcmVjdFVyaUZvckRpc3BsYXkgPSAoKSA9PiB7XG4gIHJldHVybiBnZXRSZWRpcmVjdFVyaSgpO1xufTtcblxuLy8gQ3JlYXRlIGEgZnVuY3Rpb24gdG8gZ2V0IGEgZnJlc2ggT0F1dGggY2xpZW50XG5mdW5jdGlvbiBnZXRPQXV0aENsaWVudCgpIHtcbiAgLy8gRW5zdXJlIHRoZSBPQXV0aCBjbGllbnQgaXMgaW5pdGlhbGl6ZWRcbiAgaWYgKCFvYXV0aENsaWVudCkge1xuICAgIGNvbnNvbGUubG9nKCdPQXV0aCBjbGllbnQgbm90IGluaXRpYWxpemVkLCBpbml0aWFsaXppbmcgbm93Jyk7XG4gICAgaWYgKCFpbml0aWFsaXplT0F1dGhDbGllbnQoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBPQXV0aCBjbGllbnQnKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIFJldHVybiB0aGUgaW5pdGlhbGl6ZWQgY2xpZW50XG4gIHJldHVybiBvYXV0aENsaWVudDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhbGxiYWNrKHVybDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRva2VucyBhbmQgY2xpZW50XG4gICAgY2xlYXJUb2tlbnMoKTtcbiAgICBxYm8gPSBudWxsO1xuICAgIGlzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICBcbiAgICAvLyBBbHdheXMgY3JlYXRlIGEgZnJlc2ggT0F1dGggY2xpZW50IGZvciB0b2tlbiBleGNoYW5nZVxuICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgdG9rZW5TZWNyZXQgaXMgcHJvcGVybHkgc2V0IGZvciB0aGlzIHNwZWNpZmljIHJlcXVlc3RcbiAgICBjb25zdCBmcmVzaE9BdXRoQ2xpZW50ID0gY3JlYXRlT0F1dGhDbGllbnQoKTtcbiAgICBcbiAgICAvLyBQYXJzZSB0aGUgVVJMIHRvIGdldCB0aGUgcmVhbG1JZCBmcm9tIHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMKHVybCkuc2VhcmNoUGFyYW1zO1xuICAgIGNvbnN0IHJlYWxtSWRGcm9tVXJsID0gdXJsUGFyYW1zLmdldCgncmVhbG1JZCcpO1xuICAgIGNvbnN0IGNvZGUgPSB1cmxQYXJhbXMuZ2V0KCdjb2RlJyk7XG4gICAgXG4gICAgaWYgKCFjb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGF1dGhvcml6YXRpb24gY29kZSByZWNlaXZlZCBmcm9tIFF1aWNrQm9va3MnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIHRva2VuIHdpdGggZnJlc2ggT0F1dGggY2xpZW50Jywge1xuICAgICAgY29kZTogY29kZSxcbiAgICAgIGhhc1JlYWxtSWQ6ICEhcmVhbG1JZEZyb21VcmwsXG4gICAgICByZWRpcmVjdFVyaTogZ2V0UmVkaXJlY3RVcmkoKSxcbiAgICAgIGhhc0NsaWVudElkOiAhIXByb2Nlc3MuZW52LlFVSUNLQk9PS1NfQ0xJRU5UX0lELFxuICAgICAgaGFzQ2xpZW50U2VjcmV0OiAhIXByb2Nlc3MuZW52LlFVSUNLQk9PS1NfQ0xJRU5UX1NFQ1JFVFxuICAgIH0pO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0b2tlbiB3aXRoIHRoZSBmcmVzaCBjbGllbnRcbiAgICBpZiAoIXByb2Nlc3MuZW52LlFVSUNLQk9PS1NfQ0xJRU5UX1NFQ1JFVCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlja0Jvb2tzIGNsaWVudCBzZWNyZXQgaXMgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ29uZmlndXJlIHRva2VuIGNyZWF0aW9uIG9wdGlvbnMgd2l0aCB0aGUgdG9rZW5TZWNyZXQgZXhwbGljaXRseVxuICAgIGNvbnN0IHRva2VuQ29uZmlnID0ge1xuICAgICAgY29kZTogY29kZSxcbiAgICAgIHJlYWxtSWQ6IHJlYWxtSWRGcm9tVXJsLFxuICAgICAgcmVkaXJlY3RVcmk6IGdldFJlZGlyZWN0VXJpKCksXG4gICAgICB0b2tlblNlY3JldDogcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfU0VDUkVUIC8vIFBhc3MgdG9rZW5TZWNyZXQgZXhwbGljaXRseSBoZXJlXG4gICAgfTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgdG9rZW4gd2l0aCBjb25maWc6Jywge1xuICAgICAgaGFzQ29kZTogISF0b2tlbkNvbmZpZy5jb2RlLFxuICAgICAgaGFzUmVhbG1JZDogISF0b2tlbkNvbmZpZy5yZWFsbUlkLFxuICAgICAgaGFzUmVkaXJlY3RVcmk6ICEhdG9rZW5Db25maWcucmVkaXJlY3RVcmksXG4gICAgICBoYXNUb2tlblNlY3JldDogISF0b2tlbkNvbmZpZy50b2tlblNlY3JldFxuICAgIH0pO1xuICAgIFxuICAgIC8vIENyZWF0ZSB0b2tlbiB3aXRoIGV4cGxpY2l0IHBhcmFtc1xuICAgIGNvbnN0IGF1dGhSZXNwb25zZSA9IGF3YWl0IGZyZXNoT0F1dGhDbGllbnQuY3JlYXRlVG9rZW4odXJsLCB0b2tlbkNvbmZpZyk7XG4gICAgY29uc3QgdG9rZW5EYXRhID0gYXV0aFJlc3BvbnNlLmdldEpzb24oKTtcbiAgICBcbiAgICBpZiAoIXRva2VuRGF0YS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYWNjZXNzIHRva2VuIHJlY2VpdmVkIGZyb20gUXVpY2tCb29rcycpO1xuICAgIH1cbiAgICBcbiAgICAvLyBVc2UgcmVhbG1JZCBmcm9tIHRva2VuIGRhdGEgaWYgYXZhaWxhYmxlLCBvdGhlcndpc2UgdXNlIGZyb20gVVJMXG4gICAgY29uc3QgcmVhbG1JZCA9IHRva2VuRGF0YS5yZWFsbUlkIHx8IHJlYWxtSWRGcm9tVXJsO1xuICAgIFxuICAgIGlmICghcmVhbG1JZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyByZWFsbUlkIGZvdW5kIGluIHJlc3BvbnNlIG9yIFVSTCBwYXJhbWV0ZXJzJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFN0b3JlIHRva2VuIGZpcnN0XG4gICAgY29uc3Qgc3RvcmVSZXN1bHQgPSBzdG9yZVRva2VuKFxuICAgICAgdG9rZW5EYXRhLmFjY2Vzc190b2tlbixcbiAgICAgIHJlYWxtSWQsXG4gICAgICB0b2tlbkRhdGEucmVmcmVzaF90b2tlbixcbiAgICAgIHRva2VuRGF0YS5leHBpcmVzX2luXG4gICAgKTtcbiAgICBcbiAgICBpZiAoIXN0b3JlUmVzdWx0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzdG9yZSBRdWlja0Jvb2tzIHRva2VuJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBjbGllbnQgSUQgYW5kIHNlY3JldFxuICAgIGNvbnN0IGNsaWVudElkID0gcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfSUQ7XG4gICAgY29uc3QgY2xpZW50U2VjcmV0ID0gcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfU0VDUkVUO1xuICAgIFxuICAgIGlmICghY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlja0Jvb2tzIGNsaWVudCBjcmVkZW50aWFscyBhcmUgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRoZSBjbGllbnQgZGlyZWN0bHkgd2l0aCBuZWVkZWQgcGFyYW1ldGVyc1xuICAgIHFibyA9IG5ldyBRdWlja0Jvb2tzKFxuICAgICAgY2xpZW50SWQsXG4gICAgICBjbGllbnRTZWNyZXQsXG4gICAgICB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuLFxuICAgICAgZmFsc2UsIC8vIFNldCB0byBmYWxzZSBmb3IgcmVndWxhciBPQXV0aFxuICAgICAgcmVhbG1JZCxcbiAgICAgIHtcbiAgICAgICAgbWlub3J2ZXJzaW9uOiAnNjUnLFxuICAgICAgICBkZWJ1ZzogdHJ1ZSxcbiAgICAgICAgdXNlU2FuZGJveDogdHJ1ZSxcbiAgICAgICAgb2F1dGh2ZXJzaW9uOiAnMi4wJywgLy8gRXhwbGljaXRseSBzZXQgT0F1dGggdmVyc2lvbiB0byAyLjBcbiAgICAgICAgcmVxdWVzdFRpbWVvdXQ6IDMwMDAwXG4gICAgICB9XG4gICAgKTtcbiAgICBcbiAgICAvLyBFeHBsaWNpdGx5IHNldCByZXF1aXJlZCBwcm9wZXJ0aWVzIGlmIHRoZXkncmUgbm90IHNldCBieSBjb25zdHJ1Y3RvclxuICAgIGlmIChxYm8pIHtcbiAgICAgIC8vIE1ha2Ugc3VyZSBhY2Nlc3NUb2tlbiBpcyBzZXRcbiAgICAgIGlmICghcWJvLmFjY2Vzc1Rva2VuICYmIHRva2VuRGF0YS5hY2Nlc3NfdG9rZW4pIHtcbiAgICAgICAgcWJvLmFjY2Vzc1Rva2VuID0gdG9rZW5EYXRhLmFjY2Vzc190b2tlbjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTWFrZSBzdXJlIHJlYWxtSWQgaXMgc2V0XG4gICAgICBpZiAoIXFiby5yZWFsbUlkICYmIHJlYWxtSWQpIHtcbiAgICAgICAgcWJvLnJlYWxtSWQgPSByZWFsbUlkO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgY2xpZW50IHdhcyBjcmVhdGVkIGFuZCBoYXMgcmVxdWlyZWQgcHJvcGVydGllc1xuICAgIGlmICghcWJvIHx8ICFxYm8uYWNjZXNzVG9rZW4gfHwgIXFiby5yZWFsbUlkKSB7XG4gICAgICBxYm8gPSBudWxsO1xuICAgICAgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlja0Jvb2tzIGNsaWVudCBpbml0aWFsaXphdGlvbiBmYWlsZWQgLSBtaXNzaW5nIHJlcXVpcmVkIHByb3BlcnRpZXMnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2V0IGluaXRpYWxpemF0aW9uIHN0YXR1c1xuICAgIGlzSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIGNvbnNvbGUubG9nKCdRdWlja0Jvb2tzIGNsaWVudCBpbml0aWFsaXplZCBzdWNjZXNzZnVsbHknKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgYWNjZXNzX3Rva2VuOiB0b2tlbkRhdGEuYWNjZXNzX3Rva2VuLFxuICAgICAgcmVhbG1JZDogcmVhbG1JZCxcbiAgICAgIHJlZnJlc2hfdG9rZW46IHRva2VuRGF0YS5yZWZyZXNoX3Rva2VuLFxuICAgICAgZXhwaXJlc19pbjogdG9rZW5EYXRhLmV4cGlyZXNfaW5cbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGhhbmRsZUNhbGxiYWNrOicsIGVycm9yKTtcbiAgICAvLyBDbGVhciBhbnkgcGFydGlhbCBzdGF0ZVxuICAgIGNsZWFyVG9rZW5zKCk7XG4gICAgcWJvID0gbnVsbDtcbiAgICBpc0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gQWRkIHRoaXMgZnVuY3Rpb24gdG8gdGhlIGFwaS50cyBmaWxlIHRvIGRpcmVjdGx5IHNldCB0b2tlbnNcbmV4cG9ydCBjb25zdCBtYW51YWxseUluaXRpYWxpemVRdWlja0Jvb2tzID0gKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdNYW51YWxseSBpbml0aWFsaXppbmcgUXVpY2tCb29rcyBjbGllbnQnKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgYW5kIHN0b3JlIGEgbG9uZy1sYXN0aW5nIHRva2VuICgzMCBkYXlzKVxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gJ01BTlVBTF9UT0tFTl8nICsgRGF0ZS5ub3coKTtcbiAgICBjb25zdCByZWFsbUlkID0gJ01BTlVBTF9SRUFMTV8nICsgRGF0ZS5ub3coKTtcbiAgICBjb25zdCBleHBpcmVzSW4gPSAzMCAqIDI0ICogNjAgKiA2MDsgLy8gMzAgZGF5cyBpbiBzZWNvbmRzXG4gICAgXG4gICAgLy8gQ2FsbCB0aGUgZXhpc3RpbmcgaW5pdGlhbGl6ZVFCTyBmdW5jdGlvblxuICAgIGNvbnN0IHJlc3VsdCA9IGluaXRpYWxpemVRQk8oYWNjZXNzVG9rZW4sIHJlYWxtSWQsIGFjY2Vzc1Rva2VuLCBleHBpcmVzSW4pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdNYW51YWwgUXVpY2tCb29rcyBpbml0aWFsaXphdGlvbiByZXN1bHQ6JywgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBtYW51YWxseSBpbml0aWFsaXplIFF1aWNrQm9va3M6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuLy8gQWRkIHRoaXMgZnVuY3Rpb24gdG8gY3JlYXRlIGEgcHJvcGVybHkgY29uZmlndXJlZCBPQXV0aCBjbGllbnRcbmZ1bmN0aW9uIGNyZWF0ZU9BdXRoQ2xpZW50KCkge1xuICB0cnkge1xuICAgIGNvbnN0IGNsaWVudElkID0gcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfSUQ7XG4gICAgY29uc3QgY2xpZW50U2VjcmV0ID0gcHJvY2Vzcy5lbnYuUVVJQ0tCT09LU19DTElFTlRfU0VDUkVUO1xuICAgIFxuICAgIGlmICghY2xpZW50SWQgfHwgIWNsaWVudFNlY3JldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlja0Jvb2tzIGNsaWVudCBjcmVkZW50aWFscyBhcmUgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gU0lNUExJRklFRDogQ3JlYXRlIE9BdXRoIGNsaWVudCB3aXRoIG1pbmltYWwgY29uZmlndXJhdGlvblxuICAgIHJldHVybiBuZXcgT0F1dGhDbGllbnQoe1xuICAgICAgY2xpZW50SWQsXG4gICAgICBjbGllbnRTZWNyZXQsXG4gICAgICBlbnZpcm9ubWVudDogJ3NhbmRib3gnLFxuICAgICAgcmVkaXJlY3RVcmk6IGdldFJlZGlyZWN0VXJpKCksXG4gICAgICB0b2tlblNlY3JldDogY2xpZW50U2VjcmV0IC8vIEVzc2VudGlhbCBmb3IgT0F1dGggZmxvd1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIE9BdXRoIGNsaWVudDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gSW5pdGlhbGl6ZSB0aGUgY2xpZW50IGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBkZWZpbmVkXG5mdW5jdGlvbiBpbml0aWFsaXplT0F1dGhDbGllbnQoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFvYXV0aENsaWVudCkge1xuICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZyBPQXV0aCBjbGllbnQnKTtcbiAgICAgIG9hdXRoQ2xpZW50ID0gY3JlYXRlT0F1dGhDbGllbnQoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdPQXV0aCBjbGllbnQgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBPQXV0aCBjbGllbnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBBZGQgdGhpcyBmdW5jdGlvbiB0byB1cGRhdGUgdG9rZW4gc3RvcmUgZGlyZWN0bHkgZnJvbSB2YWx1ZXNcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUb2tlblN0b3JlRnJvbVZhbHVlcyhcbiAgYWNjZXNzVG9rZW46IHN0cmluZyxcbiAgcmVhbG1JZDogc3RyaW5nLFxuICByZWZyZXNoVG9rZW4/OiBzdHJpbmcsXG4gIHRva2VuRXhwaXJ5PzogbnVtYmVyXG4pOiBib29sZWFuIHtcbiAgdHJ5IHtcbiAgICBkZWJ1Z0xvZygnRGlyZWN0bHkgdXBkYXRpbmcgdG9rZW4gc3RvcmUgd2l0aCBwcm92aWRlZCB2YWx1ZXMnKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIHRva2VuIHN0b3JlIGRpcmVjdGx5XG4gICAgdG9rZW5TdG9yZS5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xuICAgIHRva2VuU3RvcmUucmVhbG1JZCA9IHJlYWxtSWQ7XG4gICAgXG4gICAgaWYgKHJlZnJlc2hUb2tlbikge1xuICAgICAgdG9rZW5TdG9yZS5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW47XG4gICAgfVxuICAgIFxuICAgIGlmICh0b2tlbkV4cGlyeSkge1xuICAgICAgdG9rZW5TdG9yZS50b2tlbkV4cGlyeSA9IHRva2VuRXhwaXJ5O1xuICAgIH1cbiAgICBcbiAgICBkZWJ1Z0xvZygnVG9rZW4gc3RvcmUgdXBkYXRlZCB3aXRoIHZhbHVlczonLCB7XG4gICAgICBoYXNUb2tlbjogISF0b2tlblN0b3JlLmFjY2Vzc1Rva2VuLFxuICAgICAgaGFzUmVhbG1JZDogISF0b2tlblN0b3JlLnJlYWxtSWQsXG4gICAgICBoYXNSZWZyZXNoVG9rZW46ICEhdG9rZW5TdG9yZS5yZWZyZXNoVG9rZW4sXG4gICAgICB0b2tlbkV4cGlyeTogdG9rZW5TdG9yZS50b2tlbkV4cGlyeSA/IG5ldyBEYXRlKHRva2VuU3RvcmUudG9rZW5FeHBpcnkpLnRvSVNPU3RyaW5nKCkgOiAnbm9uZSdcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0b2tlbiBzdG9yZSBmcm9tIHZhbHVlczonLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIEFsdGVybmF0aXZlIG1ldGhvZCB0byBmZXRjaCBpbnZvaWNlcyB3aXRoIGEgbW9yZSBkaXJlY3QgYXBwcm9hY2hcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEludm9pY2VzRGlyZWN0bHkoKTogUHJvbWlzZTxhbnlbXT4ge1xuICBjb25zb2xlLmVycm9yKCfirZAgU3RhcnRpbmcgZGlyZWN0IGludm9pY2UgZmV0Y2ggd2l0aCBhbHRlcm5hdGl2ZSBtZXRob2QnKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIHZlcmlmeSB3ZSBjYW4gZ2V0IHN0b3JlZCB0b2tlbnNcbiAgICBjb25zdCB0b2tlbnMgPSBnZXRTdG9yZWRUb2tlbigpO1xuICAgIFxuICAgIGlmICghdG9rZW5zIHx8ICF0b2tlbnMuYWNjZXNzVG9rZW4gfHwgIXRva2Vucy5yZWFsbUlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfirZAgTm8gdmFsaWQgdG9rZW5zIGZvciBkaXJlY3QgaW52b2ljZSBmZXRjaCcpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlja0Jvb2tzIGF1dGhlbnRpY2F0aW9uIHJlcXVpcmVkLiBQbGVhc2UgY29ubmVjdCB5b3VyIGFjY291bnQuJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIFdlJ2xsIHNldCB1cCBhIGZyZXNoIE9BdXRoQ2xpZW50IGluc3RhbmNlIHNwZWNpZmljYWxseSBmb3IgdGhpcyByZXF1ZXN0XG4gICAgY29uc3Qgb2F1dGhDbGllbnRGb3JSZXF1ZXN0ID0gbmV3IE9BdXRoQ2xpZW50KHtcbiAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5RVUlDS0JPT0tTX0NMSUVOVF9JRCEsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LlFVSUNLQk9PS1NfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgICBlbnZpcm9ubWVudDogJ3NhbmRib3gnLFxuICAgICAgcmVkaXJlY3RVcmk6IGdldFJlZGlyZWN0VXJpKCksXG4gICAgICBsb2dnaW5nOiB0cnVlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gU2V0IHRoZSB0b2tlbnMgb24gdGhlIGNsaWVudFxuICAgIG9hdXRoQ2xpZW50Rm9yUmVxdWVzdC5zZXRUb2tlbih7XG4gICAgICByZWFsbUlkOiB0b2tlbnMucmVhbG1JZCxcbiAgICAgIHRva2VuX3R5cGU6ICdiZWFyZXInLFxuICAgICAgYWNjZXNzX3Rva2VuOiB0b2tlbnMuYWNjZXNzVG9rZW4sXG4gICAgICByZWZyZXNoX3Rva2VuOiB0b2tlbnMucmVmcmVzaFRva2VuIHx8ICcnLFxuICAgICAgZXhwaXJlc19pbjogdG9rZW5zLnRva2VuRXhwaXJ5ID8gTWF0aC5mbG9vcigodG9rZW5zLnRva2VuRXhwaXJ5IC0gRGF0ZS5ub3coKSkgLyAxMDAwKSA6IDM2MDBcbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmVycm9yKCfirZAgQXR0ZW1wdGluZyBkaXJlY3QgaW52b2ljZSBBUEkgY2FsbCcpO1xuICAgIFxuICAgIC8vIE1ha2UgYSBkaXJlY3QgQVBJIGNhbGwgKG5vdCB1c2luZyBub2RlLXF1aWNrYm9va3MpXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL3NhbmRib3gtcXVpY2tib29rcy5hcGkuaW50dWl0LmNvbS92My9jb21wYW55LyR7dG9rZW5zLnJlYWxtSWR9L3F1ZXJ5YDtcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbnMuYWNjZXNzVG9rZW59YCxcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vdGV4dCdcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSBhIHNpbXBsZXIgcXVlcnkgdG8gbWluaW1pemUgcG9zc2libGUgZm9ybWF0IGlzc3Vlc1xuICAgICAgICBjb25zdCBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBJbnZvaWNlXCI7XG4gICAgICAgIFxuICAgICAgICAvLyBNYWtlIHRoZSBBUEkgY2FsbFxuICAgICAgICBvYXV0aENsaWVudEZvclJlcXVlc3QubWFrZUFwaUNhbGwoe1xuICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgYm9keTogcXVlcnlcbiAgICAgICAgfSwgKGVycjogYW55LCByZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIERpcmVjdCBBUEkgY2FsbCBlcnJvcjonLCBlcnIpO1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gTG9nIHRoZSBlbnRpcmUgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIERpcmVjdCBBUEkgY2FsbCByZXNwb25zZTonLCByZXNwb25zZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgaW52b2ljZXMgZGF0YVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLlF1ZXJ5UmVzcG9uc2UgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5RdWVyeVJlc3BvbnNlLkludm9pY2UpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKtkCBTdWNjZXNzZnVsbHkgZm91bmQgJHtyZXNwb25zZS5RdWVyeVJlc3BvbnNlLkludm9pY2UubGVuZ3RofSBpbnZvaWNlcyBkaXJlY3RseWApO1xuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZS5RdWVyeVJlc3BvbnNlLkludm9pY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIElmIHRoZSByZXNwb25zZSBkb2Vzbid0IG1hdGNoIGV4cGVjdGVkIGZvcm1hdCwgdHJ5IHRvIGV4dHJhY3QgdXNlZnVsIGRhdGFcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIFVuZXhwZWN0ZWQgcmVzcG9uc2UgZm9ybWF0OicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYW55IGRhdGEgdGhhdCBjYW4gYmUgdXNlZCwgcmV0dXJuIGl0XG4gICAgICAgICAgICAgIGlmIChyZXNwb25zZSAmJiB0eXBlb2YgcmVzcG9uc2UgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5RdWVyeVJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShbcmVzcG9uc2UuUXVlcnlSZXNwb25zZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgRXJyb3IoJ0ludmFsaWQgcmVzcG9uc2UgZm9ybWF0IGZyb20gUXVpY2tCb29rcyBBUEknKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4q2QIEVycm9yIHBhcnNpbmcgZGlyZWN0IEFQSSByZXNwb25zZTonLCBwYXJzZUVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QocGFyc2VFcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGFwaUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBFcnJvciBtYWtpbmcgZGlyZWN0IEFQSSBjYWxsOicsIGFwaUVycm9yKTtcbiAgICAgICAgcmV0dXJuIHJlamVjdChhcGlFcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcign4q2QIFRvcC1sZXZlbCBlcnJvciBpbiBkaXJlY3QgaW52b2ljZSBmZXRjaDonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gVWx0cmEgbWluaW1hbCBBUEkgY2FsbCBmb3IgUXVpY2tCb29rcyBpbnZvaWNlcyAodGhpcmQgYXBwcm9hY2gpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hJbnZvaWNlc01pY3JvTWV0aG9kKCk6IFByb21pc2U8YW55W10+IHtcbiAgY29uc29sZS5lcnJvcign4q2QIFN0YXJ0aW5nIE1JQ1JPIGludm9pY2UgZmV0Y2ggd2l0aCBiYXJlIG1pbmltdW0gYXBwcm9hY2gnKTtcbiAgXG4gIHRyeSB7XG4gICAgLy8gR2V0IHRva2VucyBkaXJlY3RseSBmcm9tIG1lbW9yeSBzdG9yZSBmaXJzdCBmb3Igc3BlZWRcbiAgICBjb25zdCB0b2tlbnMgPSB0b2tlblN0b3JlLmFjY2Vzc1Rva2VuICYmIHRva2VuU3RvcmUucmVhbG1JZCA/IHtcbiAgICAgIGFjY2Vzc1Rva2VuOiB0b2tlblN0b3JlLmFjY2Vzc1Rva2VuLFxuICAgICAgcmVhbG1JZDogdG9rZW5TdG9yZS5yZWFsbUlkXG4gICAgfSA6IGdldFN0b3JlZFRva2VuKCk7XG4gICAgXG4gICAgaWYgKCF0b2tlbnMgfHwgIXRva2Vucy5hY2Nlc3NUb2tlbiB8fCAhdG9rZW5zLnJlYWxtSWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBObyB2YWxpZCB0b2tlbnMgZm9yIG1pY3JvIGludm9pY2UgZmV0Y2gnKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5lcnJvcign4q2QIE1pY3JvIG1ldGhvZDogVXNpbmcgbWluaW1hbCBheGlvcy1saWtlIGZldGNoIHdpdGggYmFyZSBBUEkgY2FsbCcpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIHByb21pc2Ugd2l0aCBhIHNob3J0IHRpbWVvdXRcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgLy8gQ3JlYXRlIGEgdGltZW91dCB0aGF0J3MgbXVjaCBzaG9ydGVyICgxNSBzZWNvbmRzKVxuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBNaWNybyBtZXRob2Q6IFJlcXVlc3QgdGltZWQgb3V0IGFmdGVyIDE1IHNlY29uZHMnKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignTWljcm8gbWV0aG9kIHJlcXVlc3QgdGltZWQgb3V0IGFmdGVyIDE1IHNlY29uZHMnKSk7XG4gICAgICB9LCAxNTAwMCk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFVzaW5nIHRoZSBmZXRjaCBBUEkgZGlyZWN0bHkgaW5zdGVhZCBvZiB0aGUgT0F1dGhDbGllbnQgb3Igbm9kZS1xdWlja2Jvb2tzXG4gICAgICAgIGNvbnN0IHVybCA9IGBodHRwczovL3NhbmRib3gtcXVpY2tib29rcy5hcGkuaW50dWl0LmNvbS92My9jb21wYW55LyR7dG9rZW5zLnJlYWxtSWR9L3F1ZXJ5P3F1ZXJ5PXNlbGVjdCUyMCUyQSUyMGZyb20lMjBJbnZvaWNlJTIwTUFYUkVTVUxUUyUyMDVgO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5lcnJvcign4q2QIE1pY3JvIG1ldGhvZDogQ2FsbGluZyBBUEkgZGlyZWN0bHkgYXQgVVJMOicsIHVybCk7XG4gICAgICAgIFxuICAgICAgICBmZXRjaCh1cmwsIHtcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2Vucy5hY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfirZAgTWljcm8gbWV0aG9kOiBSZWNlaXZlZCByZXNwb25zZSB3aXRoIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJlc3BvbmRlZCB3aXRoIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBNaWNybyBtZXRob2Q6IFN1Y2Nlc3NmdWxseSBwYXJzZWQgcmVzcG9uc2UgSlNPTicpO1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEV4dHJhY3QgaW52b2ljZSBkYXRhIGZyb20gcmVzcG9uc2VcbiAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLlF1ZXJ5UmVzcG9uc2UgJiYgQXJyYXkuaXNBcnJheShkYXRhLlF1ZXJ5UmVzcG9uc2UuSW52b2ljZSkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYOKtkCBNaWNybyBtZXRob2Q6IEZvdW5kICR7ZGF0YS5RdWVyeVJlc3BvbnNlLkludm9pY2UubGVuZ3RofSBpbnZvaWNlc2ApO1xuICAgICAgICAgICAgcmVzb2x2ZShkYXRhLlF1ZXJ5UmVzcG9uc2UuSW52b2ljZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBNaWNybyBtZXRob2Q6IFJlc3BvbnNlIGRvZXMgbm90IGNvbnRhaW4gaW52b2ljZSBhcnJheTonLCBkYXRhKTtcbiAgICAgICAgICAgIC8vIElmIHdlIGF0IGxlYXN0IGdvdCBkYXRhIGJ1dCBub3QgaW4gdGhlIGV4cGVjdGVkIGZvcm1hdCwgcmV0dXJuIGFuIGVtcHR5IGFycmF5XG4gICAgICAgICAgICAvLyByYXRoZXIgdGhhbiBmYWlsaW5nIC0gdGhpcyBoZWxwcyB0aGUgVUkgaGFuZGxlIHRoZSBjYXNlIGJldHRlclxuICAgICAgICAgICAgcmVzb2x2ZShbXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBNaWNybyBtZXRob2Q6IEZldGNoIGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KtkCBNaWNybyBtZXRob2Q6IEV4Y2VwdGlvbiBkdXJpbmcgZmV0Y2ggc2V0dXA6JywgZXJyb3IpO1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfirZAgTWljcm8gbWV0aG9kOiBUb3AtbGV2ZWwgZXJyb3I6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59ICJdLCJuYW1lcyI6WyJPQXV0aENsaWVudCIsIlF1aWNrQm9va3MiLCJjb25zb2xlIiwibG9nIiwiY29uc3RydWN0b3JUeXBlIiwiaXNGdW5jdGlvbiIsIlRPS0VOX0tFWSIsIlJFQUxNX0lEX0tFWSIsIlJFRlJFU0hfVE9LRU5fS0VZIiwiVE9LRU5fRVhQSVJZX0tFWSIsIkRFQlVHIiwiZGVidWdMb2ciLCJhcmdzIiwiZ2V0QmFzZVVybCIsImJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQkFTRV9VUkwiLCJzdGFydHNXaXRoIiwicmVwbGFjZSIsImdldFJlZGlyZWN0VXJpIiwib2F1dGhDbGllbnQiLCJxYm8iLCJ0b2tlblN0b3JlIiwiaXNJbml0aWFsaXplZCIsInN0b3JlVG9rZW4iLCJhY2Nlc3NUb2tlbiIsInJlYWxtSWQiLCJyZWZyZXNoVG9rZW4iLCJleHBpcmVzSW4iLCJleHBpcnlUaW1lIiwiRGF0ZSIsIm5vdyIsInRva2VuRXhwaXJ5IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInRvU3RyaW5nIiwibG9jYWxTdG9yYWdlRXJyb3IiLCJlcnJvciIsImdldFN0b3JlZFRva2VuIiwiZ2V0SXRlbSIsInRva2VuRXhwaXJ5U3RyIiwicGFyc2VJbnQiLCJ1bmRlZmluZWQiLCJjbGVhclRva2VucyIsInJlbW92ZUl0ZW0iLCJpbml0aWFsaXplUUJPIiwiYWNjZXNzVG9rZW5QcmVzZW50IiwicmVhbG1JZFByZXNlbnQiLCJjbGllbnRJZFByZXNlbnQiLCJRVUlDS0JPT0tTX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldFByZXNlbnQiLCJRVUlDS0JPT0tTX0NMSUVOVF9TRUNSRVQiLCJjbGllbnRJZCIsImNsaWVudFNlY3JldCIsImhhc1FibyIsImhhc1Rva2VuIiwiaGFzUmVhbG1JZCIsImNsaWVudEVycm9yIiwidXNlU2FuZGJveCIsImZhbGxiYWNrRXJyb3IiLCJjaGVja0NsaWVudEluaXRpYWxpemVkIiwic3RvcmVkVG9rZW4iLCJnZXRTZXJ2ZXJTaWRlVG9rZW4iLCJFcnJvciIsImhhc0FjY2Vzc1Rva2VuIiwiaGFzUmVmcmVzaFRva2VuIiwiaW5pdFJlc3VsdCIsIk1hdGgiLCJmbG9vciIsImlzUXVpY2tCb29rc1JlYWR5IiwiaXNSZWFkeSIsIm1hcFF1aWNrQm9va3NJbnZvaWNlIiwicWJJbnZvaWNlIiwiY3VzdG9tZXJOYW1lIiwiQ3VzdG9tZXJSZWYiLCJuYW1lIiwibGluZUl0ZW1zIiwiTGluZSIsIm1hcCIsImxpbmUiLCJpZCIsIklkIiwiZGVzY3JpcHRpb24iLCJEZXNjcmlwdGlvbiIsImFtb3VudCIsIkFtb3VudCIsInF1YW50aXR5IiwiUXVhbnRpdHkiLCJ1bml0UHJpY2UiLCJTYWxlc0l0ZW1MaW5lRGV0YWlsIiwiVW5pdFByaWNlIiwiaW52b2ljZU51bWJlciIsIkRvY051bWJlciIsImRhdGUiLCJUeG5EYXRlIiwiZHVlRGF0ZSIsIkR1ZURhdGUiLCJUb3RhbEFtdCIsImJhbGFuY2UiLCJCYWxhbmNlIiwic3RhdHVzIiwiY3VycmVuY3kiLCJDdXJyZW5jeVJlZiIsInJlZnJlc2hRdWlja0Jvb2tzVG9rZW4iLCJmcmVzaE9BdXRoQ2xpZW50IiwiY3JlYXRlT0F1dGhDbGllbnQiLCJyZWZyZXNoUmVzcG9uc2UiLCJyZWZyZXNoVXNpbmdUb2tlbiIsInJlZnJlc2hEYXRhIiwiZ2V0SnNvbiIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hfdG9rZW4iLCJleHBpcmVzX2luIiwiaW5pdGlhbGl6ZWQiLCJzdWNjZXNzIiwiZmV0Y2hJbnZvaWNlcyIsInRva2VucyIsInRvSVNPU3RyaW5nIiwidG9rZW5FeHBpcmVkIiwiaXNFeHBpcmVkIiwicmVmcmVzaGVkIiwicmVmcmVzaEVycm9yIiwiY2xpZW50RXhpc3RzIiwiaGFzVG9rZW5TZWNyZXQiLCJ0b2tlblNlY3JldCIsIm9hdXRodmVyc2lvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmluZEludm9pY2VzIiwiZXJyIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaWVsZCIsInZhbHVlIiwib3BlcmF0b3IiLCJlcnIyIiwiZGF0YTIiLCJwcm9jZXNzSW52b2ljZVJlc3VsdCIsImJhY2t1cEVycm9yIiwiYXBpQ2FsbEVycm9yIiwibWVzc2FnZSIsIlF1ZXJ5UmVzcG9uc2UiLCJBcnJheSIsImlzQXJyYXkiLCJJbnZvaWNlIiwiaW52b2ljZXMiLCJsZW5ndGgiLCJPYmplY3QiLCJrZXlzIiwiZ2V0SW52b2ljZUJ5SWQiLCJjbGVhbklkIiwidHJpbSIsImdldEludm9pY2UiLCJpbnZvaWNlIiwiY29kZSIsImluY2x1ZGVzIiwic3RhdHVzQ29kZSIsImluaXRpYWxpemVPQXV0aENsaWVudCIsImdldEF1dGhVcmwiLCJoYXNDbGllbnRJZCIsImhhc0NsaWVudFNlY3JldCIsInJlZGlyZWN0VXJpIiwiYXV0aFVybCIsImF1dGhvcml6ZVVyaSIsInNjb3BlIiwic2NvcGVzIiwiQWNjb3VudGluZyIsIk9wZW5JZCIsIlByb2ZpbGUiLCJFbWFpbCIsInN0YXRlIiwiZ2V0UmVkaXJlY3RVcmlGb3JEaXNwbGF5IiwiZ2V0T0F1dGhDbGllbnQiLCJoYW5kbGVDYWxsYmFjayIsInVybCIsInVybFBhcmFtcyIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInJlYWxtSWRGcm9tVXJsIiwiZ2V0IiwidG9rZW5Db25maWciLCJoYXNDb2RlIiwiaGFzUmVkaXJlY3RVcmkiLCJhdXRoUmVzcG9uc2UiLCJjcmVhdGVUb2tlbiIsInRva2VuRGF0YSIsInN0b3JlUmVzdWx0IiwibWlub3J2ZXJzaW9uIiwiZGVidWciLCJyZXF1ZXN0VGltZW91dCIsIm1hbnVhbGx5SW5pdGlhbGl6ZVF1aWNrQm9va3MiLCJyZXN1bHQiLCJlbnZpcm9ubWVudCIsInVwZGF0ZVRva2VuU3RvcmVGcm9tVmFsdWVzIiwiZmV0Y2hJbnZvaWNlc0RpcmVjdGx5Iiwib2F1dGhDbGllbnRGb3JSZXF1ZXN0IiwibG9nZ2luZyIsInNldFRva2VuIiwidG9rZW5fdHlwZSIsImhlYWRlcnMiLCJxdWVyeSIsIm1ha2VBcGlDYWxsIiwibWV0aG9kIiwiYm9keSIsInJlc3BvbnNlIiwicGFyc2UiLCJwYXJzZUVycm9yIiwiYXBpRXJyb3IiLCJmZXRjaEludm9pY2VzTWljcm9NZXRob2QiLCJ0aW1lb3V0SWQiLCJzZXRUaW1lb3V0IiwiZmV0Y2giLCJ0aGVuIiwib2siLCJqc29uIiwiY2xlYXJUaW1lb3V0IiwiY2F0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/quickbooks/api.ts\n");

/***/ }),

/***/ "(ssr)/./src/lib/quickbooks/directAuth.ts":
/*!******************************************!*\
  !*** ./src/lib/quickbooks/directAuth.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initQuickBooksDirectly: () => (/* binding */ initQuickBooksDirectly)\n/* harmony export */ });\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ \"(ssr)/./src/lib/quickbooks/api.ts\");\n\n/**\r\n * Development utility to manually initialize QuickBooks without going through OAuth\r\n * This should ONLY be used in development environments for testing\r\n */ const initQuickBooksDirectly = ()=>{\n    if (false) {}\n    try {\n        console.log(\"Directly initializing QuickBooks with test credentials\");\n        // Generate test tokens\n        const accessToken = `test_token_${Date.now()}`;\n        const realmId = `test_realm_${Date.now()}`;\n        const refreshToken = accessToken;\n        const expiresIn = 24 * 60 * 60; // 24 hours in seconds\n        // Initialize QuickBooks\n        const success = (0,_api__WEBPACK_IMPORTED_MODULE_0__.initializeQBO)(accessToken, realmId, refreshToken, expiresIn);\n        if (success) {\n            console.log(\" QuickBooks test initialization successful!\");\n            console.log(\"You can now use the QuickBooks API for development\");\n            // Store these values in localStorage for client-side access\n            if (false) {}\n            return true;\n        } else {\n            console.error(\" QuickBooks test initialization failed\");\n            return false;\n        }\n    } catch (error) {\n        console.error(\"Error in direct initialization:\", error);\n        return false;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9zcmMvbGliL3F1aWNrYm9va3MvZGlyZWN0QXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzQztBQUV0Qzs7O0NBR0MsR0FDTSxNQUFNQyx5QkFBeUI7SUFDcEMsSUFBSUMsS0FBeUIsRUFBYyxFQUcxQztJQUVELElBQUk7UUFDRkMsUUFBUUUsR0FBRyxDQUFDO1FBRVosdUJBQXVCO1FBQ3ZCLE1BQU1DLGNBQWMsQ0FBQyxXQUFXLEVBQUVDLEtBQUtDLEdBQUcsR0FBRyxDQUFDO1FBQzlDLE1BQU1DLFVBQVUsQ0FBQyxXQUFXLEVBQUVGLEtBQUtDLEdBQUcsR0FBRyxDQUFDO1FBQzFDLE1BQU1FLGVBQWVKO1FBQ3JCLE1BQU1LLFlBQVksS0FBSyxLQUFLLElBQUksc0JBQXNCO1FBRXRELHdCQUF3QjtRQUN4QixNQUFNQyxVQUFVWixtREFBYUEsQ0FBQ00sYUFBYUcsU0FBU0MsY0FBY0M7UUFFbEUsSUFBSUMsU0FBUztZQUNYVCxRQUFRRSxHQUFHLENBQUM7WUFDWkYsUUFBUUUsR0FBRyxDQUFDO1lBRVosNERBQTREO1lBQzVELElBQUksS0FBa0IsRUFBYSxFQUtsQztZQUVELE9BQU87UUFDVCxPQUFPO1lBQ0xGLFFBQVFDLEtBQUssQ0FBQztZQUNkLE9BQU87UUFDVDtJQUNGLEVBQUUsT0FBT0EsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsbUNBQW1DQTtRQUNqRCxPQUFPO0lBQ1Q7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9zcmMvbGliL3F1aWNrYm9va3MvZGlyZWN0QXV0aC50cz82ZWIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGluaXRpYWxpemVRQk8gfSBmcm9tICcuL2FwaSc7XHJcblxyXG4vKipcclxuICogRGV2ZWxvcG1lbnQgdXRpbGl0eSB0byBtYW51YWxseSBpbml0aWFsaXplIFF1aWNrQm9va3Mgd2l0aG91dCBnb2luZyB0aHJvdWdoIE9BdXRoXHJcbiAqIFRoaXMgc2hvdWxkIE9OTFkgYmUgdXNlZCBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMgZm9yIHRlc3RpbmdcclxuICovXHJcbmV4cG9ydCBjb25zdCBpbml0UXVpY2tCb29rc0RpcmVjdGx5ID0gKCkgPT4ge1xyXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdEaXJlY3QgaW5pdGlhbGl6YXRpb24gY2Fubm90IGJlIHVzZWQgaW4gcHJvZHVjdGlvbiEnKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdEaXJlY3RseSBpbml0aWFsaXppbmcgUXVpY2tCb29rcyB3aXRoIHRlc3QgY3JlZGVudGlhbHMnKTtcclxuICAgIFxyXG4gICAgLy8gR2VuZXJhdGUgdGVzdCB0b2tlbnNcclxuICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYHRlc3RfdG9rZW5fJHtEYXRlLm5vdygpfWA7XHJcbiAgICBjb25zdCByZWFsbUlkID0gYHRlc3RfcmVhbG1fJHtEYXRlLm5vdygpfWA7XHJcbiAgICBjb25zdCByZWZyZXNoVG9rZW4gPSBhY2Nlc3NUb2tlbjtcclxuICAgIGNvbnN0IGV4cGlyZXNJbiA9IDI0ICogNjAgKiA2MDsgLy8gMjQgaG91cnMgaW4gc2Vjb25kc1xyXG4gICAgXHJcbiAgICAvLyBJbml0aWFsaXplIFF1aWNrQm9va3NcclxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBpbml0aWFsaXplUUJPKGFjY2Vzc1Rva2VuLCByZWFsbUlkLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJbik7XHJcbiAgICBcclxuICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgUXVpY2tCb29rcyB0ZXN0IGluaXRpYWxpemF0aW9uIHN1Y2Nlc3NmdWwhJyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdZb3UgY2FuIG5vdyB1c2UgdGhlIFF1aWNrQm9va3MgQVBJIGZvciBkZXZlbG9wbWVudCcpO1xyXG4gICAgICBcclxuICAgICAgLy8gU3RvcmUgdGhlc2UgdmFsdWVzIGluIGxvY2FsU3RvcmFnZSBmb3IgY2xpZW50LXNpZGUgYWNjZXNzXHJcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdxYl90b2tlbicsIGFjY2Vzc1Rva2VuKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncWJfcmVhbG1faWQnLCByZWFsbUlkKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncWJfcmVmcmVzaF90b2tlbicsIHJlZnJlc2hUb2tlbik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3FiX3Rva2VuX2V4cGlyeScsIChEYXRlLm5vdygpICsgKGV4cGlyZXNJbiAqIDEwMDApKS50b1N0cmluZygpKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgUXVpY2tCb29rcyB0ZXN0IGluaXRpYWxpemF0aW9uIGZhaWxlZCcpO1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRpcmVjdCBpbml0aWFsaXphdGlvbjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59OyAiXSwibmFtZXMiOlsiaW5pdGlhbGl6ZVFCTyIsImluaXRRdWlja0Jvb2tzRGlyZWN0bHkiLCJwcm9jZXNzIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwiYWNjZXNzVG9rZW4iLCJEYXRlIiwibm93IiwicmVhbG1JZCIsInJlZnJlc2hUb2tlbiIsImV4cGlyZXNJbiIsInN1Y2Nlc3MiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwidG9TdHJpbmciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./src/lib/quickbooks/directAuth.ts\n");

/***/ }),

/***/ "(rsc)/./src/app/globals.css":
/*!*****************************!*\
  !*** ./src/app/globals.css ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"7890b4f3f98c\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2dsb2JhbHMuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaW52b2ljZS1hcHAvLi9zcmMvYXBwL2dsb2JhbHMuY3NzP2QzZmIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI3ODkwYjRmM2Y5OGNcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/globals.css\n");

/***/ }),

/***/ "(rsc)/./src/app/layout.tsx":
/*!****************************!*\
  !*** ./src/app/layout.tsx ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./src/app/globals.css\");\n/* harmony import */ var _providers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./providers */ \"(rsc)/./src/app/providers.tsx\");\n\n\n\nconst metadata = {\n    title: \"Invoice Management Tool\",\n    description: \"AI-powered invoice management with QuickBooks integration\"\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_providers__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                children: children\n            }, void 0, false, {\n                fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\layout.tsx\",\n                lineNumber: 18,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\layout.tsx\",\n            lineNumber: 17,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\InvoiveManagment\\\\src\\\\app\\\\layout.tsx\",\n        lineNumber: 16,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2xheW91dC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNzQjtBQUNhO0FBRTVCLE1BQU1DLFdBQXFCO0lBQ2hDQyxPQUFPO0lBQ1BDLGFBQWE7QUFDZixFQUFDO0FBRWMsU0FBU0MsV0FBVyxFQUNqQ0MsUUFBUSxFQUdUO0lBQ0MscUJBQ0UsOERBQUNDO1FBQUtDLE1BQUs7a0JBQ1QsNEVBQUNDO3NCQUNDLDRFQUFDUixrREFBU0E7MEJBQ1BLOzs7Ozs7Ozs7Ozs7Ozs7O0FBS1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9pbnZvaWNlLWFwcC8uL3NyYy9hcHAvbGF5b3V0LnRzeD81N2E5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTWV0YWRhdGEgfSBmcm9tICduZXh0J1xyXG5pbXBvcnQgJy4vZ2xvYmFscy5jc3MnXHJcbmltcG9ydCBQcm92aWRlcnMgZnJvbSAnLi9wcm92aWRlcnMnXHJcblxyXG5leHBvcnQgY29uc3QgbWV0YWRhdGE6IE1ldGFkYXRhID0ge1xyXG4gIHRpdGxlOiAnSW52b2ljZSBNYW5hZ2VtZW50IFRvb2wnLFxyXG4gIGRlc2NyaXB0aW9uOiAnQUktcG93ZXJlZCBpbnZvaWNlIG1hbmFnZW1lbnQgd2l0aCBRdWlja0Jvb2tzIGludGVncmF0aW9uJyxcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gUm9vdExheW91dCh7XHJcbiAgY2hpbGRyZW4sXHJcbn06IHtcclxuICBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlXHJcbn0pIHtcclxuICByZXR1cm4gKFxyXG4gICAgPGh0bWwgbGFuZz1cImVuXCI+XHJcbiAgICAgIDxib2R5PlxyXG4gICAgICAgIDxQcm92aWRlcnM+XHJcbiAgICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgICAgPC9Qcm92aWRlcnM+XHJcbiAgICAgIDwvYm9keT5cclxuICAgIDwvaHRtbD5cclxuICApXHJcbn0gIl0sIm5hbWVzIjpbIlByb3ZpZGVycyIsIm1ldGFkYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIlJvb3RMYXlvdXQiLCJjaGlsZHJlbiIsImh0bWwiLCJsYW5nIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`C:\InvoiveManagment\src\app\page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ }),

/***/ "(rsc)/./src/app/providers.tsx":
/*!*******************************!*\
  !*** ./src/app/providers.tsx ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`C:\InvoiveManagment\src\app\providers.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ajv","vendor-chunks/psl","vendor-chunks/sshpk","vendor-chunks/bluebird","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/readable-stream","vendor-chunks/node-quickbooks","vendor-chunks/request","vendor-chunks/winston","vendor-chunks/underscore","vendor-chunks/tweetnacl","vendor-chunks/fast-xml-parser","vendor-chunks/semver","vendor-chunks/uri-js","vendor-chunks/tough-cookie","vendor-chunks/jsbn","vendor-chunks/color","vendor-chunks/bcrypt-pbkdf","vendor-chunks/async","vendor-chunks/http-signature","vendor-chunks/intuit-oauth","vendor-chunks/logform","vendor-chunks/jsonwebtoken","vendor-chunks/safe-stable-stringify","vendor-chunks/@colors","vendor-chunks/ecc-jsbn","vendor-chunks/follow-redirects","vendor-chunks/debug","vendor-chunks/lodash.includes","vendor-chunks/qs","vendor-chunks/jsprim","vendor-chunks/get-intrinsic","vendor-chunks/form-data","vendor-chunks/aws4","vendor-chunks/asn1","vendor-chunks/fecha","vendor-chunks/json-schema","vendor-chunks/query-string","vendor-chunks/verror","vendor-chunks/winston-transport","vendor-chunks/uuid","vendor-chunks/string_decoder","vendor-chunks/color-name","vendor-chunks/asynckit","vendor-chunks/date-fns","vendor-chunks/jws","vendor-chunks/har-schema","vendor-chunks/@dabh","vendor-chunks/tunnel-agent","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/color-string","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/assert-plus","vendor-chunks/combined-stream","vendor-chunks/extsprintf","vendor-chunks/forever-agent","vendor-chunks/aws-sign2","vendor-chunks/oauth-sign","vendor-chunks/strnum","vendor-chunks/extend","vendor-chunks/mime-types","vendor-chunks/lodash.isplainobject","vendor-chunks/stack-trace","vendor-chunks/proxy-from-env","vendor-chunks/triple-beam","vendor-chunks/ms","vendor-chunks/request-debug","vendor-chunks/csrf","vendor-chunks/supports-color","vendor-chunks/core-util-is","vendor-chunks/has-symbols","vendor-chunks/kuler","vendor-chunks/decode-uri-component","vendor-chunks/json-schema-traverse","vendor-chunks/delayed-stream","vendor-chunks/har-validator","vendor-chunks/lodash.isstring","vendor-chunks/safer-buffer","vendor-chunks/random-bytes","vendor-chunks/function-bind","vendor-chunks/lodash.isnumber","vendor-chunks/uid-safe","vendor-chunks/caseless","vendor-chunks/fast-json-stable-stringify","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/rsa-pem-from-mod-exp","vendor-chunks/es-set-tostringtag","vendor-chunks/fast-deep-equal","vendor-chunks/performance-now","vendor-chunks/tsscmp","vendor-chunks/call-bind-apply-helpers","vendor-chunks/get-proto","vendor-chunks/buffer-equal-constant-time","vendor-chunks/one-time","vendor-chunks/fn.name","vendor-chunks/dunder-proto","vendor-chunks/json-stringify-safe","vendor-chunks/is-typedarray","vendor-chunks/rndm","vendor-chunks/enabled","vendor-chunks/math-intrinsics","vendor-chunks/@babel","vendor-chunks/colorspace","vendor-chunks/is-stream","vendor-chunks/simple-swizzle","vendor-chunks/isstream","vendor-chunks/split-on-first","vendor-chunks/es-errors","vendor-chunks/text-hex","vendor-chunks/filter-obj","vendor-chunks/has-flag","vendor-chunks/is-arrayish","vendor-chunks/es-define-property","vendor-chunks/gopd","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/strict-uri-encode","vendor-chunks/util-deprecate","vendor-chunks/atob","vendor-chunks/stringify-clone","vendor-chunks/es-object-atoms","vendor-chunks/react-query","vendor-chunks/@swc","vendor-chunks/swr","vendor-chunks/use-sync-external-store","vendor-chunks/zod","vendor-chunks/nanoid","vendor-chunks/ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=C%3A%5CInvoiveManagment%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CInvoiveManagment&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();